var lD=Object.defineProperty,uD=Object.defineProperties;var dD=Object.getOwnPropertyDescriptors;var ug=Object.getOwnPropertySymbols;var fD=Object.prototype.hasOwnProperty,hD=Object.prototype.propertyIsEnumerable;var dg=(e,t,n)=>t in e?lD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||={})fD.call(t,n)&&dg(e,n,t[n]);if(ug)for(var n of ug(t))hD.call(t,n)&&dg(e,n,t[n]);return e},q=(e,t)=>uD(e,dD(t));var Ye=null,na=!1,Pu=1,pD=null,et=Symbol("SIGNAL");function k(e){let t=Ye;return Ye=e,t}function ia(){return Ye}var _o={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function wo(e){if(na)throw new Error("");if(Ye===null)return;Ye.consumerOnSignalRead(e);let t=Ye.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Ye.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Ye.producers,n!==void 0&&n.producer===e)){Ye.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Ye&&(!r||mD(i,Ye)))return;let o=pi(Ye),s={producer:e,consumer:Ye,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Ye.producersTail=s,t!==void 0?t.nextProducer=s:Ye.producers=s,o&&gg(e,s)}function fg(){Pu++}function Fu(e){if(!(pi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Pu)){if(!e.producerMustRecompute(e)&&!sa(e)){ku(e);return}e.producerRecomputeValue(e),ku(e)}}function Lu(e){if(e.consumers===void 0)return;let t=na;na=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||gD(r)}}finally{na=t}}function ju(){return Ye?.consumerAllowSignalWrites!==!1}function gD(e){e.dirty=!0,Lu(e),e.consumerMarkedDirty?.(e)}function ku(e){e.dirty=!1,e.lastCleanEpoch=Pu}function Eo(e){return e&&hg(e),k(e)}function hg(e){e.producersTail=void 0,e.recomputing=!0}function oa(e,t){k(t),e&&pg(e)}function pg(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(pi(e))do n=Vu(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function sa(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(Fu(n),r!==n.version))return!0}return!1}function Do(e){if(pi(e)){let t=e.producers;for(;t!==void 0;)t=Vu(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function gg(e,t){let n=e.consumersTail,r=pi(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)gg(i.producer,i)}function Vu(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!pi(t)){let o=t.producers;for(;o!==void 0;)o=Vu(o)}return n}function pi(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Uu(e){pD?.(e)}function mD(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Bu(e,t){return Object.is(e,t)}function aa(e,t){let n=Object.create(vD);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(Fu(n),wo(n),n.value===ra)throw n.error;return n.value};return r[et]=n,Uu(n),r}var Nu=Symbol("UNSET"),Ou=Symbol("COMPUTING"),ra=Symbol("ERRORED"),vD=q(b({},_o),{value:Nu,dirty:!0,error:null,equal:Bu,kind:"computed",producerMustRecompute(e){return e.value===Nu||e.value===Ou},producerRecomputeValue(e){if(e.value===Ou)throw new Error("");let t=e.value;e.value=Ou;let n=Eo(e),r,i=!1;try{r=e.computation(),k(null),i=t!==Nu&&t!==ra&&r!==ra&&e.equal(t,r)}catch(o){r=ra,e.error=o}finally{oa(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function yD(){throw new Error}var mg=yD;function vg(e){mg(e)}function $u(e){mg=e}var _D=null;function Hu(e,t){let n=Object.create(ca);n.value=e,t!==void 0&&(n.equal=t);let r=()=>yg(n);return r[et]=n,Uu(n),[r,s=>bo(n,s),s=>_g(n,s)]}function yg(e){return wo(e),e.value}function bo(e,t){ju()||vg(e),e.equal(e.value,t)||(e.value=t,wD(e))}function _g(e,t){ju()||vg(e),bo(e,t(e.value))}var ca=q(b({},_o),{equal:Bu,value:void 0,kind:"signal"});function wD(e){e.version++,fg(),Lu(e),_D?.(e)}function qu(e){let t=k(null);try{return e()}finally{k(t)}}function U(e){return typeof e=="function"}function gi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var la=gi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Co(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var $e=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(o){t=o instanceof la?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{wg(o)}catch(s){t=t??[],s instanceof la?t=[...t,...s.errors]:t.push(s)}}if(t)throw new la(t)}}add(t){var n;if(t&&t!==this)if(this.closed)wg(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Co(n,t)}remove(t){let{_finalizers:n}=this;n&&Co(n,t),t instanceof e&&t._removeParent(this)}};$e.EMPTY=(()=>{let e=new $e;return e.closed=!0,e})();var Gu=$e.EMPTY;function ua(e){return e instanceof $e||e&&"closed"in e&&U(e.remove)&&U(e.add)&&U(e.unsubscribe)}function wg(e){U(e)?e():e.unsubscribe()}var kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mi={setTimeout(e,t,...n){let{delegate:r}=mi;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=mi;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function da(e){mi.setTimeout(()=>{let{onUnhandledError:t}=kt;if(t)t(e);else throw e})}function So(){}var Eg=zu("C",void 0,void 0);function Dg(e){return zu("E",void 0,e)}function bg(e){return zu("N",e,void 0)}function zu(e,t,n){return{kind:e,value:t,error:n}}var pr=null;function vi(e){if(kt.useDeprecatedSynchronousErrorHandling){let t=!pr;if(t&&(pr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=pr;if(pr=null,n)throw r}}else e()}function Cg(e){kt.useDeprecatedSynchronousErrorHandling&&pr&&(pr.errorThrown=!0,pr.error=e)}var gr=class extends $e{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ua(t)&&t.add(this)):this.destination=bD}static create(t,n,r){return new yi(t,n,r)}next(t){this.isStopped?Ku(bg(t),this):this._next(t)}error(t){this.isStopped?Ku(Dg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ku(Eg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ED=Function.prototype.bind;function Wu(e,t){return ED.call(e,t)}var Yu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){fa(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){fa(r)}else fa(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){fa(n)}}},yi=class extends gr{constructor(t,n,r){super();let i;if(U(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&kt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Wu(t.next,o),error:t.error&&Wu(t.error,o),complete:t.complete&&Wu(t.complete,o)}):i=t}this.destination=new Yu(i)}};function fa(e){kt.useDeprecatedSynchronousErrorHandling?Cg(e):da(e)}function DD(e){throw e}function Ku(e,t){let{onStoppedNotification:n}=kt;n&&mi.setTimeout(()=>n(e,t))}var bD={closed:!0,next:So,error:DD,complete:So};var _i=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(e){return e}function Zu(...e){return Qu(e)}function Qu(e){return e.length===0?Pt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var G=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=SD(n)?n:new yi(n,r,i);return vi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Sg(r),new r((i,o)=>{let s=new yi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[_i](){return this}pipe(...n){return Qu(n)(this)}toPromise(n){return n=Sg(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Sg(e){var t;return(t=e??kt.Promise)!==null&&t!==void 0?t:Promise}function CD(e){return e&&U(e.next)&&U(e.error)&&U(e.complete)}function SD(e){return e&&e instanceof gr||CD(e)&&ua(e)}function ID(e){return U(e?.lift)}function Z(e){return t=>{if(ID(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(e,t,n,r,i){return new Ju(e,t,n,r,i)}var Ju=class extends gr{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Ig=gi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=(()=>{class e extends G{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ha(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ig}next(n){vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Gu:(this.currentObservers=null,o.push(n),new $e(()=>{this.currentObservers=null,Co(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new G;return n.source=this,n}}return e.create=(t,n)=>new ha(t,n),e})(),ha=class extends Te{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Gu}};var Ce=class extends Te{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var He=new G(e=>e.complete());function Tg(e){return e&&U(e.schedule)}function Ag(e){return e[e.length-1]}function pa(e){return U(Ag(e))?e.pop():void 0}function $n(e){return Tg(Ag(e))?e.pop():void 0}function vr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ga(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Mg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function mr(e){return this instanceof mr?(this.v=e,this):new mr(e)}function Rg(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(y){return new Promise(function(D,E){o.push([f,y,D,E])>1||c(f,y)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof mr?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function xg(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Mg=="function"?Mg(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var ma=e=>e&&typeof e.length=="number"&&typeof e!="function";function va(e){return U(e?.then)}function ya(e){return U(e[_i])}function _a(e){return Symbol.asyncIterator&&U(e?.[Symbol.asyncIterator])}function wa(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ea=TD();function Da(e){return U(e?.[Ea])}function ba(e){return Rg(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield mr(n.read());if(i)return yield mr(void 0);yield yield mr(r)}}finally{n.releaseLock()}})}function Ca(e){return U(e?.getReader)}function Ae(e){if(e instanceof G)return e;if(e!=null){if(ya(e))return AD(e);if(ma(e))return MD(e);if(va(e))return RD(e);if(_a(e))return Ng(e);if(Da(e))return xD(e);if(Ca(e))return ND(e)}throw wa(e)}function AD(e){return new G(t=>{let n=e[_i]();if(U(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MD(e){return new G(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function RD(e){return new G(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,da)})}function xD(e){return new G(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Ng(e){return new G(t=>{OD(e,t).catch(n=>t.error(n))})}function ND(e){return Ng(ba(e))}function OD(e,t){var n,r,i,o;return ga(this,void 0,void 0,function*(){try{for(n=xg(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function ot(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Sa(e,t=0){return Z((n,r)=>{n.subscribe(Q(r,i=>ot(r,e,()=>r.next(i),t),()=>ot(r,e,()=>r.complete(),t),i=>ot(r,e,()=>r.error(i),t)))})}function Ia(e,t=0){return Z((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Og(e,t){return Ae(e).pipe(Ia(t),Sa(t))}function kg(e,t){return Ae(e).pipe(Ia(t),Sa(t))}function Pg(e,t){return new G(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Fg(e,t){return new G(n=>{let r;return ot(n,t,()=>{r=e[Ea](),ot(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function Ta(e,t){if(!e)throw new Error("Iterable cannot be null");return new G(n=>{ot(n,t,()=>{let r=e[Symbol.asyncIterator]();ot(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Lg(e,t){return Ta(ba(e),t)}function jg(e,t){if(e!=null){if(ya(e))return Og(e,t);if(ma(e))return Pg(e,t);if(va(e))return kg(e,t);if(_a(e))return Ta(e,t);if(Da(e))return Fg(e,t);if(Ca(e))return Lg(e,t)}throw wa(e)}function ce(e,t){return t?jg(e,t):Ae(e)}function B(...e){let t=$n(e);return ce(e,t)}function Xu(e,t){let n=U(e)?e:()=>e,r=i=>i.error(n());return new G(t?i=>t.schedule(r,0,i):r)}function Aa(e){return!!e&&(e instanceof G||U(e.lift)&&U(e.subscribe))}var yr=gi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function le(e,t){return Z((n,r)=>{let i=0;n.subscribe(Q(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:kD}=Array;function PD(e,t){return kD(t)?e(...t):e(t)}function Ma(e){return le(t=>PD(e,t))}var{isArray:FD}=Array,{getPrototypeOf:LD,prototype:jD,keys:VD}=Object;function Ra(e){if(e.length===1){let t=e[0];if(FD(t))return{args:t,keys:null};if(UD(t)){let n=VD(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function UD(e){return e&&typeof e=="object"&&LD(e)===jD}function xa(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Na(...e){let t=$n(e),n=pa(e),{args:r,keys:i}=Ra(e);if(r.length===0)return ce([],t);let o=new G(BD(r,t,i?s=>xa(i,s):Pt));return n?o.pipe(Ma(n)):o}function BD(e,t,n=Pt){return r=>{Vg(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Vg(t,()=>{let l=ce(e[c],t),u=!1;l.subscribe(Q(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Vg(e,t,n){e?ot(n,e,t):t()}function Ug(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},f=y=>l<r?p(y):c.push(y),p=y=>{o&&t.next(y),l++;let D=!1;Ae(n(y,u++)).subscribe(Q(t,E=>{i?.(E),o?f(E):t.next(E)},()=>{D=!0},void 0,()=>{if(D)try{for(l--;c.length&&l<r;){let E=c.shift();s?ot(t,s,()=>p(E)):p(E)}h()}catch(E){t.error(E)}}))};return e.subscribe(Q(t,f,()=>{d=!0,h()})),()=>{a?.()}}function qe(e,t,n=1/0){return U(t)?qe((r,i)=>le((o,s)=>t(r,o,i,s))(Ae(e(r,i))),n):(typeof t=="number"&&(n=t),Z((r,i)=>Ug(r,i,e,n)))}function Hn(e=1/0){return qe(Pt,e)}function Bg(){return Hn(1)}function wi(...e){return Bg()(ce(e,$n(e)))}function Io(e){return new G(t=>{Ae(e()).subscribe(t)})}function ed(...e){let t=pa(e),{args:n,keys:r}=Ra(e),i=new G(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ae(n[u]).subscribe(Q(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?xa(r,a):a),o.complete())}))}});return t?i.pipe(Ma(t)):i}function Ft(e,t){return Z((n,r)=>{let i=0;n.subscribe(Q(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Ei(e){return Z((t,n)=>{let r=null,i=!1,o;r=t.subscribe(Q(n,void 0,void 0,s=>{o=Ae(e(s,Ei(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Di(e,t){return U(t)?qe(e,t,1):qe(e,1)}function $g(e){return Z((t,n)=>{let r=!1;t.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Sn(e){return e<=0?()=>He:Z((t,n)=>{let r=0;t.subscribe(Q(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Hg(e=$D){return Z((t,n)=>{let r=!1;t.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function $D(){return new yr}function td(e){return Z((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function In(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ft((i,o)=>e(i,o,r)):Pt,Sn(1),n?$g(t):Hg(()=>new yr))}function Oa(e){return e<=0?()=>He:Z((t,n)=>{let r=[];t.subscribe(Q(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function nd(...e){let t=$n(e);return Z((n,r)=>{(t?wi(e,n,t):wi(e,n)).subscribe(r)})}function en(e,t){return Z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Q(r,c=>{i?.unsubscribe();let l=0,u=o++;Ae(e(c,u)).subscribe(i=Q(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function To(e){return Z((t,n)=>{Ae(e).subscribe(Q(n,()=>n.complete(),So)),!n.closed&&t.subscribe(n)})}function tn(e,t,n){let r=U(e)||t||n?{next:e,error:t,complete:n}:e;return r?Z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}var rd;function ka(){return rd}function nn(e){let t=rd;return rd=e,t}var qg=Symbol("NotFound");function bi(e){return e===qg||e?.name==="\u0275NotFound"}var Va="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",R=class extends Error{code;constructor(t,n){super(zn(t,n)),this.code=t}};function GD(e){return`NG0${Math.abs(e)}`}function zn(e,t){return`${GD(e)}${t?": "+t:""}`}var Oo=globalThis;function J(e){for(let t in e)if(e[t]===J)return t;throw Error("")}function Yg(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function An(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(An).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ua(e,t){return e?t?`${e} ${t}`:e:t||""}var zD=J({__forward_ref__:J});function Lt(e){return e.__forward_ref__=Lt,e.toString=function(){return An(this())},e}function Ge(e){return yd(e)?e():e}function yd(e){return typeof e=="function"&&e.hasOwnProperty(zD)&&e.__forward_ref__===Lt}function A(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function jt(e){return{providers:e.providers||[],imports:e.imports||[]}}function ko(e){return WD(e,Ba)}function _d(e){return ko(e)!==null}function WD(e,t){return e.hasOwnProperty(t)&&e[t]||null}function KD(e){let t=e?.[Ba]??null;return t||null}function od(e){return e&&e.hasOwnProperty(Fa)?e[Fa]:null}var Ba=J({\u0275prov:J}),Fa=J({\u0275inj:J}),M=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=A({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wd(e){return e&&!!e.\u0275providers}var Ed=J({\u0275cmp:J}),Dd=J({\u0275dir:J}),bd=J({\u0275pipe:J}),Cd=J({\u0275mod:J}),Mo=J({\u0275fac:J}),Cr=J({__NG_ELEMENT_ID__:J}),Gg=J({__NG_ENV_ID__:J});function Sd(e){return $a(e,"@NgModule"),e[Cd]||null}function Mn(e){return $a(e,"@Component"),e[Ed]||null}function Id(e){return $a(e,"@Directive"),e[Dd]||null}function Zg(e){return $a(e,"@Pipe"),e[bd]||null}function $a(e,t){if(e==null)throw new R(-919,!1)}function Ha(e){return typeof e=="string"?e:e==null?"":String(e)}var Qg=J({ngErrorCode:J}),YD=J({ngErrorMessage:J}),ZD=J({ngTokenPath:J});function Td(e,t){return Jg("",-200,t)}function qa(e,t){throw new R(-201,!1)}function Jg(e,t,n){let r=new R(t,e);return r[Qg]=t,r[YD]=e,n&&(r[ZD]=n),r}function QD(e){return e[Qg]}var sd;function Xg(){return sd}function tt(e){let t=sd;return sd=e,t}function Ad(e,t,n){let r=ko(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;qa(e,"")}var JD={},_r=JD,XD="__NG_DI_FLAG__",ad=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=wr(n)||0;try{return this.injector.get(t,r&8?null:_r,r)}catch(i){if(bi(i))return i;throw i}}};function eb(e,t=0){let n=ka();if(n===void 0)throw new R(-203,!1);if(n===null)return Ad(e,void 0,t);{let r=tb(t),i=n.retrieve(e,r);if(bi(i)){if(r.optional)return null;throw i}return i}}function F(e,t=0){return(Xg()||eb)(Ge(e),t)}function _(e,t){return F(e,wr(t))}function wr(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function tb(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function cd(e){let t=[];for(let n=0;n<e.length;n++){let r=Ge(e[n]);if(Array.isArray(r)){if(r.length===0)throw new R(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=nb(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(F(i,o))}else t.push(F(r))}return t}function nb(e){return e[XD]}function qn(e,t){let n=e.hasOwnProperty(Mo);return n?e[Mo]:null}function em(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function tm(e){return e.flat(Number.POSITIVE_INFINITY)}function Ga(e,t){e.forEach(n=>Array.isArray(n)?Ga(n,t):t(n))}function Md(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Po(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function nm(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function za(e,t,n){let r=Si(e,t);return r>=0?e[r|1]=n:(r=~r,nm(e,r,t,n)),r}function Wa(e,t){let n=Si(e,t);if(n>=0)return e[n|1]}function Si(e,t){return rb(e,t,1)}function rb(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Wn={},nt=[],Sr=new M(""),Rd=new M("",-1),xd=new M(""),Ro=class{get(t,n=_r){if(n===_r){let i=Jg("",-201);throw i.name="\u0275NotFound",i}return n}};function Ir(e){return{\u0275providers:e}}function rm(e){return Ir([{provide:Sr,multi:!0,useValue:e}])}function im(...e){return{\u0275providers:Nd(!0,e),\u0275fromNgModule:!0}}function Nd(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ga(t,s=>{let a=s;La(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&om(i,o),n}function om(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Od(i,o=>{t(o,r)})}}function La(e,t,n,r){if(e=Ge(e),!e)return!1;let i=null,o=od(e),s=!o&&Mn(e);if(!o&&!s){let c=e.ngModule;if(o=od(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)La(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;Ga(o.imports,u=>{La(u,t,n,r)&&(l||=[],l.push(u))}),l!==void 0&&om(l,t)}if(!a){let l=qn(i)||(()=>new i);t({provide:i,useFactory:l,deps:nt},i),t({provide:xd,useValue:i,multi:!0},i),t({provide:Sr,useValue:()=>F(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;Od(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function Od(e,t){for(let n of e)wd(n)&&(n=n.\u0275providers),Array.isArray(n)?Od(n,t):t(n)}var ib=J({provide:String,useValue:J});function sm(e){return e!==null&&typeof e=="object"&&ib in e}function ob(e){return!!(e&&e.useExisting)}function sb(e){return!!(e&&e.useFactory)}function Er(e){return typeof e=="function"}function am(e){return!!e.useClass}var Fo=new M(""),Pa={},zg={},id;function Lo(){return id===void 0&&(id=new Ro),id}var Se=class{},Dr=class extends Se{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,ud(t,s=>this.processProvider(s)),this.records.set(Rd,Ci(void 0,this)),i.has("environment")&&this.records.set(Se,Ci(void 0,this));let o=this.records.get(Fo);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xd,nt,{self:!0}))}retrieve(t,n){let r=wr(n)||0;try{return this.get(t,_r,r)}catch(i){if(bi(i))return i;throw i}}destroy(){Ao(this),this._destroyed=!0;let t=k(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),k(t)}}onDestroy(t){return Ao(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Ao(this);let n=nn(this),r=tt(void 0),i;try{return t()}finally{nn(n),tt(r)}}get(t,n=_r,r){if(Ao(this),t.hasOwnProperty(Gg))return t[Gg](this);let i=wr(r),o,s=nn(this),a=tt(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=db(t)&&ko(t);u&&this.injectableDefInScope(u)?l=Ci(ld(t),Pa):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?Lo():this.parent;return n=i&8&&n===_r?null:n,c.get(t,n)}catch(c){let l=QD(c);throw l===-200||l===-201?new R(l,null):c}finally{tt(a),nn(s)}}resolveInjectorInitializers(){let t=k(null),n=nn(this),r=tt(void 0),i;try{let o=this.get(Sr,nt,{self:!0});for(let s of o)s()}finally{nn(n),tt(r),k(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(An(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ge(t);let n=Er(t)?t:Ge(t&&t.provide),r=cb(t);if(!Er(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Ci(void 0,Pa,!0),i.factory=()=>cd(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=k(null);try{if(n.value===zg)throw Td(An(t));return n.value===Pa&&(n.value=zg,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&ub(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{k(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ge(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ld(e){let t=ko(e),n=t!==null?t.factory:qn(e);if(n!==null)return n;if(e instanceof M)throw new R(204,!1);if(e instanceof Function)return ab(e);throw new R(204,!1)}function ab(e){if(e.length>0)throw new R(204,!1);let n=KD(e);return n!==null?()=>n.factory(e):()=>new e}function cb(e){if(sm(e))return Ci(void 0,e.useValue);{let t=kd(e);return Ci(t,Pa)}}function kd(e,t,n){let r;if(Er(e)){let i=Ge(e);return qn(i)||ld(i)}else if(sm(e))r=()=>Ge(e.useValue);else if(sb(e))r=()=>e.useFactory(...cd(e.deps||[]));else if(ob(e))r=(i,o)=>F(Ge(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ge(e&&(e.useClass||e.provide));if(lb(e))r=()=>new i(...cd(e.deps));else return qn(i)||ld(i)}return r}function Ao(e){if(e.destroyed)throw new R(205,!1)}function Ci(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function lb(e){return!!e.deps}function ub(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function db(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function ud(e,t){for(let n of e)Array.isArray(n)?ud(n,t):n&&wd(n)?ud(n.\u0275providers,t):t(n)}function ze(e,t){let n;e instanceof Dr?(Ao(e),n=e):n=new ad(e);let r,i=nn(n),o=tt(void 0);try{return t()}finally{nn(i),tt(o)}}function cm(){return Xg()!==void 0||ka()!=null}var Vt=0,O=1,j=2,Pe=3,yt=4,_t=5,Ii=6,Ti=7,Ie=8,Rn=9,on=10,ie=11,Ai=12,Pd=13,Tr=14,lt=15,Kn=16,Ar=17,sn=18,xn=19,Fd=20,Tn=21,Ka=22,jo=23,ut=24,Mr=25,Rr=26,Fe=27,lm=1,Ld=6,Yn=7,Vo=8,xr=9,_e=10;function an(e){return Array.isArray(e)&&typeof e[lm]=="object"}function Ut(e){return Array.isArray(e)&&e[lm]===!0}function jd(e){return(e.flags&4)!==0}function Zn(e){return e.componentOffset>-1}function Ya(e){return(e.flags&1)===1}function cn(e){return!!e.template}function Mi(e){return(e[j]&512)!==0}function Nr(e){return(e[j]&256)===256}var Vd="svg",um="math";function wt(e){for(;Array.isArray(e);)e=e[Vt];return e}function Ud(e,t){return wt(t[e])}function Bt(e,t){return wt(t[e.index])}function Uo(e,t){return e.data[t]}function dm(e,t){return e[t]}function Bd(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function Et(e,t){let n=t[e];return an(n)?n:n[Vt]}function fm(e){return(e[j]&4)===4}function Za(e){return(e[j]&128)===128}function hm(e){return Ut(e[Pe])}function ln(e,t){return t==null?null:e[t]}function $d(e){e[Ar]=0}function Hd(e){e[j]&1024||(e[j]|=1024,Za(e)&&Ri(e))}function pm(e,t){for(;e>0;)t=t[Tr],e--;return t}function Bo(e){return!!(e[j]&9216||e[ut]?.dirty)}function Qa(e){e[on].changeDetectionScheduler?.notify(8),e[j]&64&&(e[j]|=1024),Bo(e)&&Ri(e)}function Ri(e){e[on].changeDetectionScheduler?.notify(0);let t=Gn(e);for(;t!==null&&!(t[j]&8192||(t[j]|=8192,!Za(t)));)t=Gn(t)}function qd(e,t){if(Nr(e))throw new R(911,!1);e[Tn]===null&&(e[Tn]=[]),e[Tn].push(t)}function gm(e,t){if(e[Tn]===null)return;let n=e[Tn].indexOf(t);n!==-1&&e[Tn].splice(n,1)}function Gn(e){let t=e[Pe];return Ut(t)?t[Pe]:t}function Gd(e){return e[Ti]??=[]}function zd(e){return e.cleanup??=[]}function mm(e,t,n,r){let i=Gd(t);i.push(n),e.firstCreatePass&&zd(e).push(r,i.length-1)}var H={lFrame:Rm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dd=!1;function vm(){return H.lFrame.elementDepthCount}function ym(){H.lFrame.elementDepthCount++}function Wd(){H.lFrame.elementDepthCount--}function _m(){return H.bindingsEnabled}function wm(){return H.skipHydrationRootTNode!==null}function Kd(e){return H.skipHydrationRootTNode===e}function Yd(){H.skipHydrationRootTNode=null}function $(){return H.lFrame.lView}function Me(){return H.lFrame.tView}function ne(e){return H.lFrame.contextLView=e,e[Ie]}function re(e){return H.lFrame.contextLView=null,e}function Ue(){let e=Zd();for(;e!==null&&e.type===64;)e=e.parent;return e}function Zd(){return H.lFrame.currentTNode}function Em(){let e=H.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function xi(e,t){let n=H.lFrame;n.currentTNode=e,n.isParent=t}function Qd(){return H.lFrame.isParent}function Dm(){H.lFrame.isParent=!1}function Jd(){return dd}function Xd(e){let t=dd;return dd=e,t}function bm(){let e=H.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Cm(e){return H.lFrame.bindingIndex=e}function Or(){return H.lFrame.bindingIndex++}function ef(e){let t=H.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Sm(){return H.lFrame.inI18n}function Im(e,t){let n=H.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ja(t)}function Tm(){return H.lFrame.currentDirectiveIndex}function Ja(e){H.lFrame.currentDirectiveIndex=e}function Am(e){let t=H.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function tf(){return H.lFrame.currentQueryIndex}function Xa(e){H.lFrame.currentQueryIndex=e}function fb(e){let t=e[O];return t.type===2?t.declTNode:t.type===1?e[_t]:null}function nf(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=fb(o),i===null||(o=o[Tr],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=H.lFrame=Mm();return r.currentTNode=t,r.lView=e,!0}function ec(e){let t=Mm(),n=e[O];H.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Mm(){let e=H.lFrame,t=e===null?null:e.child;return t===null?Rm(e):t}function Rm(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function xm(){let e=H.lFrame;return H.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var rf=xm;function tc(){let e=xm();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Nm(e){return(H.lFrame.contextLView=pm(e,H.lFrame.contextLView))[Ie]}function Nn(){return H.lFrame.selectedIndex}function Qn(e){H.lFrame.selectedIndex=e}function nc(){let e=H.lFrame;return Uo(e.tView,e.selectedIndex)}function rc(){H.lFrame.currentNamespace=Vd}function ic(){hb()}function hb(){H.lFrame.currentNamespace=null}function Om(){return H.lFrame.currentNamespace}var km=!0;function oc(){return km}function sc(e){km=e}function fd(e,t=null,n=null,r){let i=of(e,t,n,r);return i.resolveInjectorInitializers(),i}function of(e,t=null,n=null,r,i=new Set){let o=[n||nt,im(e)];return r=r||(typeof e=="object"?void 0:An(e)),new Dr(o,t||Lo(),r||null,i)}var st=class e{static THROW_IF_NOT_FOUND=_r;static NULL=new Ro;static create(t,n){if(Array.isArray(t))return fd({name:""},n,t,"");{let r=t.name??"";return fd({name:r},t.parent,t.providers,r)}}static \u0275prov=A({token:e,providedIn:"any",factory:()=>F(Rd)});static __NG_ELEMENT_ID__=-1},we=new M(""),Dt=(()=>{class e{static __NG_ELEMENT_ID__=pb;static __NG_ENV_ID__=n=>n}return e})(),hd=class extends Dt{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Nr(this._lView)}onDestroy(t){let n=this._lView;return qd(n,t),()=>gm(n,t)}};function pb(){return new hd($())}var Pm=!1,Fm=new M(""),Jn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ce(!1);debugTaskTracker=_(Fm,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new G(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=A({token:e,providedIn:"root",factory:()=>new e})}return e})(),pd=class extends Te{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,cm()&&(this.destroyRef=_(Dt,{optional:!0})??void 0,this.pendingTasks=_(Jn,{optional:!0})??void 0)}emit(t){let n=k(null);try{super.next(t)}finally{k(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof $e&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ue=pd;function ja(...e){}function sf(e){let t,n;function r(){e=ja;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Lm(e){return queueMicrotask(()=>e()),()=>{e=ja}}var af="isAngularZone",xo=af+"_ID",gb=0,rt=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ue(!1);onMicrotaskEmpty=new ue(!1);onStable=new ue(!1);onError=new ue(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Pm}=t;if(typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,yb(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(af)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new R(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,mb,ja,ja);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},mb={};function cf(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function vb(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){sf(()=>{e.callbackScheduled=!1,gd(e),e.isCheckStableRunning=!0,cf(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),gd(e)}function yb(e){let t=()=>{vb(e)},n=gb++;e._inner=e._inner.fork({name:"angular",properties:{[af]:!0,[xo]:n,[xo+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(_b(c))return r.invokeTask(o,s,a,c);try{return Wg(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Kg(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return Wg(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!wb(c)&&t(),Kg(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,gd(e),cf(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function gd(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Wg(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Kg(e){e._nesting--,cf(e)}var No=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ue;onMicrotaskEmpty=new ue;onStable=new ue;onError=new ue;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function _b(e){return jm(e,"__ignore_ng_zone__")}function wb(e){return jm(e,"__scheduler_tick__")}function jm(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var rn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},dt=new M("",{factory:()=>{let e=_(rt),t=_(Se),n;return r=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw r}):(n??=t.get(rn),n.handleError(r))})}}}),Vm={provide:Sr,useValue:()=>{let e=_(rn,{optional:!0})},multi:!0},Eb=new M("",{factory:()=>{let e=_(we).defaultView;if(!e)return;let t=_(dt),n=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),_(Dt).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function lf(){return Ir([rm(()=>{_(Eb)})])}function bt(e,t){let[n,r,i]=Hu(e,t?.equal),o=n,s=o[et];return o.set=r,o.update=i,o.asReadonly=Um.bind(o),o}function Um(){let e=this[et];if(e.readonlyFn===void 0){let t=()=>this();t[et]=e,e.readonlyFn=t}return e.readonlyFn}var ac=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Db}return e})();function Db(){return new ac($(),Ue())}var br=class{},$o=new M("",{factory:()=>!0});var uf=new M("");var df=(()=>{class e{static \u0275prov=A({token:e,providedIn:"root",factory:()=>new md})}return e})(),md=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},vd=class{[et];constructor(t){this[et]=t}destroy(){this[et].destroy()}};function he(e){return qu(e)}function Qo(e){return{toString:e}.toString()}function Mb(e){return typeof e=="function"}function pv(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var gc=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},fn=(()=>{let e=()=>gv;return e.ngInherit=!0,e})();function gv(e){return e.type.prototype.ngOnChanges&&(e.setInput=xb),Rb}function Rb(){let e=vv(this),t=e?.current;if(t){let n=e.previous;if(n===Wn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function xb(e,t,n,r,i){let o=this.declaredInputs[r],s=vv(e)||Nb(e,{previous:Wn,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new gc(l&&l.currentValue,n,c===Wn),pv(e,t,i,n)}var mv="__ngSimpleChanges__";function vv(e){return e[mv]||null}function Nb(e,t){return e[mv]=t}var Bm=[];var X=function(e,t=null,n){for(let r=0;r<Bm.length;r++){let i=Bm[r];i(e,t,n)}},z=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})(z||{});function Ob(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=gv(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function kb(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function uc(e,t,n){yv(e,t,3,n)}function dc(e,t,n,r){(e[j]&3)===n&&yv(e,t,n,r)}function ff(e,t){let n=e[j];(n&3)===t&&(n&=16383,n+=1,e[j]=n)}function yv(e,t,n,r){let i=r!==void 0?e[Ar]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Ar]+=65536),(a<o||o==-1)&&(Pb(e,n,t,c),e[Ar]=(e[Ar]&4294901760)+c+2),c++}function $m(e,t){X(z.LifecycleHookStart,e,t);let n=k(null);try{t.call(e)}finally{k(n),X(z.LifecycleHookEnd,e,t)}}function Pb(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[j]>>14<e[Ar]>>16&&(e[j]&3)===t&&(e[j]+=16384,$m(a,o)):$m(a,o)}var Oi=-1,Pr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Fb(e){return(e.flags&8)!==0}function Lb(e){return(e.flags&16)!==0}function jb(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];Vb(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function _v(e){return e===3||e===4||e===6}function Vb(e){return e.charCodeAt(0)===64}function ki(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Hm(e,n,i,null,t[++r]):Hm(e,n,i,null,null))}}return e}function Hm(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function wv(e){return e!==Oi}function mc(e){return e&32767}function Ub(e){return e>>16}function vc(e,t){let n=Ub(e),r=t;for(;n>0;)r=r[Tr],n--;return r}var Df=!0;function yc(e){let t=Df;return Df=e,t}var Bb=256,Ev=Bb-1,Dv=5,$b=0,un={};function Hb(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Cr)&&(r=n[Cr]),r==null&&(r=n[Cr]=$b++);let i=r&Ev,o=1<<i;t.data[e+(i>>Dv)]|=o}function _c(e,t){let n=bv(e,t);if(n!==-1)return n;let r=t[O];r.firstCreatePass&&(e.injectorIndex=t.length,hf(r.data,e),hf(t,null),hf(r.blueprint,null));let i=Zf(e,t),o=e.injectorIndex;if(wv(i)){let s=mc(i),a=vc(i,t),c=a[O].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function hf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function bv(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Zf(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Av(i),r===null)return Oi;if(n++,i=i[Tr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Oi}function bf(e,t,n){Hb(e,t,n)}function qb(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(_v(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function Cv(e,t,n){if(n&8||e!==void 0)return e;qa(t,"NodeInjector")}function Sv(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[Rn],o=tt(void 0);try{return i?i.get(t,r,n&8):Ad(t,r,n&8)}finally{tt(o)}}return Cv(r,t,n)}function Iv(e,t,n,r=0,i){if(e!==null){if(t[j]&2048&&!(r&2)){let s=Kb(e,t,n,r,un);if(s!==un)return s}let o=Tv(e,t,n,r,un);if(o!==un)return o}return Sv(t,n,r,i)}function Tv(e,t,n,r,i){let o=zb(n);if(typeof o=="function"){if(!nf(t,e,r))return r&1?Cv(i,n,r):Sv(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))qa(n);else return s}finally{rf()}}else if(typeof o=="number"){let s=null,a=bv(e,t),c=Oi,l=r&1?t[lt][_t]:null;for((a===-1||r&4)&&(c=a===-1?Zf(e,t):t[a+8],c===Oi||!Gm(r,!1)?a=-1:(s=t[O],a=mc(c),t=vc(c,t)));a!==-1;){let u=t[O];if(qm(o,a,u.data)){let d=Gb(a,t,n,s,r,l);if(d!==un)return d}c=t[a+8],c!==Oi&&Gm(r,t[O].data[a+8]===l)&&qm(o,a,t)?(s=u,a=mc(c),t=vc(c,t)):a=-1}}return i}function Gb(e,t,n,r,i,o){let s=t[O],a=s.data[e+8],c=r==null?Zn(a)&&Df:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=fc(a,s,n,c,l);return u!==null?Go(t,s,u,a,i):un}function fc(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=s[c];if(f&&cn(f)&&f.type===n)return c}return null}function Go(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof Pr){let a=o;if(a.resolving)throw Td("");let c=yc(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?tt(a.injectImpl):null,h=nf(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&Ob(n,s[n],t)}finally{d!==null&&tt(d),yc(c),a.resolving=!1,rf()}}return o}function zb(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Cr)?e[Cr]:void 0;return typeof t=="number"?t>=0?t&Ev:Wb:t}function qm(e,t,n){let r=1<<e;return!!(n[t+(e>>Dv)]&r)}function Gm(e,t){return!(e&2)&&!(e&1&&t)}var kr=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Iv(this._tNode,this._lView,t,wr(r),n)}};function Wb(){return new kr(Ue(),$())}function On(e){return Qo(()=>{let t=e.prototype.constructor,n=t[Mo]||Cf(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Mo]||Cf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Cf(e){return yd(e)?()=>{let t=Cf(Ge(e));return t&&t()}:qn(e)}function Kb(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[j]&2048&&!Mi(s);){let a=Tv(o,s,n,r|2,un);if(a!==un)return a;let c=o.parent;if(!c){let l=s[Fd];if(l){let u=l.get(n,un,r);if(u!==un)return u}c=Av(s),s=s[Tr]}o=c}return i}function Av(e){let t=e[O],n=t.type;return n===2?t.declTNode:n===1?e[_t]:null}function Jo(e){return qb(Ue(),e)}function Yb(){return ji(Ue(),$())}function ji(e,t){return new it(Bt(e,t))}var it=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Yb}return e})();function Zb(e){return e instanceof it?e.nativeElement:e}function Qb(){return this._results[Symbol.iterator]()}var wc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Te}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=tm(t);(this._changesDetected=!em(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Qb};function Mv(e){return(e.flags&128)===128}var Qf=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Qf||{}),Rv=new Map,Jb=0;function Xb(){return Jb++}function eC(e){Rv.set(e[xn],e)}function Sf(e){Rv.delete(e[xn])}var zm="__ngContext__";function Pi(e,t){an(t)?(e[zm]=t[xn],eC(t)):e[zm]=t}function xv(e){return Ov(e[Ai])}function Nv(e){return Ov(e[yt])}function Ov(e){for(;e!==null&&!Ut(e);)e=e[yt];return e}var tC;function Jf(e){tC=e}var kc=new M("",{factory:()=>nC}),nC="ng";var Pc=new M(""),Xo=new M("",{providedIn:"platform",factory:()=>"unknown"});var Fc=new M("",{factory:()=>_(we).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kv="r";var Pv="di";var Fv=!1,Lv=new M("",{factory:()=>Fv});var Xf=new M("");var rC=(e,t,n,r)=>{};function iC(e,t,n,r){rC(e,t,n,r)}function eh(e){return(e.flags&32)===32}var oC=()=>null;function jv(e,t,n=!1){return oC(e,t,n)}function Vv(e,t){let n=e.contentQueries;if(n!==null){let r=k(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Xa(o),a.contentQueries(2,t[s],s)}}}finally{k(r)}}}function If(e,t,n){Xa(0);let r=k(null);try{t(e,n)}finally{k(r)}}function Uv(e,t,n){if(jd(t)){let r=k(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{k(r)}}}var qt=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(qt||{});var cc;function sC(){if(cc===void 0&&(cc=null,Oo.trustedTypes))try{cc=Oo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return cc}function Wm(e){return sC()?.createScriptURL(e)||e}var Ec=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Va})`}};function Vi(e){return e instanceof Ec?e.changingThisBreaksApplicationSecurity:e}function th(e,t){let n=Bv(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Va})`)}return n===t}function Bv(e){return e instanceof Ec&&e.getTypeName()||null}var aC=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $v(e){return e=String(e),e.match(aC)?e:"unsafe:"+e}function cC(e,t){return e.createText(t)}function lC(e,t,n){e.setValue(t,n)}function Hv(e,t,n){return e.createElement(t,n)}function Dc(e,t,n,r,i){e.insertBefore(t,n,r,i)}function qv(e,t,n){e.appendChild(t,n)}function Km(e,t,n,r,i){r!==null?Dc(e,t,n,r,i):qv(e,t,n)}function Gv(e,t,n,r){e.removeChild(null,t,n,r)}function uC(e,t,n){e.setAttribute(t,"style",n)}function dC(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function zv(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&jb(e,t,r),i!==null&&dC(e,t,i),o!==null&&uC(e,t,o)}var Lc=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(Lc||{});function Wv(e){let t=Yv();return t?t.sanitize(Lc.URL,e)||"":th(e,"URL")?Vi(e):$v(Ha(e))}function Kv(e){let t=Yv();if(t)return Wm(t.sanitize(Lc.RESOURCE_URL,e)||"");if(th(e,"ResourceURL"))return Wm(Vi(e));throw new R(904,!1)}var fC=new Set(["embed","frame","iframe","media","script"]),hC=new Set(["base","link","script"]);function pC(e,t){return t==="src"&&fC.has(e)||t==="href"&&hC.has(e)||t==="xlink:href"&&e==="script"?Kv:Wv}function nh(e,t,n){return pC(t,n)(e)}function Yv(){let e=$();return e&&e[on].sanitizer}function Zv(e){return e instanceof Function?e():e}function gC(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var Qv="ng-template";function mC(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&gC(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(rh(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function rh(e){return e.type===4&&e.value!==Qv}function vC(e,t,n){let r=e.type===4&&!n?Qv:e.value;return t===r}function yC(e,t,n){let r=4,i=e.attrs,o=i!==null?EC(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!$t(r)&&!$t(c))return!1;if(s&&$t(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!vC(e,c,n)||c===""&&t.length===1){if($t(r))return!1;s=!0}}else if(r&8){if(i===null||!mC(e,i,c,n)){if($t(r))return!1;s=!0}}else{let l=t[++a],u=_C(c,i,rh(e),n);if(u===-1){if($t(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if($t(r))return!1;s=!0}}}}return $t(r)||s}function $t(e){return(e&1)===0}function _C(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return DC(t,e)}function wC(e,t,n=!1){for(let r=0;r<t.length;r++)if(yC(e,t[r],n))return!0;return!1}function EC(e){for(let t=0;t<e.length;t++){let n=e[t];if(_v(n))return t}return e.length}function DC(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Ym(e,t){return e?":not("+t.trim()+")":t}function bC(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!$t(s)&&(t+=Ym(o,i),i=""),r=s,o=o||!$t(r);n++}return i!==""&&(t+=Ym(o,i)),t}function CC(e){return e.map(bC).join(",")}function SC(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!$t(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var Ct={};function ih(e,t,n,r,i,o,s,a,c,l,u){let d=Fe+r,h=d+i,f=IC(d,h),p=typeof l=="function"?l():l;return f[O]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function IC(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ct);return n}function TC(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=ih(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function oh(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Vt]=i,d[j]=r|4|128|8|64|1024,(l!==null||e&&e[j]&2048)&&(d[j]|=2048),$d(d),d[Pe]=d[Tr]=e,d[Ie]=n,d[on]=s||e&&e[on],d[ie]=a||e&&e[ie],d[Rn]=c||e&&e[Rn]||null,d[_t]=o,d[xn]=Xb(),d[Ii]=u,d[Fd]=l,d[lt]=t.type==2?e[lt]:d,d}function AC(e,t,n){let r=Bt(t,e),i=TC(n),o=e[on].rendererFactory,s=sh(e,oh(e,i,null,Jv(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function Jv(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Xv(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function sh(e,t){return e[Ai]?e[Pd][yt]=t:e[Ai]=t,e[Pd]=t,t}function w(e=1){ey(Me(),$(),Nn()+e,!1)}function ey(e,t,n,r){if(!r)if((t[j]&3)===3){let o=e.preOrderCheckHooks;o!==null&&uc(t,o,n)}else{let o=e.preOrderHooks;o!==null&&dc(t,o,0,n)}Qn(n)}var jc=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(jc||{});function Tf(e,t,n,r){let i=k(null);try{let[o,s,a]=e.inputs[n],c=null;(s&jc.SignalBased)!==0&&(c=t[o][et]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):pv(t,c,o,r)}finally{k(i)}}var dn=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(dn||{}),MC;function ah(e,t){return MC(e,t)}var Fr=new Set,Vc=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(Vc||{}),Br=new M(""),Zm=new Set;function hn(e){Zm.has(e)||(Zm.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var ch=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=A({token:e,providedIn:"root",factory:()=>new e})}return e})(),ty=[0,1,2,3],ny=(()=>{class e{ngZone=_(rt);scheduler=_(br);errorHandler=_(rn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){_(Br,{optional:!0})}execute(){let n=this.sequences.size>0;n&&X(z.AfterRenderHooksStart),this.executing=!0;for(let r of ty)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&X(z.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[Mr]??=[]).push(n),Ri(r),r[j]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Vc.AFTER_NEXT_RENDER,n):n()}static \u0275prov=A({token:e,providedIn:"root",factory:()=>new e})}return e})(),bc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Mr];t&&(this.view[Mr]=t.filter(n=>n!==this))}};function Ui(e,t){let n=t?.injector??_(st);return hn("NgAfterNextRender"),xC(e,n,t,!0)}function RC(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function xC(e,t,n,r){let i=t.get(ch);i.impl??=t.get(ny);let o=t.get(Br,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(Dt):null,a=t.get(ac,null,{optional:!0}),c=new bc(i.impl,RC(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var ry=new M("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:_(Se)})});function iy(e,t,n){let r=e.get(ry);if(Array.isArray(t))for(let i of t)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function NC(e,t){let n=e.get(ry);if(t.detachedLeaveAnimationFns){for(let r of t.detachedLeaveAnimationFns)n.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}function OC(e,t){for(let[n,r]of t)iy(e,r.animateFns)}function Qm(e,t,n,r){let i=e?.[Rr]?.enter;t!==null&&i&&i.has(n.index)&&OC(r,i)}function Ni(e,t,n,r,i,o,s,a){if(i!=null){let c,l=!1;Ut(i)?c=i:an(i)&&(l=!0,i=i[Vt]);let u=wt(i);e===0&&r!==null?(Qm(a,r,o,n),s==null?qv(t,r,u):Dc(t,r,u,s||null,!0)):e===1&&r!==null?(Qm(a,r,o,n),Dc(t,r,u,s||null,!0)):e===2?Jm(a,o,n,d=>{Gv(t,u,l,d)}):e===3&&Jm(a,o,n,()=>{t.destroyNode(u)}),c!=null&&zC(t,e,n,c,o,r,s)}}function kC(e,t){oy(e,t),t[Vt]=null,t[_t]=null}function PC(e,t,n,r,i,o){r[Vt]=i,r[_t]=t,Bc(e,r,n,1,i,o)}function oy(e,t){t[on].changeDetectionScheduler?.notify(9),Bc(e,t,t[ie],2,null,null)}function FC(e){let t=e[Ai];if(!t)return pf(e[O],e);for(;t;){let n=null;if(an(t))n=t[Ai];else{let r=t[_e];r&&(n=r)}if(!n){for(;t&&!t[yt]&&t!==e;)an(t)&&pf(t[O],t),t=t[Pe];t===null&&(t=e),an(t)&&pf(t[O],t),n=t&&t[yt]}t=n}}function lh(e,t){let n=e[xr],r=n.indexOf(t);n.splice(r,1)}function Uc(e,t){if(Nr(t))return;let n=t[ie];n.destroyNode&&Bc(e,t,n,3,null,null),FC(t)}function pf(e,t){if(Nr(t))return;let n=k(null);try{t[j]&=-129,t[j]|=256,t[ut]&&Do(t[ut]),VC(e,t),jC(e,t),t[O].type===1&&t[ie].destroy();let r=t[Kn];if(r!==null&&Ut(t[Pe])){r!==t[Pe]&&lh(r,t);let i=t[sn];i!==null&&i.detachView(e)}Sf(t)}finally{k(n)}}function Jm(e,t,n,r){let i=e?.[Rr];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);e&&Fr.add(e[xn]),iy(n,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),LC(e,r)}else e&&Fr.delete(e[xn]),r(!1)},i)}function LC(e,t){let n=e[Rr]?.running;if(n){n.then(()=>{e[Rr].running=void 0,Fr.delete(e[xn]),t(!0)});return}t(!1)}function jC(e,t){let n=e.cleanup,r=t[Ti];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Ti]=null);let i=t[Tn];if(i!==null){t[Tn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[jo];if(o!==null){t[jo]=null;for(let s of o)s.destroy()}}function VC(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Pr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];X(z.LifecycleHookStart,a,c);try{c.call(a)}finally{X(z.LifecycleHookEnd,a,c)}}else{X(z.LifecycleHookStart,i,o);try{o.call(i)}finally{X(z.LifecycleHookEnd,i,o)}}}}}function UC(e,t,n){return BC(e,t.parent,n)}function BC(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Vt];if(Zn(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===qt.None||i===qt.Emulated)return null}return Bt(r,n)}function $C(e,t,n){return qC(e,t,n)}function HC(e,t,n){return e.type&40?Bt(e,n):null}var qC=HC,Xm;function uh(e,t,n,r){let i=UC(e,r,t),o=t[ie],s=r.parent||t[_t],a=$C(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Km(o,i,n[c],a,!1);else Km(o,i,n,a,!1);Xm!==void 0&&Xm(o,r,t,n,i)}function Ho(e,t){if(t!==null){let n=t.type;if(n&3)return Bt(t,e);if(n&4)return Af(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Ho(e,r);{let i=e[t.index];return Ut(i)?Af(-1,i):wt(i)}}else{if(n&128)return Ho(e,t.next);if(n&32)return ah(t,e)()||wt(e[t.index]);{let r=sy(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Gn(e[lt]);return Ho(i,r)}else return Ho(e,t.next)}}}return null}function sy(e,t){if(t!==null){let r=e[lt][_t],i=t.projection;return r.projection[i]}return null}function Af(e,t){let n=_e+e+1;if(n<t.length){let r=t[n],i=r[O].firstChild;if(i!==null)return Ho(r,i)}return t[Yn]}function dh(e,t,n,r,i,o,s){for(;n!=null;){let a=r[Rn];if(n.type===128){n=n.next;continue}let c=r[n.index],l=n.type;if(s&&t===0&&(c&&Pi(wt(c),r),n.flags|=2),!eh(n))if(l&8)dh(e,t,n.child,r,i,o,!1),Ni(t,e,a,i,c,n,o,r);else if(l&32){let u=ah(n,r),d;for(;d=u();)Ni(t,e,a,i,d,n,o,r);Ni(t,e,a,i,c,n,o,r)}else l&16?GC(e,t,r,n,i,o):Ni(t,e,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Bc(e,t,n,r,i,o){dh(n,r,e.firstChild,t,i,o,!1)}function GC(e,t,n,r,i,o){let s=n[lt],c=s[_t].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ni(t,e,n[Rn],i,u,r,o,n)}else{let l=c,u=s[Pe];Mv(r)&&(l.flags|=128),dh(e,t,l,u,i,o,!0)}}function zC(e,t,n,r,i,o,s){let a=r[Yn],c=wt(r);a!==c&&Ni(t,e,n,o,a,i,s);for(let l=_e;l<r.length;l++){let u=r[l];Bc(u[O],u,e,t,o,a)}}function WC(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:dn.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=dn.Important),e.setStyle(n,r,i,o))}}function ay(e,t,n,r,i){let o=Nn(),s=r&2;try{Qn(-1),s&&t.length>Fe&&ey(e,t,Fe,!1);let a=s?z.TemplateUpdateStart:z.TemplateCreateStart;X(a,i,n),n(r,i)}finally{Qn(o);let a=s?z.TemplateUpdateEnd:z.TemplateCreateEnd;X(a,i,n)}}function cy(e,t,n){e0(e,t,n),(n.flags&64)===64&&t0(e,t,n)}function fh(e,t,n=Bt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function KC(e,t,n,r){let o=r.get(Lv,Fv)||n===qt.ShadowDom||n===qt.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,o);return YC(s),s}function YC(e){ZC(e)}var ZC=()=>null;function QC(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function ly(e,t,n,r,i,o){let s=t[O];if(hh(e,s,t,n,r)){Zn(e)&&XC(t,e.index);return}e.type&3&&(n=QC(n)),JC(e,t,n,r,i,o)}function JC(e,t,n,r,i,o){if(e.type&3){let s=Bt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function XC(e,t){let n=Et(t,e);n[j]&16||(n[j]|=64)}function e0(e,t,n){let r=n.directiveStart,i=n.directiveEnd;Zn(n)&&AC(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||_c(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=Go(t,e,s,n);if(Pi(c,t),o!==null&&s0(t,s-r,c,a,n,o),cn(a)){let l=Et(n.index,t);l[Ie]=Go(t,e,s,n)}}}function t0(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Tm();try{Qn(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];Ja(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&n0(c,l)}}finally{Qn(-1),Ja(s)}}function n0(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function r0(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];wC(t,o.selectors,!1)&&(r??=[],cn(o)?r.unshift(o):r.push(o))}return r}function i0(e,t,n,r,i,o){let s=Bt(e,t);o0(t[ie],s,o,e.value,n,r,i)}function o0(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?Ha(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function s0(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Tf(r,n,c,l)}}function uy(e,t,n,r,i){let o=Fe+n,s=t[O],a=i(s,t,e,r,n);t[o]=a,xi(e,!0);let c=e.type===2;return c?(zv(t[ie],a,e),(vm()===0||Ya(e))&&Pi(a,t),ym()):Pi(a,t),oc()&&(!c||!eh(e))&&uh(s,t,a,e),e}function dy(e){let t=e;return Qd()?Dm():(t=t.parent,xi(t,!1)),t}function a0(e,t){let n=e[Rn];if(!n)return;let r;try{r=n.get(dt,null)}catch{r=null}r?.(t)}function hh(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];Tf(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];Tf(u,l,r,i),a=!0}return a}function c0(e,t){let n=Et(t,e),r=n[O];l0(r,n);let i=n[Vt];i!==null&&n[Ii]===null&&(n[Ii]=jv(i,n[Rn])),X(z.ComponentStart);try{ph(r,n,n[Ie])}finally{X(z.ComponentEnd,n[Ie])}}function l0(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function ph(e,t,n){ec(t);try{let r=e.viewQuery;r!==null&&If(1,r,n);let i=e.template;i!==null&&ay(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[sn]?.finishViewCreation(e),e.staticContentQueries&&Vv(e,t),e.staticViewQueries&&If(2,e.viewQuery,n);let o=e.components;o!==null&&u0(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[j]&=-5,tc()}}function u0(e,t){for(let n=0;n<t.length;n++)c0(e,t[n])}function $c(e,t,n,r){let i=k(null);try{let o=t.tView,a=e[j]&4096?4096:16,c=oh(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Kn]=l;let u=e[sn];return u!==null&&(c[sn]=u.createEmbeddedView(o)),ph(o,c,n),c}finally{k(i)}}function zo(e,t){return!t||t.firstChild===null||Mv(e)}function Wo(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(wt(o)),Ut(o)&&fy(o,r);let s=n.type;if(s&8)Wo(e,t,n.child,r);else if(s&32){let a=ah(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=sy(t,n);if(Array.isArray(a))r.push(...a);else{let c=Gn(t[lt]);Wo(c[O],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function fy(e,t){for(let n=_e;n<e.length;n++){let r=e[n],i=r[O].firstChild;i!==null&&Wo(r[O],r,i,t)}e[Yn]!==e[Vt]&&t.push(e[Yn])}function hy(e){if(e[Mr]!==null){for(let t of e[Mr])t.impl.addSequence(t);e[Mr].length=0}}var py=[];function d0(e){return e[ut]??f0(e)}function f0(e){let t=py.pop()??Object.create(p0);return t.lView=e,t}function h0(e){e.lView[ut]!==e&&(e.lView=null,py.push(e))}var p0=q(b({},_o),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Ri(e.lView)},consumerOnSignalRead(){this.lView[ut]=this}});function g0(e){let t=e[ut]??Object.create(m0);return t.lView=e,t}var m0=q(b({},_o),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Gn(e.lView);for(;t&&!gy(t[O]);)t=Gn(t);t&&Hd(t)},consumerOnSignalRead(){this.lView[ut]=this}});function gy(e){return e.type!==2}function my(e){if(e[jo]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[jo])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[j]&8192)}}var v0=100;function vy(e,t=0){let r=e[on].rendererFactory,i=!1;i||r.begin?.();try{y0(e,t)}finally{i||r.end?.()}}function y0(e,t){let n=Jd();try{Xd(!0),Mf(e,t);let r=0;for(;Bo(e);){if(r===v0)throw new R(103,!1);r++,Mf(e,1)}}finally{Xd(n)}}function _0(e,t,n,r){if(Nr(t))return;let i=t[j],o=!1,s=!1;ec(t);let a=!0,c=null,l=null;o||(gy(e)?(l=d0(t),c=Eo(l)):ia()===null?(a=!1,l=g0(t),c=Eo(l)):t[ut]&&(Do(t[ut]),t[ut]=null));try{$d(t),Cm(e.bindingStartIndex),n!==null&&ay(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let f=e.preOrderCheckHooks;f!==null&&uc(t,f,null)}else{let f=e.preOrderHooks;f!==null&&dc(t,f,0,null),ff(t,0)}if(s||w0(t),my(t),yy(t,0),e.contentQueries!==null&&Vv(e,t),!o)if(u){let f=e.contentCheckHooks;f!==null&&uc(t,f)}else{let f=e.contentHooks;f!==null&&dc(t,f,1),ff(t,1)}D0(e,t);let d=e.components;d!==null&&wy(t,d,0);let h=e.viewQuery;if(h!==null&&If(2,h,r),!o)if(u){let f=e.viewCheckHooks;f!==null&&uc(t,f)}else{let f=e.viewHooks;f!==null&&dc(t,f,2),ff(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Ka]){for(let f of t[Ka])f();t[Ka]=null}o||(hy(t),t[j]&=-73)}catch(u){throw o||Ri(t),u}finally{l!==null&&(oa(l,c),a&&h0(l)),tc()}}function yy(e,t){for(let n=xv(e);n!==null;n=Nv(n))for(let r=_e;r<n.length;r++){let i=n[r];_y(i,t)}}function w0(e){for(let t=xv(e);t!==null;t=Nv(t)){if(!(t[j]&2))continue;let n=t[xr];for(let r=0;r<n.length;r++){let i=n[r];Hd(i)}}}function E0(e,t,n){X(z.ComponentStart);let r=Et(t,e);try{_y(r,n)}finally{X(z.ComponentEnd,r[Ie])}}function _y(e,t){Za(e)&&Mf(e,t)}function Mf(e,t){let r=e[O],i=e[j],o=e[ut],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&sa(o)),s||=!1,o&&(o.dirty=!1),e[j]&=-9217,s)_0(r,e,r.template,e[Ie]);else if(i&8192){let a=k(null);try{my(e),yy(e,1);let c=r.components;c!==null&&wy(e,c,1),hy(e)}finally{k(a)}}}function wy(e,t,n){for(let r=0;r<t.length;r++)E0(e,t[r],n)}function D0(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Qn(~i);else{let o=i,s=n[++r],a=n[++r];Im(s,o);let c=t[o];X(z.HostBindingsUpdateStart,c);try{a(2,c)}finally{X(z.HostBindingsUpdateEnd,c)}}}}finally{Qn(-1)}}function gh(e,t){let n=Jd()?64:1088;for(e[on].changeDetectionScheduler?.notify(t);e;){e[j]|=n;let r=Gn(e);if(Mi(e)&&!r)return e;e=r}return null}function Ey(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Dy(e,t){let n=_e+t;if(n<e.length)return e[n]}function Hc(e,t,n,r=!0){let i=t[O];if(b0(i,t,e,n),r){let s=Af(n,e),a=t[ie],c=a.parentNode(e[Yn]);c!==null&&PC(i,e[_t],a,t,c,s)}let o=t[Ii];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function by(e,t){let n=Ko(e,t);return n!==void 0&&Uc(n[O],n),n}function Ko(e,t){if(e.length<=_e)return;let n=_e+t,r=e[n];if(r){let i=r[Kn];i!==null&&i!==e&&lh(i,r),t>0&&(e[n-1][yt]=r[yt]);let o=Po(e,_e+t);kC(r[O],r);let s=o[sn];s!==null&&s.detachView(o[O]),r[Pe]=null,r[yt]=null,r[j]&=-129}return r}function b0(e,t,n,r){let i=_e+r,o=n.length;r>0&&(n[i-1][yt]=t),r<o-_e?(t[yt]=n[i],Md(n,_e+r,t)):(n.push(t),t[yt]=null),t[Pe]=n;let s=t[Kn];s!==null&&n!==s&&Cy(s,t);let a=t[sn];a!==null&&a.insertView(e),Qa(t),t[j]|=128}function Cy(e,t){let n=e[xr],r=t[Pe];if(an(r))e[j]|=2;else{let i=r[Pe][lt];t[lt]!==i&&(e[j]|=2)}n===null?e[xr]=[t]:n.push(t)}var Xn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[O];return Wo(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Ie]}set context(t){this._lView[Ie]=t}get destroyed(){return Nr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pe];if(Ut(t)){let n=t[Vo],r=n?n.indexOf(this):-1;r>-1&&(Ko(t,r),Po(n,r))}this._attachedToViewContainer=!1}Uc(this._lView[O],this._lView)}onDestroy(t){qd(this._lView,t)}markForCheck(){gh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[j]&=-129}reattach(){Qa(this._lView),this._lView[j]|=128}detectChanges(){this._lView[j]|=1024,vy(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Mi(this._lView),n=this._lView[Kn];n!==null&&!t&&lh(n,this._lView),oy(this._lView[O],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=t;let n=Mi(this._lView),r=this._lView[Kn];r!==null&&!n&&Cy(r,this._lView),Qa(this._lView)}};var Fi=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=C0;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=$c(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Xn(o)}}return e})();function C0(){return mh(Ue(),$())}function mh(e,t){return e.type&4?new Fi(t,e,ji(e,t)):null}function qc(e,t,n,r,i){let o=e.data[t];if(o===null)o=S0(e,t,n,r,i),Sm()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Em();o.injectorIndex=s===null?-1:s.injectorIndex}return xi(o,!0),o}function S0(e,t,n,r,i){let o=Zd(),s=Qd(),a=s?o:o&&o.parent,c=e.data[t]=T0(e,a,n,t,r,i);return I0(e,c,o,s),c}function I0(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function T0(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return wm()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function A0(e){let t=e[Ld]??[],r=e[Pe][ie],i=[];for(let o of t)o.data[Pv]!==void 0?i.push(o):M0(o,r);e[Ld]=i}function M0(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[kv];for(;n<i;){let o=r.nextSibling;Gv(t,r,!1),r=o,n++}}}var R0=()=>null,x0=()=>null;function Rf(e,t){return R0(e,t)}function Sy(e,t,n){return x0(e,t,n)}var Iy=class{},Gc=class{},xf=class{resolveComponentFactory(t){throw new R(917,!1)}},es=class{static NULL=new xf},Lr=class{},Gt=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>N0()}return e})();function N0(){let e=$(),t=Ue(),n=Et(t.index,e);return(an(n)?n:e)[ie]}var Ty=(()=>{class e{static \u0275prov=A({token:e,providedIn:"root",factory:()=>null})}return e})();var hc={},Nf=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,hc,r);return i!==hc||n===hc?i:this.parentInjector.get(t,n,r)}};function Cc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Ua(i,a);else if(o==2){let c=a,l=t[++s];r=Ua(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function C(e,t=0){let n=$();if(n===null)return F(e,t);let r=Ue();return Iv(r,n,Ge(e),t)}function vh(){let e="invalid";throw new Error(e)}function O0(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}F0(e,t,n,a,o,c,l)}o!==null&&r!==null&&k0(n,r,o)}function k0(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new R(-301,!1);r.push(t[i],o)}}function P0(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function F0(e,t,n,r,i,o,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&cn(f)&&(c=f,P0(e,n,h)),bf(_c(n,t),e,f.type)}$0(n,e.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=Xv(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(n.mergedAttrs=ki(n.mergedAttrs,f.hostAttrs),j0(e,n,t,d,f),B0(d,f,i),s!==null&&s.has(f)){let[y,D]=s.get(f);n.directiveToIndex.set(f.type,[d,y+n.directiveStart,D+n.directiveStart])}else(o===null||!o.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}L0(e,n,o)}function L0(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))ev(0,t,i,r),ev(1,t,i,r),nv(t,r,!1);else{let o=n.get(i);tv(0,t,o,r),tv(1,t,o,r),nv(t,r,!0)}}}function ev(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),Ay(t,o)}}function tv(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ay(t,s)}}function Ay(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function nv(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||rh(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function j0(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=qn(i.type,!0)),s=new Pr(o,cn(i),C,null);e.blueprint[r]=s,n[r]=s,V0(e,t,r,Xv(e,n,i.hostVars,Ct),i)}function V0(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;U0(s)!=a&&s.push(a),s.push(n,r,o)}}function U0(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function B0(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;cn(t)&&(n[""]=e)}}function $0(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function My(e,t,n,r,i,o,s,a){let c=t[O],l=c.consts,u=ln(l,s),d=qc(c,e,n,r,u);return o&&O0(c,t,d,ln(l,a),i),d.mergedAttrs=ki(d.mergedAttrs,d.attrs),d.attrs!==null&&Cc(d,d.attrs,!1),d.mergedAttrs!==null&&Cc(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Ry(e,t){kb(e,t),jd(t)&&e.queries.elementEnd(t)}function H0(e,t,n,r,i,o){let s=t.consts,a=ln(s,i),c=qc(t,e,n,r,a);if(c.mergedAttrs=ki(c.mergedAttrs,c.attrs),o!=null){let l=ln(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Cc(c,c.attrs,!1),c.mergedAttrs!==null&&Cc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function q0(e,t,n){return e[t]=n}function kn(e,t,n){if(n===Ct)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function pc(e,t,n){return function r(i){let o=Zn(e)?Et(e.index,t):t;gh(o,5);let s=t[Ie],a=rv(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=rv(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function rv(e,t,n,r){let i=k(null);try{return X(z.OutputStart,t,n),n(r)!==!1}catch(o){return a0(e,o),!1}finally{X(z.OutputEnd,t,n),k(i)}}function xy(e,t,n,r,i,o,s,a){let c=Ya(e),l=!1,u=null;if(!r&&c&&(u=z0(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Bt(e,n),h=r?r(d):d;iC(n,h,o,a);let f=i.listen(h,o,a);if(!G0(o)){let p=r?y=>r(wt(y[e.index])):e.index;Ny(p,t,n,o,a,f,!1)}}return l}function G0(e){return e.startsWith("animation")||e.startsWith("transition")}function z0(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Ti],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Ny(e,t,n,r,i,o,s){let a=t.firstCreatePass?zd(t):null,c=Gd(n),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function iv(e,t,n,r,i,o){let s=t[n],a=t[O],l=a.data[n].outputs[r],d=s[l].subscribe(o);Ny(e.index,a,t,i,o,d,!0)}var Of=Symbol("BINDING");var Sc=class extends es{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Mn(t);return new jr(n,this.ngModule)}};function W0(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&jc.SignalBased)!==0};return i&&(o.transform=i),o})}function K0(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function Y0(e,t,n){let r=t instanceof Se?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Nf(n,r):n}function Z0(e){let t=e.get(Lr,null);if(t===null)throw new R(407,!1);let n=e.get(Ty,null),r=e.get(br,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Q0(e,t){let n=Oy(e);return Hv(t,n,n==="svg"?Vd:n==="math"?um:null)}function Oy(e){return(e.selectors[0][0]||"div").toLowerCase()}var jr=class extends Gc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=W0(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=K0(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=CC(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){X(z.DynamicComponentStart);let a=k(null);try{let c=this.componentDef,l=J0(r,c,s,o),u=Y0(c,i||this.ngModule,t),d=Z0(u),h=d.rendererFactory.createRenderer(null,c),f=r?KC(h,r,c.encapsulation,u):Q0(c,h),p=s?.some(ov)||o?.some(E=>typeof E!="function"&&E.bindings.some(ov)),y=oh(null,l,null,512|Jv(c),null,null,d,h,u,null,jv(f,u,!0));y[Fe]=f,ec(y);let D=null;try{let E=My(Fe,y,2,"#host",()=>l.directiveRegistry,!0,0);zv(h,f,E),Pi(f,y),cy(l,y,E),Uv(l,E,y),Ry(l,E),n!==void 0&&eS(E,this.ngContentSelectors,n),D=Et(E.index,y),y[Ie]=D[Ie],ph(l,y,null)}catch(E){throw D!==null&&Sf(D),Sf(y),E}finally{X(z.DynamicComponentEnd),tc()}return new Ic(this.componentType,y,!!p)}finally{k(a)}}};function J0(e,t,n,r){let i=e?["ng-version","21.1.2"]:SC(t.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Of].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[Of].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=Id(d);c.push(h)}return ih(0,null,X0(o,s),1,a,c,null,null,null,[i],null)}function X0(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function ov(e){let t=e[Of].kind;return t==="input"||t==="twoWay"}var Ic=class extends Iy{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Uo(n[O],Fe),this.location=ji(this._tNode,n),this.instance=Et(this._tNode.index,n)[Ie],this.hostView=this.changeDetectorRef=new Xn(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=hh(r,i[O],i,t,n);this.previousInputValues.set(t,n);let s=Et(r.index,i);gh(s,1)}get injector(){return new kr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function eS(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var $r=(()=>{class e{static __NG_ELEMENT_ID__=tS}return e})();function tS(){let e=Ue();return Py(e,$())}var nS=$r,ky=class extends nS{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ji(this._hostTNode,this._hostLView)}get injector(){return new kr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Zf(this._hostTNode,this._hostLView);if(wv(t)){let n=vc(t,this._hostLView),r=mc(t),i=n[O].data[r+8];return new kr(i,n)}else return new kr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=sv(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-_e}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Rf(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,zo(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!Mb(t),l;if(c)l=n;else{let D=n||{};l=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef,s=D.directives,a=D.bindings}let u=c?t:new jr(Mn(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let E=(c?d:this.parentInjector).get(Se,null);E&&(o=E)}let h=Mn(u.componentType??{}),f=Rf(this._lContainer,h?.id??null),p=f?.firstChild??null,y=u.create(d,i,p,o,s,a);return this.insertImpl(y.hostView,l,zo(this._hostTNode,f)),y}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(hm(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Pe],l=new ky(c,c[_t],c[Pe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return Hc(s,i,o,r),t.attachToViewContainerRef(),Md(gf(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=sv(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Ko(this._lContainer,n);r&&(Po(gf(this._lContainer),n),Uc(r[O],r))}detach(t){let n=this._adjustIndex(t,-1),r=Ko(this._lContainer,n);return r&&Po(gf(this._lContainer),n)!=null?new Xn(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function sv(e){return e[Vo]}function gf(e){return e[Vo]||(e[Vo]=[])}function Py(e,t){let n,r=t[e.index];return Ut(r)?n=r:(n=Ey(r,t,null,e),t[e.index]=n,sh(t,n)),iS(n,t,e,r),new ky(n,e,t)}function rS(e,t){let n=e[ie],r=n.createComment(""),i=Bt(t,e),o=n.parentNode(i);return Dc(n,o,r,n.nextSibling(i),!1),r}var iS=aS,oS=()=>!1;function sS(e,t,n){return oS(e,t,n)}function aS(e,t,n,r){if(e[Yn])return;let i;n.type&8?i=wt(r):i=rS(t,n),e[Yn]=i}var kf=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Pf=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)yh(t,n).matches!==null&&this.queries[n].setDirty()}},Ff=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=gS(t):this.predicate=t}},Lf=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},jf=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,n,cS(n,o)),this.matchTNodeWithReadOption(t,n,fc(n,t,o,!1,!1))}else r===Fi?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,fc(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===it||i===$r||i===Fi&&n.type&4)this.addMatch(n.index,-2);else{let o=fc(n,t,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function cS(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function lS(e,t){return e.type&11?ji(e,t):e.type&4?mh(e,t):null}function uS(e,t,n,r){return n===-1?lS(t,e):n===-2?dS(e,t,r):Go(e,e[O],n,t)}function dS(e,t,n){if(n===it)return ji(t,e);if(n===Fi)return mh(t,e);if(n===$r)return Py(t,e)}function Fy(e,t,n,r){let i=t[sn].queries[r];if(i.matches===null){let o=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(uS(t,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Vf(e,t,n,r){let i=e.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Fy(e,t,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=t[-c];for(let d=_e;d<u.length;d++){let h=u[d];h[Kn]===h[Pe]&&Vf(h[O],h,l,r)}if(u[xr]!==null){let d=u[xr];for(let h=0;h<d.length;h++){let f=d[h];Vf(f[O],f,l,r)}}}}}return r}function fS(e,t){return e[sn].queries[t].queryList}function hS(e,t,n){let r=new wc((n&4)===4);return mm(e,t,r,r.destroy),(t[sn]??=new Pf).queries.push(new kf(r))-1}function pS(e,t,n,r){let i=Me();if(i.firstCreatePass){let o=Ue();mS(i,new Ff(t,n,r),o.index),vS(i,e),(n&2)===2&&(i.staticContentQueries=!0)}return hS(i,$(),n)}function gS(e){return e.split(",").map(t=>t.trim())}function mS(e,t,n){e.queries===null&&(e.queries=new Lf),e.queries.track(new jf(t,n))}function vS(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function yh(e,t){return e.queries.getByIndex(t)}function yS(e,t){let n=e[O],r=yh(n,t);return r.crossesNgTemplate?Vf(n,e,t,[]):Fy(n,e,r,t)}var Vr=class{},zc=class{};var Tc=class extends Vr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Sc(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Sd(t);this._bootstrapComponents=Zv(o.bootstrap),this._r3Injector=of(t,n,[{provide:Vr,useValue:this},{provide:es,useValue:this.componentFactoryResolver},...r],An(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Ac=class extends zc{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Tc(this.moduleType,t,[])}};var Yo=class extends Vr{injector;componentFactoryResolver=new Sc(this);instance=null;constructor(t){super();let n=new Dr([...t.providers,{provide:Vr,useValue:this},{provide:es,useValue:this.componentFactoryResolver}],t.parent||Lo(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Bi(e,t,n=null){return new Yo({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var _S=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Nd(!1,n.type),i=r.length>0?Bi([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=A({token:e,providedIn:"environment",factory:()=>new e(F(Se))})}return e})();function oe(e){return Qo(()=>{let t=Ly(e),n=q(b({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Qf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(_S).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||qt.Emulated,styles:e.styles||nt,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&hn("NgStandalone"),jy(n);let r=e.dependencies;return n.directiveDefs=av(r,wS),n.pipeDefs=av(r,Zg),n.id=bS(n),n})}function wS(e){return Mn(e)||Id(e)}function pn(e){return Qo(()=>({type:e.type,bootstrap:e.bootstrap||nt,declarations:e.declarations||nt,imports:e.imports||nt,exports:e.exports||nt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function ES(e,t){if(e==null)return Wn;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=jc.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function DS(e){if(e==null)return Wn;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Ee(e){return Qo(()=>{let t=Ly(e);return jy(t),t})}function _h(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function Ly(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Wn,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||nt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:ES(e.inputs,t),outputs:DS(e.outputs),debugInfo:null}}function jy(e){e.features?.forEach(t=>t(e))}function av(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function bS(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function CS(e){return Object.getPrototypeOf(e.prototype).constructor}function St(e){let t=CS(e.type),n=!0,r=[e];for(;t;){let i;if(cn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new R(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=mf(e.inputs),s.declaredInputs=mf(e.declaredInputs),s.outputs=mf(e.outputs);let a=i.hostBindings;a&&MS(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&TS(e,c),l&&AS(e,l),SS(e,i),Yg(e.outputs,i.outputs),cn(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===St&&(n=!1)}}t=Object.getPrototypeOf(t)}IS(r)}function SS(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function IS(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=ki(i.hostAttrs,n=ki(n,i.hostAttrs))}}function mf(e){return e===Wn?{}:e===nt?[]:e}function TS(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function AS(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function MS(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function RS(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=ki(e.mergedAttrs,e.attrs);let u=e.tView=ih(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),xi(e,!1);let c=xS(n,t,e,r);oc()&&uh(n,t,c,e),Pi(c,t);let l=Ey(c,t,c,e);t[r+Fe]=l,sh(t,l),sS(l,e,t)}function Mc(e,t,n,r,i,o,s,a,c,l,u){let d=n+Fe,h;if(t.firstCreatePass){if(h=qc(t,d,4,s||null,a||null),l!=null){let f=ln(t.consts,l);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=t.data[d];return RS(h,e,t,n,r,i,o,c),l!=null&&fh(e,h,u),h}var xS=NS;function NS(e,t,n,r){return sc(!0),t[ie].createComment("")}var wh=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Vy(e){return typeof e=="function"&&e[et]!==void 0}function Eh(e){return Vy(e)&&typeof e.set=="function"}var Dh=new M("");function Pn(e){return!!e&&typeof e.then=="function"}function Wc(e){return!!e&&typeof e.subscribe=="function"}var bh=new M("");function Kc(e){return Ir([{provide:bh,multi:!0,useValue:e}])}var Ch=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=_(bh,{optional:!0})??[];injector=_(st);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ze(this.injector,i);if(Pn(o))n.push(o);else if(Wc(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ts=new M("");function Uy(){$u(()=>{let e="";throw new R(600,e)})}function By(e){return e.isBoundToModule}var OS=10;var er=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=_(dt);afterRenderManager=_(ch);zonelessEnabled=_($o);rootEffectScheduler=_(df);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Te;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=_(Jn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(le(n=>!n))}constructor(){_(Br,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=_(Se);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=st.NULL){return this._injector.get(rt).run(()=>{X(z.BootstrapComponentStart);let s=n instanceof Gc;if(!this._injector.get(Ch).done){let p="";throw new R(405,p)}let c;s?c=n:c=this._injector.get(es).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=By(c)?void 0:this._injector.get(Vr),u=r||c.selector,d=c.create(i,[],u,l),h=d.location.nativeElement,f=d.injector.get(Dh,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),qo(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),X(z.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){X(z.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Vc.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw X(z.ChangeDetectionEnd),new R(101,!1);let n=k(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,k(n),this.afterTick.next(),X(z.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Lr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<OS;){X(z.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{X(z.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Bo(i))continue;let o=r&&!this.zonelessEnabled?0:1;vy(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Bo(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;qo(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(ts,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>qo(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new R(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function qo(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function $i(e,t,n,r){let i=$(),o=Or();if(kn(i,o,t)){let s=Me(),a=nc();i0(a,i,e,t,n,r)}return $i}var BL=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Uf=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,n){this.attach(n,this.detach(t))}};function vf(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function kS(e,t,n,r){let i,o,s=0,a=e.length-1,c=void 0;if(Array.isArray(t)){k(r);let l=t.length-1;for(k(null);s<=a&&s<=l;){let u=e.at(s),d=t[s],h=vf(s,u,s,d,n);if(h!==0){h<0&&e.updateValue(s,d),s++;continue}let f=e.at(a),p=t[l],y=vf(a,f,l,p,n);if(y!==0){y<0&&e.updateValue(a,p),a--,l--;continue}let D=n(s,u),E=n(a,f),L=n(s,d);if(Object.is(L,E)){let I=n(l,p);Object.is(I,D)?(e.swap(s,a),e.updateValue(a,p),l--,a--):e.move(a,s),e.updateValue(s,d),s++;continue}if(i??=new Rc,o??=lv(e,s,a,n),Bf(e,i,s,L))e.updateValue(s,d),s++,a++;else if(o.has(L))i.set(D,e.detach(s)),a--;else{let I=e.create(s,t[s]);e.attach(s,I),s++,a++}}for(;s<=l;)cv(e,i,n,s,t[s]),s++}else if(t!=null){k(r);let l=t[Symbol.iterator]();k(null);let u=l.next();for(;!u.done&&s<=a;){let d=e.at(s),h=u.value,f=vf(s,d,s,h,n);if(f!==0)f<0&&e.updateValue(s,h),s++,u=l.next();else{i??=new Rc,o??=lv(e,s,a,n);let p=n(s,h);if(Bf(e,i,s,p))e.updateValue(s,h),s++,a++,u=l.next();else if(!o.has(p))e.attach(s,e.create(s,h)),s++,a++,u=l.next();else{let y=n(s,d);i.set(y,e.detach(s)),a--}}}for(;!u.done;)cv(e,i,n,e.length,u.value),u=l.next()}for(;s<=a;)e.destroy(e.detach(a--));i?.forEach(l=>{e.destroy(l)})}function Bf(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function cv(e,t,n,r,i){if(Bf(e,t,r,n(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function lv(e,t,n,r){let i=new Set;for(let o=t;o<=n;o++)i.add(r(o,e.at(o)));return i}var Rc=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function pe(e,t,n,r,i,o,s,a){hn("NgControlFlow");let c=$(),l=Me(),u=ln(l.consts,o);return Mc(c,l,e,t,n,r,i,u,256,s,a),Sh}function Sh(e,t,n,r,i,o,s,a){hn("NgControlFlow");let c=$(),l=Me(),u=ln(l.consts,o);return Mc(c,l,e,t,n,r,i,u,512,s,a),Sh}function ge(e,t){hn("NgControlFlow");let n=$(),r=Or(),i=n[r]!==Ct?n[r]:-1,o=i!==-1?xc(n,Fe+i):void 0,s=0;if(kn(n,r,e)){let a=k(null);try{if(o!==void 0&&by(o,s),e!==-1){let c=Fe+e,l=xc(n,c),u=Gf(n[O],c),d=Sy(l,u,n),h=$c(n,u,t,{dehydratedView:d});Hc(l,h,s,zo(u,d))}}finally{k(a)}}else if(o!==void 0){let a=Dy(o,s);a!==void 0&&(a[Ie]=t)}}var $f=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-_e}};function ft(e,t){return t}var Hf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function Re(e,t,n,r,i,o,s,a,c,l,u,d,h){hn("NgControlFlow");let f=$(),p=Me(),y=c!==void 0,D=$(),E=a?s.bind(D[lt][Ie]):s,L=new Hf(y,E);D[Fe+e]=L,Mc(f,p,e+1,t,n,r,i,ln(p.consts,o),256),y&&Mc(f,p,e+2,c,l,u,d,ln(p.consts,h),512)}var qf=class extends Uf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-_e}at(t){return this.getLView(t)[Ie].$implicit}attach(t,n){let r=n[Ii];this.needsIndexUpdate||=t!==this.length,Hc(this.lContainer,n,t,zo(this.templateTNode,r)),PS(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,FS(this.lContainer,t),LS(this.lContainer,t)}create(t,n){let r=Rf(this.lContainer,this.templateTNode.tView.ssrId);return $c(this.hostLView,this.templateTNode,new $f(this.lContainer,n,t),{dehydratedView:r})}destroy(t){Uc(t[O],t)}updateValue(t,n){this.getLView(t)[Ie].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Ie].$index=t}getLView(t){return jS(this.lContainer,t)}};function xe(e){let t=k(null),n=Nn();try{let r=$(),i=r[O],o=r[n],s=n+1,a=xc(r,s);if(o.liveCollection===void 0){let l=Gf(i,s);o.liveCollection=new qf(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(kS(c,e,o.trackByFn,t),c.updateIndexes(),o.hasEmptyBlock){let l=Or(),u=c.length===0;if(kn(r,l,u)){let d=n+2,h=xc(r,d);if(u){let f=Gf(i,d),p=Sy(h,f,r),y=$c(r,f,void 0,{dehydratedView:p});Hc(h,y,0,zo(f,p))}else i.firstUpdatePass&&A0(h),by(h,0)}}}finally{k(t)}}function xc(e,t){return e[t]}function PS(e,t){if(e.length<=_e)return;let n=_e+t,r=e[n],i=r?r[Rr]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Rn];NC(o,i),Fr.delete(r[xn]),i.detachedLeaveAnimationFns=void 0}}function FS(e,t){if(e.length<=_e)return;let n=_e+t,r=e[n],i=r?r[Rr]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function LS(e,t){return Ko(e,t)}function jS(e,t){return Dy(e,t)}function Gf(e,t){return Uo(e,t)}function De(e,t,n){let r=$(),i=Or();if(kn(r,i,t)){let o=Me(),s=nc();ly(s,r,e,t,r[ie],n)}return De}function zf(e,t,n,r,i){hh(t,e,n,i?"class":"style",r)}function g(e,t,n,r){let i=$(),o=i[O],s=e+Fe,a=o.firstCreatePass?My(s,i,2,t,r0,_m(),n,r):o.data[s];if(uy(a,i,e,t,$y),Ya(a)){let c=i[O];cy(c,i,a),Uv(c,a,i)}return r!=null&&fh(i,a),g}function m(){let e=Me(),t=Ue(),n=dy(t);return e.firstCreatePass&&Ry(e,n),Kd(n)&&Yd(),Wd(),n.classesWithoutHost!=null&&Fb(n)&&zf(e,n,$(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Lb(n)&&zf(e,n,$(),n.stylesWithoutHost,!1),m}function Ze(e,t,n,r){return g(e,t,n,r),m(),Ze}function We(e,t,n,r){let i=$(),o=i[O],s=e+Fe,a=o.firstCreatePass?H0(s,o,2,t,n,r):o.data[s];return uy(a,i,e,t,$y),r!=null&&fh(i,a),We}function Qe(){let e=Ue(),t=dy(e);return Kd(t)&&Yd(),Wd(),Qe}function Yc(e,t,n,r){return We(e,t,n,r),Qe(),Yc}var $y=(e,t,n,r,i)=>(sc(!0),Hv(t[ie],r,Om()));function at(){return $()}var ns="en-US";var VS=ns;function Hy(e){typeof e=="string"&&(VS=e.toLowerCase().replace(/_/g,"-"))}function ee(e,t,n){let r=$(),i=Me(),o=Ue();return qy(i,r,r[ie],o,e,t,n),ee}function Zc(e,t,n){let r=$(),i=Me(),o=Ue();return(o.type&3||n)&&xy(o,i,r,n,r[ie],e,t,pc(o,r,t)),Zc}function qy(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=pc(r,t,o),xy(r,e,t,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];c??=pc(r,t,o),iv(r,t,h,f,i,c)}if(l&&l.length)for(let d of l)c??=pc(r,t,o),iv(r,t,d,i,i,c)}}function K(e=1){return Nm(e)}function Qc(e,t,n,r){return pS(e,t,n,r),Qc}function Ih(e){let t=$(),n=Me(),r=tf();Xa(r+1);let i=yh(n,r);if(e.dirty&&fm(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=yS(t,r);e.reset(o,Zb),e.notifyOnChanges()}return!0}return!1}function Th(){return fS($(),tf())}function lc(e,t){return e<<17|t<<2}function Ur(e){return e>>17&32767}function US(e){return(e&2)==2}function BS(e,t){return e&131071|t<<17}function Wf(e){return e|2}function Li(e){return(e&131068)>>2}function yf(e,t){return e&-131069|t<<2}function $S(e){return(e&1)===1}function Kf(e){return e|1}function HS(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Ur(s),c=Li(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Si(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=Ur(e[a+1]);e[r+1]=lc(h,a),h!==0&&(e[h+1]=yf(e[h+1],r)),e[a+1]=BS(e[a+1],r)}else e[r+1]=lc(a,0),a!==0&&(e[a+1]=yf(e[a+1],r)),a=r;else e[r+1]=lc(c,0),a===0?a=r:e[c+1]=yf(e[c+1],r),c=r;l&&(e[r+1]=Wf(e[r+1])),uv(e,u,r,!0),uv(e,u,r,!1),qS(t,u,e,r,o),s=lc(a,c),o?t.classBindings=s:t.styleBindings=s}function qS(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Si(o,t)>=0&&(n[r+1]=Kf(n[r+1]))}function uv(e,t,n,r){let i=e[n+1],o=t===null,s=r?Ur(i):Li(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];GS(c,t)&&(a=!0,e[s+1]=r?Kf(l):Wf(l)),s=r?Ur(l):Li(l)}a&&(e[n+1]=r?Wf(i):Kf(i))}function GS(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Si(e,t)>=0:!1}var Ht={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zS(e){return e.substring(Ht.key,Ht.keyEnd)}function WS(e){return KS(e),Gy(e,zy(e,0,Ht.textEnd))}function Gy(e,t){let n=Ht.textEnd;return n===t?-1:(t=Ht.keyEnd=YS(e,Ht.key=t,n),zy(e,t,n))}function KS(e){Ht.key=0,Ht.keyEnd=0,Ht.value=0,Ht.valueEnd=0,Ht.textEnd=e.length}function zy(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function YS(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function rs(e,t,n){return Wy(e,t,n,!1),rs}function Hr(e,t){return Wy(e,t,null,!0),Hr}function It(e){QS(rI,ZS,e,!0)}function ZS(e,t){for(let n=WS(t);n>=0;n=Gy(t,n))za(e,zS(t),!0)}function Wy(e,t,n,r){let i=$(),o=Me(),s=ef(2);if(o.firstUpdatePass&&Yy(o,e,s,r),t!==Ct&&kn(i,s,t)){let a=o.data[Nn()];Zy(o,a,i,i[ie],e,i[s+1]=oI(t,n),r,s)}}function QS(e,t,n,r){let i=Me(),o=ef(2);i.firstUpdatePass&&Yy(i,null,o,r);let s=$();if(n!==Ct&&kn(s,o,n)){let a=i.data[Nn()];if(Qy(a,r)&&!Ky(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Ua(c,n||"")),zf(i,a,s,n,r)}else iI(i,a,s,s[ie],s[o+1],s[o+1]=nI(e,t,n),r,o)}}function Ky(e,t){return t>=e.expandoStartIndex}function Yy(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Nn()],s=Ky(e,n);Qy(o,r)&&t===null&&!s&&(t=!1),t=JS(i,o,t,r),HS(i,o,t,n,s,r)}}function JS(e,t,n,r){let i=Am(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=_f(null,e,t,n,r),n=Zo(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=_f(i,e,t,n,r),o===null){let c=XS(e,t,r);c!==void 0&&Array.isArray(c)&&(c=_f(null,e,t,c[1],r),c=Zo(c,t.attrs,r),eI(e,t,r,c))}else o=tI(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function XS(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Li(r)!==0)return e[Ur(r)]}function eI(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Ur(i)]=r}function tI(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Zo(r,s,n)}return Zo(r,t.attrs,n)}function _f(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Zo(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Zo(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),za(e,s,n?!0:t[++o]))}return e===void 0?null:e}function nI(e,t,n){if(n==null||n==="")return nt;let r=[],i=Vi(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(i instanceof Set)for(let o of i)e(r,o,!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function rI(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&za(e,r,n)}function iI(e,t,n,r,i,o,s,a){i===Ct&&(i=nt);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=l<o.length?o[l+1]:void 0,p=null,y;u===d?(c+=2,l+=2,h!==f&&(p=d,y=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,y=f),p!==null&&Zy(e,t,n,r,p,y,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}function Zy(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=$S(l)?dv(c,t,n,i,Li(l),s):void 0;if(!Nc(u)){Nc(o)||US(l)&&(o=dv(c,null,n,i,a,s));let d=Ud(Nn(),n);WC(r,s,d,i,o)}}function dv(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Ct&&(h=d?nt:void 0);let f=d?Wa(h,r):u===r?h:void 0;if(l&&!Nc(f)&&(f=Wa(c,r)),Nc(f)&&(a=f,s))return a;let p=e[i+1];i=s?Ur(p):Li(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Wa(c,r))}return a}function Nc(e){return e!==void 0}function oI(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=An(Vi(e)))),e}function Qy(e,t){return(e.flags&(t?8:16))!==0}function v(e,t=""){let n=$(),r=Me(),i=e+Fe,o=r.firstCreatePass?qc(r,i,1,t,null):r.data[i],s=sI(r,n,o,t);n[i]=s,oc()&&uh(r,n,s,o),xi(o,!1)}var sI=(e,t,n,r)=>(sc(!0),cC(t[ie],r));function Jy(e,t,n,r=""){return kn(e,Or(),n)?t+Ha(n)+r:Ct}function x(e){return Fn("",e),x}function Fn(e,t,n){let r=$(),i=Jy(r,e,t,n);return i!==Ct&&aI(r,Nn(),i),Fn}function aI(e,t,n){let r=Ud(t,e);lC(e[ie],r,n)}function de(e,t,n){Eh(t)&&(t=t());let r=$(),i=Or();if(kn(r,i,t)){let o=Me(),s=nc();ly(s,r,e,t,r[ie],n)}return de}function me(e,t){let n=Eh(e);return n&&e.set(t),n}function fe(e,t){let n=$(),r=Me(),i=Ue();return qy(r,n,n[ie],i,e,t),fe}function Ah(e,t,n=""){return Jy($(),e,t,n)}function fv(e,t,n){let r=Me();r.firstCreatePass&&Xy(t,r.data,r.blueprint,cn(e),n)}function Xy(e,t,n,r,i){if(e=Ge(e),Array.isArray(e))for(let o=0;o<e.length;o++)Xy(e[o],t,n,r,i);else{let o=Me(),s=$(),a=Ue(),c=Er(e)?e:Ge(e.provide),l=kd(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Er(e)||!e.multi){let f=new Pr(l,i,C,null),p=Ef(c,t,i?u:u+h,d);p===-1?(bf(_c(a,s),o,c),wf(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=Ef(c,t,u+h,d),p=Ef(c,t,u,u+h),y=f>=0&&n[f],D=p>=0&&n[p];if(i&&!D||!i&&!y){bf(_c(a,s),o,c);let E=uI(i?lI:cI,n.length,i,r,l,e);!i&&D&&(n[p].providerFactory=E),wf(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)}else{let E=e_(n[i?p:f],l,!i&&r);wf(o,e,f>-1?f:p,E)}!i&&r&&D&&n[p].componentProviders++}}}function wf(e,t,n,r){let i=Er(t),o=am(t);if(i||o){let c=(o?Ge(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function e_(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ef(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function cI(e,t,n,r,i){return Yf(this.multi,[])}function lI(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Go(r,r[O],this.providerFactory.index,i);s=c.slice(0,a),Yf(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Yf(o,s);return s}function Yf(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function uI(e,t,n,r,i,o){let s=new Pr(e,n,C,null);return s.multi=[],s.index=t,s.componentProviders=0,e_(s,i,r&&!n),s}function tr(e,t){return n=>{n.providersResolver=(r,i)=>fv(r,i?i(e):e,!1),t&&(n.viewProvidersResolver=(r,i)=>fv(r,i?i(t):t,!0))}}function dI(e,t){let n=e[t];return n===Ct?void 0:n}function fI(e,t,n,r,i,o){let s=t+n;return kn(e,s,i)?q0(e,s+1,o?r.call(o,i):r(i)):dI(e,s+1)}function Mh(e,t){let n=Me(),r,i=e+Fe;n.firstCreatePass?(r=hI(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=qn(r.type,!0)),s,a=tt(C);try{let c=yc(!1),l=o();return yc(c),Bd(n,$(),i,l),l}finally{tt(a)}}function hI(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function Rh(e,t,n){let r=e+Fe,i=$(),o=dm(i,r);return pI(i,r)?fI(i,bm(),t,o.transform,n,o):o.transform(n)}function pI(e,t){return e[O].data[t].pure}var Oc=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},xh=(()=>{class e{compileModuleSync(n){return new Ac(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Sd(n),o=Zv(i.declarations).reduce((s,a)=>{let c=Mn(a);return c&&s.push(new jr(c)),s},[]);return new Oc(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var t_=(()=>{class e{applicationErrorHandler=_(dt);appRef=_(er);taskService=_(Jn);ngZone=_(rt);zonelessEnabled=_($o);tracing=_(Br,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new $e;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(xo):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(_(uf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Lm:sf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(xo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function n_(){return[{provide:br,useExisting:t_},{provide:rt,useClass:No},{provide:$o,useValue:!0}]}function gI(){return typeof $localize<"u"&&$localize.locale||ns}var Jc=new M("",{factory:()=>_(Jc,{optional:!0,skipSelf:!0})||gI()});function nr(e,t){return aa(e,t?.equal)}var s_=Symbol("InputSignalNode#UNSET"),RI=q(b({},ca),{transformFn:void 0,applyValueToInputSignal(e,t){bo(e,t)}});function a_(e,t){let n=Object.create(RI);n.value=e,n.transformFn=t?.transform;function r(){if(wo(n),n.value===s_){let i=null;throw new R(-950,i)}return n.value}return r[et]=n,r}var el=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Jo(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function r_(e,t){return a_(e,t)}function xI(e){return a_(s_,e)}var c_=(r_.required=xI,r_);var Nh=new M(""),NI=new M("");function is(e){return!e.moduleRef}function OI(e){let t=is(e)?e.r3Injector:e.moduleRef.injector,n=t.get(rt);return n.run(()=>{is(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(dt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),is(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Nh);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Nh);s.add(o),e.moduleRef.onDestroy(()=>{qo(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return PI(r,n,()=>{let o=t.get(Jn),s=o.add(),a=t.get(Ch);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Jc,ns);if(Hy(c||ns),!t.get(NI,!0))return is(e)?t.get(er):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(is(e)){let u=t.get(er);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return kI?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>{o.remove(s)})})})}var kI;function PI(e,t,n){try{let r=n();return Pn(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Xc=null;function FI(e=[],t){return st.create({name:t,providers:[{provide:Fo,useValue:"platform"},{provide:Nh,useValue:new Set([()=>Xc=null])},...e]})}function LI(e=[]){if(Xc)return Xc;let t=FI(e);return Xc=t,Uy(),jI(t),t}function jI(e){let t=e.get(Pc,null);ze(e,()=>{t?.forEach(n=>n())})}var VI=1e4;var J2=VI-1e3;var ct=(()=>{class e{static __NG_ELEMENT_ID__=UI}return e})();function UI(e){return BI(Ue(),$(),(e&16)===16)}function BI(e,t,n){if(Zn(e)&&!n){let r=Et(e.index,t);return new Xn(r,r)}else if(e.type&175){let r=t[lt];return new Xn(r,t)}return null}function l_(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;X(z.BootstrapApplicationStart);try{let o=i?.injector??LI(r),s=[n_(),Vm,...n||[]],a=new Yo({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return OI({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{X(z.BootstrapApplicationEnd)}}function rr(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function u_(e){let t=Mn(e);if(!t)return null;let n=new jr(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var d_=null;function Tt(){return d_}function Oh(e){d_??=e}var os=class{},qr=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>_(f_),providedIn:"platform"})}return e})(),kh=new M(""),f_=(()=>{class e extends qr{_location;_history;_doc=_(we);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Tt().getBaseHref(this._doc)}onPopState(n){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function tl(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function h_(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function Wt(e){return e&&e[0]!=="?"?`?${e}`:e}var Kt=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>_(rl),providedIn:"root"})}return e})(),nl=new M(""),rl=(()=>{class e extends Kt{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??_(we).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return tl(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Wt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Wt(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Wt(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(F(qr),F(nl,8))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ir=(()=>{class e{_subject=new Te;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=qI(h_(p_(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Wt(r))}normalize(n){return e.stripTrailingSlash(HI(this._basePath,p_(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Wt;static joinWithSlash=tl;static stripTrailingSlash=h_;static \u0275fac=function(r){return new(r||e)(F(Kt))};static \u0275prov=A({token:e,factory:()=>$I(),providedIn:"root"})}return e})();function $I(){return new ir(F(Kt))}function HI(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function p_(e){return e.replace(/\/index.html$/,"")}function qI(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Lh=(()=>{class e extends Kt{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=tl(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Wt(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Wt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(F(qr),F(nl,8))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})();function GI(e,t){return new R(2100,!1)}var Ph=class{createSubscription(t,n,r){return he(()=>t.subscribe({next:n,error:r}))}dispose(t){he(()=>t.unsubscribe())}},Fh=class{createSubscription(t,n,r){return t.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(t){t.unsubscribe()}},zI=new Fh,WI=new Ph,jh=(()=>{class e{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=_(dt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(Pn(n))return zI;if(Wc(n))return WI;throw GI(e,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||e)(C(ct,16))};static \u0275pipe=_h({name:"async",type:e,pure:!1})}return e})();var Ne=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=pn({type:e});static \u0275inj=jt({})}return e})();function Vh(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var ss=class{};var g_="browser";var Bh=(()=>{class e{static \u0275prov=A({token:e,providedIn:"root",factory:()=>new Uh(_(we),window)})}return e})(),Uh=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,n){this.window.scrollTo(q(b({},n),{left:t[0],top:t[1]}))}scrollToAnchor(t,n){let r=YI(this.document,t);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(zn(2400,!1))}}scrollToElement(t,n){let r=t.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(q(b({},n),{left:i-s[0],top:o-s[1]}))}};function YI(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var as=class{_doc;constructor(t){this._doc=t}manager},il=(()=>{class e extends as{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(F(we))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),al=new M(""),Gh=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof il));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof il);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new R(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(F(al),F(rt))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),$h="ng-app-id";function v_(e){for(let t of e)t.remove()}function y_(e,t){let n=t.createElement("style");return n.textContent=e,n}function ZI(e,t,n,r){let i=e.head?.querySelectorAll(`style[${$h}="${t}"],link[${$h}="${t}"]`);if(i)for(let o of i)o.removeAttribute($h),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function qh(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var zh=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,ZI(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,y_);r?.forEach(i=>this.addUsage(i,this.external,qh))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(v_(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])v_(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,y_(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,qh(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(F(we),F(kc),F(Fc,8),F(Xo))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),Hh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Wh=/%COMP%/g;var w_="%COMP%",QI=`_nghost-${w_}`,JI=`_ngcontent-${w_}`,XI=!0,eT=new M("",{factory:()=>XI});function tT(e){return JI.replace(Wh,e)}function nT(e){return QI.replace(Wh,e)}function E_(e,t){return t.map(n=>n.replace(Wh,e))}var Kh=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,c=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.defaultRenderer=new cs(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof sl?i.applyToHost(n):i instanceof ls&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case qt.Emulated:o=new sl(c,l,r,this.appId,u,s,a,d);break;case qt.ShadowDom:return new ol(c,n,r,s,a,this.nonce,d,l);case qt.ExperimentalIsolatedShadowDom:return new ol(c,n,r,s,a,this.nonce,d);default:o=new ls(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(F(Gh),F(zh),F(kc),F(eT),F(we),F(rt),F(Fc),F(Br,8))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),cs=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(Hh[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(__(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(__(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=Hh[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Hh[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(dn.DashCase|dn.Important)?t.style.setProperty(n,r,i&dn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&dn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=Tt().getGlobalEventTarget(this.doc,t),!t))throw new R(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function __(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var ol=class extends cs{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,r,i,o,s,a,c){super(t,i,o,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=E_(r.id,l);for(let d of l){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=d,this.shadowRoot.appendChild(h)}let u=r.getExternalStyles?.();if(u)for(let d of u){let h=qh(d,i);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ls=class extends cs{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?E_(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Fr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},sl=class extends ls{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=tT(l),this.hostAttr=nT(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var cl=class e extends os{supportsDOMEvents=!0;static makeCurrent(){Oh(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=rT();return n==null?null:iT(n)}resetBaseElement(){us=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Vh(document.cookie,t)}},us=null;function rT(){return us=us||document.head.querySelector("base"),us?us.getAttribute("href"):null}function iT(e){return new URL(e,document.baseURI).pathname}var oT=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),D_=["alt","control","meta","shift"],sT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aT={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},b_=(()=>{class e extends as{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),D_.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=sT[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),D_.forEach(s=>{if(s!==i){let a=aT[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(F(we))};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})();async function Yh(e,t,n){let r=b({rootComponent:e},cT(t,n));return l_(r)}function cT(e,t){return{platformRef:t?.platformRef,appProviders:[...hT,...e?.providers??[]],platformProviders:fT}}function lT(){cl.makeCurrent()}function uT(){return new rn}function dT(){return Jf(document),document}var fT=[{provide:Xo,useValue:g_},{provide:Pc,useValue:lT,multi:!0},{provide:we,useFactory:dT}];var hT=[{provide:Fo,useValue:"root"},{provide:rn,useFactory:uT},{provide:al,useClass:il,multi:!0},{provide:al,useClass:b_,multi:!0},Kh,zh,Gh,{provide:Lr,useExisting:Kh},{provide:ss,useClass:oT},[]];var C_=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(F(we))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var V="primary",ws=Symbol("RouteTitle"),ep=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Wr(e){return new ep(e)}function Zh(e,t,n){for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(i[0]===":")n[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function O_(e,t,n){let r=n.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let c={},l=e.slice(0,r.length);return Zh(r,l,c)?{consumed:l,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>e.length||n.pathMatch==="full"&&t.hasChildren()&&n.path!=="**")return null;let a={};return!Zh(o,e.slice(0,o.length),a)||!Zh(s,e.slice(e.length-s.length),a)?null:{consumed:e,posParams:a}}function pl(e){return new Promise((t,n)=>{e.pipe(In()).subscribe({next:r=>t(r),error:r=>n(r)})})}function gT(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!gn(e[n],t[n]))return!1;return!0}function gn(e,t){let n=e?tp(e):void 0,r=t?tp(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!k_(e[i],t[i]))return!1;return!0}function tp(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function k_(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function mT(e){return e.length>0?e[e.length-1]:null}function Yr(e){return Aa(e)?e:Pn(e)?ce(Promise.resolve(e)):B(e)}function P_(e){return Aa(e)?pl(e):Promise.resolve(e)}var vT={exact:L_,subset:j_},F_={exact:yT,subset:_T,ignored:()=>!0};function gp(e,t,n){let r=e instanceof pt?e:t.parseUrl(e);return nr(()=>np(t.lastSuccessfulNavigation()?.finalUrl??new pt,r,n))}function np(e,t,n){return vT[n.paths](e.root,t.root,n.matrixParams)&&F_[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function yT(e,t){return gn(e,t)}function L_(e,t,n){if(!Gr(e.segments,t.segments)||!dl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!L_(e.children[r],t.children[r],n))return!1;return!0}function _T(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>k_(e[n],t[n]))}function j_(e,t,n){return V_(e,t,t.segments,n)}function V_(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Gr(i,n)||t.hasChildren()||!dl(i,n,r))}else if(e.segments.length===n.length){if(!Gr(e.segments,n)||!dl(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!j_(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Gr(e.segments,i)||!dl(e.segments,i,r)||!e.children[V]?!1:V_(e.children[V],t,o,r)}}function dl(e,t,n){return t.every((r,i)=>F_[n](e[i].parameters,r.parameters))}var pt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Y([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Wr(this.queryParams),this._queryParamMap}toString(){return DT.serialize(this)}},Y=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fl(this)}},or=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Wr(this.parameters),this._parameterMap}toString(){return B_(this)}};function wT(e,t){return Gr(e,t)&&e.every((n,r)=>gn(n.parameters,t[r].parameters))}function Gr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function ET(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===V&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==V&&(n=n.concat(t(i,r)))}),n}var Zr=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>new jn,providedIn:"root"})}return e})(),jn=class{parse(t){let n=new ip(t);return new pt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ds(t.root,!0)}`,r=ST(t.queryParams),i=typeof t.fragment=="string"?`#${bT(t.fragment)}`:"";return`${n}${r}${i}`}},DT=new jn;function fl(e){return e.segments.map(t=>B_(t)).join("/")}function ds(e,t){if(!e.hasChildren())return fl(e);if(t){let n=e.children[V]?ds(e.children[V],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==V&&r.push(`${i}:${ds(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=ET(e,(r,i)=>i===V?[ds(e.children[V],!1)]:[`${i}:${ds(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[V]!=null?`${fl(e)}/${n[0]}`:`${fl(e)}/(${n.join("//")})`}}function U_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ll(e){return U_(e).replace(/%3B/gi,";")}function bT(e){return encodeURI(e)}function rp(e){return U_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hl(e){return decodeURIComponent(e)}function S_(e){return hl(e.replace(/\+/g,"%20"))}function B_(e){return`${rp(e.path)}${CT(e.parameters)}`}function CT(e){return Object.entries(e).map(([t,n])=>`;${rp(t)}=${rp(n)}`).join("")}function ST(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ll(n)}=${ll(i)}`).join("&"):`${ll(n)}=${ll(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var IT=/^[^\/()?;#]+/;function Qh(e){let t=e.match(IT);return t?t[0]:""}var TT=/^[^\/()?;=#]+/;function AT(e){let t=e.match(TT);return t?t[0]:""}var MT=/^[^=?&#]+/;function RT(e){let t=e.match(MT);return t?t[0]:""}var xT=/^[^&#]+/;function NT(e){let t=e.match(xT);return t?t[0]:""}var ip=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[V]=new Y(t,n)),r}parseSegment(){let t=Qh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(t),new or(hl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=AT(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qh(this.remaining);i&&(r=i,this.capture(r))}t[hl(n)]=hl(r)}parseQueryParam(t){let n=RT(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=NT(this.remaining);s&&(r=s,this.capture(r))}let i=S_(n),o=S_(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new R(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=V);let s=this.parseChildren();n[o??V]=Object.keys(s).length===1&&s[V]?s[V]:new Y([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new R(4011,!1)}};function $_(e){return e.segments.length>0?new Y([],{[V]:e}):e}function H_(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=H_(i);if(r===V&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Y(e.segments,t);return OT(n)}function OT(e){if(e.numberOfChildren===1&&e.children[V]){let t=e.children[V];return new Y(e.segments.concat(t.segments),t.children)}return e}function sr(e){return e instanceof pt}function q_(e,t,n=null,r=null,i=new jn){let o=G_(e);return z_(o,t,n,r,i)}function G_(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Y(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=$_(r);return t??i}function z_(e,t,n,r,i){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return Jh(o,o,o,n,r,i);let s=kT(t);if(s.toRoot())return Jh(o,o,new Y([],{}),n,r,i);let a=PT(s,o,e),c=a.processChildren?hs(a.segmentGroup,a.index,s.commands):K_(a.segmentGroup,a.index,s.commands);return Jh(o,a.segmentGroup,c,n,r,i)}function gl(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function gs(e){return typeof e=="object"&&e!=null&&e.outlets}function I_(e,t,n){e||="\u0275";let r=new pt;return r.queryParams={[e]:t},n.parse(n.serialize(r)).queryParams[e]}function Jh(e,t,n,r,i,o){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(d=>I_(l,d,o)):I_(l,u,o);let a;e===t?a=n:a=W_(e,t,n);let c=$_(H_(a));return new pt(c,s,i)}function W_(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=W_(o,t,n)}),new Y(e.segments,r)}var ml=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&gl(r[0]))throw new R(4003,!1);let i=r.find(gs);if(i&&i!==mT(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function kT(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new ml(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ml(n,t,r)}var qi=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function PT(e,t,n){if(e.isAbsolute)return new qi(t,!0,0);if(!n)return new qi(t,!1,NaN);if(n.parent===null)return new qi(n,!0,0);let r=gl(e.commands[0])?0:1,i=n.segments.length-1+r;return FT(n,i,e.numberOfDoubleDots)}function FT(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new qi(r,!1,i-o)}function LT(e){return gs(e[0])?e[0].outlets:{[V]:e}}function K_(e,t,n){if(e??=new Y([],{}),e.segments.length===0&&e.hasChildren())return hs(e,t,n);let r=jT(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Y(e.segments.slice(0,r.pathIndex),{});return o.children[V]=new Y(e.segments.slice(r.pathIndex),e.children),hs(o,0,i)}else return r.match&&i.length===0?new Y(e.segments,{}):r.match&&!e.hasChildren()?op(e,t,n):r.match?hs(e,0,i):op(e,t,n)}function hs(e,t,n){if(n.length===0)return new Y(e.segments,{});{let r=LT(n),i={};if(Object.keys(r).some(o=>o!==V)&&e.children[V]&&e.numberOfChildren===1&&e.children[V].segments.length===0){let o=hs(e.children[V],t,n);return new Y(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=K_(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Y(e.segments,i)}}function jT(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(gs(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!A_(c,l,s))return o;r+=2}else{if(!A_(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function op(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(gs(o)){let c=VT(o.outlets);return new Y(r,c)}if(i===0&&gl(n[0])){let c=e.segments[t];r.push(new or(c.path,T_(n[0]))),i++;continue}let s=gs(o)?o.outlets[V]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&gl(a)?(r.push(new or(s,T_(a))),i+=2):(r.push(new or(s,{})),i++)}return new Y(r,{})}function VT(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=op(new Y([],{}),0,r))}),t}function T_(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function A_(e,t,n){return e==n.path&&gn(t,n.parameters)}var Gi="imperative",Le=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Le||{}),gt=class{id;url;constructor(t,n){this.id=t,this.url=n}},ar=class extends gt{type=Le.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mt=class extends gt{urlAfterRedirects;type=Le.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Je=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Je||{}),Wi=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Wi||{}),At=class extends gt{reason;code;type=Le.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function Y_(e){return e instanceof At&&(e.code===Je.Redirect||e.code===Je.SupersededByNewNavigation)}var mn=class extends gt{reason;code;type=Le.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},Kr=class extends gt{error;target;type=Le.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ki=class extends gt{urlAfterRedirects;state;type=Le.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vl=class extends gt{urlAfterRedirects;state;type=Le.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yl=class extends gt{urlAfterRedirects;state;shouldActivate;type=Le.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_l=class extends gt{urlAfterRedirects;state;type=Le.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wl=class extends gt{urlAfterRedirects;state;type=Le.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},El=class{route;type=Le.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Dl=class{route;type=Le.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bl=class{snapshot;type=Le.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cl=class{snapshot;type=Le.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sl=class{snapshot;type=Le.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Il=class{snapshot;type=Le.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yi=class{routerEvent;position;anchor;scrollBehavior;type=Le.Scroll;constructor(t,n,r,i){this.routerEvent=t,this.position=n,this.anchor=r,this.scrollBehavior=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Zi=class{},Qi=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function UT(e){return!(e instanceof Zi)&&!(e instanceof Qi)}var Tl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Qr(this.rootInjector)}},Qr=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Tl(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(F(Se))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Al=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=sp(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=sp(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=ap(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return ap(t,this._root).map(n=>n.value)}};function sp(e,t){if(e===t.value)return t;for(let n of t.children){let r=sp(e,n);if(r)return r}return null}function ap(e,t){if(e===t.value)return[t];for(let n of t.children){let r=ap(e,n);if(r.length)return r.unshift(t),r}return[]}var ht=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Hi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var ms=class extends Al{snapshot;constructor(t,n){super(t),this.snapshot=n,mp(this,t)}toString(){return this.snapshot.toString()}};function Z_(e,t){let n=BT(e,t),r=new Ce([new or("",{})]),i=new Ce({}),o=new Ce({}),s=new Ce({}),a=new Ce(""),c=new vn(r,i,s,a,o,V,e,n.root);return c.snapshot=n.root,new ms(new ht(c,[]),n)}function BT(e,t){let n={},r={},i={},s=new zr([],n,i,"",r,V,e,null,{},t);return new vs("",new ht(s,[]))}var vn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(le(l=>l[ws]))??B(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(t=>Wr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(t=>Wr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ml(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:b(b({},t.params),e.params),data:b(b({},t.data),e.data),resolve:b(b(b(b({},e.data),t.data),i?.data),e._resolvedData)}:r={params:b({},e.params),data:b({},e.data),resolve:b(b({},e.data),e._resolvedData??{})},i&&J_(i)&&(r.resolve[ws]=i.title),r}var zr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[ws]}constructor(t,n,r,i,o,s,a,c,l,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l,this._environmentInjector=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Wr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Wr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},vs=class extends Al{url;constructor(t,n){super(n),this.url=t,mp(this,n)}toString(){return Q_(this._root)}};function mp(e,t){t.value._routerState=e,t.children.forEach(n=>mp(e,n))}function Q_(e){let t=e.children.length>0?` { ${e.children.map(Q_).join(", ")} } `:"";return`${e.value}${t}`}function Xh(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,gn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),gn(t.params,n.params)||e.paramsSubject.next(n.params),gT(t.url,n.url)||e.urlSubject.next(n.url),gn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function cp(e,t){let n=gn(e.params,t.params)&&wT(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||cp(e.parent,t.parent))}function J_(e){return typeof e.title=="string"||e.title===null}var X_=new M(""),Jr=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=V;activateEvents=new ue;deactivateEvents=new ue;attachEvents=new ue;detachEvents=new ue;routerOutletData=c_();parentContexts=_(Qr);location=_($r);changeDetector=_(ct);inputBinder=_(Es,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new lp(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ee({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[fn]})}return e})(),lp=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===vn?this.route:t===Qr?this.childContexts:t===X_?this.outletData:this.parent.get(t,n)}},Es=new M(""),vp=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Na([r.queryParams,r.params,r.data]).pipe(en(([o,s,a],c)=>(a=b(b(b({},o),s),a),c===0?B(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=u_(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})(),yp=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=oe({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ze(0,"router-outlet")},dependencies:[Jr],encapsulation:2})}return e})();function _p(e){let t=e.children&&e.children.map(_p),n=t?q(b({},e),{children:t}):b({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==V&&(n.component=yp),n}function $T(e,t,n){let r=ys(e,t._root,n?n._root:void 0);return new ms(r,t)}function ys(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=HT(e,t,n);return new ht(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ys(e,a)),s}}let r=qT(t.value),i=t.children.map(o=>ys(e,o));return new ht(r,i)}}function HT(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return ys(e,r,i);return ys(e,r)})}function qT(e){return new vn(new Ce(e.url),new Ce(e.params),new Ce(e.queryParams),new Ce(e.fragment),new Ce(e.data),e.outlet,e.component,e)}var Ji=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},ew="ngNavigationCancelingError";function Rl(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=sr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=tw(!1,Je.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function tw(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[ew]=!0,n.cancellationCode=t,n}function GT(e){return nw(e)&&sr(e.url)}function nw(e){return!!e&&e[ew]}var up=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Xh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Hi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Hi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Hi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Hi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Il(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Cl(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Xh(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Xh(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},xl=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},zi=class{component;route;constructor(t,n){this.component=t,this.route=n}};function zT(e,t,n){let r=e._root,i=t?t._root:null;return fs(r,i,n,[r.value])}function WT(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function eo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!_d(e)?e:t.get(e):r}function fs(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Hi(t);return e.children.forEach(s=>{KT(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ps(a,n.getContext(s),i)),i}function KT(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=YT(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new xl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fs(e,t,a?a.children:null,r,i):fs(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zi(a.outlet.component,s))}else s&&ps(t,a,i),i.canActivateChecks.push(new xl(r)),o.component?fs(e,null,a?a.children:null,r,i):fs(e,null,n,r,i);return i}function YT(e,t,n){if(typeof n=="function")return ze(t._environmentInjector,()=>n(e,t));switch(n){case"pathParamsChange":return!Gr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Gr(e.url,t.url)||!gn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cp(e,t)||!gn(e.queryParams,t.queryParams);default:return!cp(e,t)}}function ps(e,t,n){let r=Hi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?ps(s,t.children.getContext(o),n):ps(s,null,n):ps(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new zi(t.outlet.component,i)):n.canDeactivateChecks.push(new zi(null,i)):n.canDeactivateChecks.push(new zi(null,i))}function Ds(e){return typeof e=="function"}function ZT(e){return typeof e=="boolean"}function QT(e){return e&&Ds(e.canLoad)}function JT(e){return e&&Ds(e.canActivate)}function XT(e){return e&&Ds(e.canActivateChild)}function eA(e){return e&&Ds(e.canDeactivate)}function tA(e){return e&&Ds(e.canMatch)}function rw(e){return e instanceof yr||e?.name==="EmptyError"}var ul=Symbol("INITIAL_VALUE");function Xi(){return en(e=>Na(e.map(t=>t.pipe(Sn(1),nd(ul)))).pipe(le(t=>{for(let n of t)if(n!==!0){if(n===ul)return ul;if(n===!1||nA(n))return n}return!0}),Ft(t=>t!==ul),Sn(1)))}function nA(e){return sr(e)||e instanceof Ji}function iw(e){return e.aborted?B(void 0).pipe(Sn(1)):new G(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function ow(e){return To(iw(e))}function rA(e){return qe(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=t;return o.length===0&&i.length===0?B(q(b({},t),{guardsResult:!0})):iA(o,n,r).pipe(qe(s=>s&&ZT(s)?oA(n,i,e):B(s)),le(s=>q(b({},t),{guardsResult:s})))})}function iA(e,t,n){return ce(e).pipe(qe(r=>uA(r.component,r.route,n,t)),In(r=>r!==!0,!0))}function oA(e,t,n){return ce(t).pipe(Di(r=>wi(aA(r.route.parent,n),sA(r.route,n),lA(e,r.path),cA(e,r.route))),In(r=>r!==!0,!0))}function sA(e,t){return e!==null&&t&&t(new Sl(e)),B(!0)}function aA(e,t){return e!==null&&t&&t(new bl(e)),B(!0)}function cA(e,t){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return B(!0);let r=n.map(i=>Io(()=>{let o=t._environmentInjector,s=eo(i,o),a=JT(s)?s.canActivate(t,e):ze(o,()=>s(t,e));return Yr(a).pipe(In())}));return B(r).pipe(Xi())}function lA(e,t){let n=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>WT(o)).filter(o=>o!==null).map(o=>Io(()=>{let s=o.guards.map(a=>{let c=o.node._environmentInjector,l=eo(a,c),u=XT(l)?l.canActivateChild(n,e):ze(c,()=>l(n,e));return Yr(u).pipe(In())});return B(s).pipe(Xi())}));return B(i).pipe(Xi())}function uA(e,t,n,r){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return B(!0);let o=i.map(s=>{let a=t._environmentInjector,c=eo(s,a),l=eA(c)?c.canDeactivate(e,t,n,r):ze(a,()=>c(e,t,n,r));return Yr(l).pipe(In())});return B(o).pipe(Xi())}function dA(e,t,n,r,i){let o=t.canLoad;if(o===void 0||o.length===0)return B(!0);let s=o.map(a=>{let c=eo(a,e),l=QT(c)?c.canLoad(t,n):ze(e,()=>c(t,n)),u=Yr(l);return i?u.pipe(ow(i)):u});return B(s).pipe(Xi(),sw(r))}function sw(e){return Zu(tn(t=>{if(typeof t!="boolean")throw Rl(e,t)}),le(t=>t===!0))}function fA(e,t,n,r,i){let o=t.canMatch;if(!o||o.length===0)return B(!0);let s=o.map(a=>{let c=eo(a,e),l=tA(c)?c.canMatch(t,n):ze(e,()=>c(t,n));return Yr(l).pipe(ow(i))});return B(s).pipe(Xi(),sw(r))}var Ln=class e extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,e.prototype)}},_s=class e extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,e.prototype)}};function hA(e){throw new R(4e3,!1)}function pA(e){throw tw(!1,Je.GuardRejected)}var dp=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}async lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[V])throw hA(`${t.redirectTo}`);i=i.children[V]}}async applyRedirectCommands(t,n,r,i,o){let s=await gA(n,i,o);if(s instanceof pt)throw new _s(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new _s(a);return a}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new pt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Y(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new R(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function gA(e,t,n){if(typeof e=="string")return Promise.resolve(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d,paramMap:h,queryParamMap:f}=t;return pl(Yr(ze(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d,paramMap:h,queryParamMap:f}))))}function mA(e,t){return e.providers&&!e._injector&&(e._injector=Bi(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Yt(e){return e.outlet||V}function vA(e,t){let n=e.filter(r=>Yt(r)===t);return n.push(...e.filter(r=>Yt(r)!==t)),n}var fp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yA(e,t,n,r,i,o){let s=aw(e,t,n);return s.matched?(r=mA(t,r),fA(r,t,n,i,o).pipe(le(a=>a===!0?s:b({},fp)))):B(s)}function aw(e,t,n){if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?b({},fp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||O_)(n,e,t);if(!i)return b({},fp);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?b(b({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function M_(e,t,n,r){return n.length>0&&EA(e,n,r)?{segmentGroup:new Y(t,wA(r,new Y(n,e.children))),slicedSegments:[]}:n.length===0&&DA(e,n,r)?{segmentGroup:new Y(e.segments,_A(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Y(e.segments,e.children),slicedSegments:n}}function _A(e,t,n,r){let i={};for(let o of n)if(Ol(e,t,o)&&!r[Yt(o)]){let s=new Y([],{});i[Yt(o)]=s}return b(b({},r),i)}function wA(e,t){let n={};n[V]=t;for(let r of e)if(r.path===""&&Yt(r)!==V){let i=new Y([],{});n[Yt(r)]=i}return n}function EA(e,t,n){return n.some(r=>Ol(e,t,r)&&Yt(r)!==V)}function DA(e,t,n){return n.some(r=>Ol(e,t,r))}function Ol(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function bA(e,t,n){return t.length===0&&!e.children[n]}var hp=class{};async function CA(e,t,n,r,i,o,s="emptyOnly",a){return new pp(e,t,n,r,i,s,o,a).recognize()}var SA=31,pp=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new dp(this.urlSerializer,this.urlTree)}noMatchError(t){return new R(4002,`'${t.segmentGroup}'`)}async recognize(){let t=M_(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(t),i=new ht(r,n),o=new vs("",i),s=q_(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let n=new zr([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),V,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,t,V,n),rootSnapshot:n}}catch(r){if(r instanceof _s)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ln?this.noMatchError(r):r}}async processSegmentGroup(t,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,n,r,o);let s=await this.processSegment(t,n,r,r.segments,i,!0,o);return s instanceof ht?[s]:[]}async processChildren(t,n,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],u=vA(n,c),d=await this.processSegmentGroup(t,u,l,c,i);s.push(...d)}let a=cw(s);return IA(a),a}async processSegment(t,n,r,i,o,s,a){for(let c of n)try{return await this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a)}catch(l){if(l instanceof Ln||rw(l))continue;throw l}if(bA(r,i,o))return new hp;throw new Ln(r)}async processSegmentAgainstRoute(t,n,r,i,o,s,a,c){if(Yt(r)!==s&&(s===V||!Ol(i,o,r)))throw new Ln(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c);throw new Ln(i)}async expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=aw(n,i,o);if(!c)throw new Ln(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SA&&(this.allowRedirects=!1));let f=new zr(o,l,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,R_(i),Yt(i),i.component??i._loadedComponent??null,i,x_(i),t),p=Ml(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let y=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t),D=await this.applyRedirects.lineralizeSegments(i,y);return this.processSegment(t,r,n,D.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await pl(yA(n,r,i,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Ln(n);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,i),l=r._loadedInjector??t,{parameters:u,consumedSegments:d,remainingSegments:h}=a,f=new zr(d,u,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,R_(r),Yt(r),r.component??r._loadedComponent??null,r,x_(r),t),p=Ml(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let{segmentGroup:y,slicedSegments:D}=M_(n,d,h,c);if(D.length===0&&y.hasChildren()){let I=await this.processChildren(l,c,y,f);return new ht(f,I)}if(c.length===0&&D.length===0)return new ht(f,[]);let E=Yt(r)===o,L=await this.processSegment(l,c,y,D,E?V:o,!0,f);return new ht(f,L instanceof ht?[L]:[])}async getChildConfig(t,n,r){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0){let o=n._loadedNgModuleFactory;return o&&!n._loadedInjector&&(n._loadedInjector=o.create(t).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await pl(dA(t,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,n._loadedNgModuleFactory=o.factory,o}throw pA(n)}return{routes:[],injector:t}}};function IA(e){e.sort((t,n)=>t.value.outlet===V?-1:n.value.outlet===V?1:t.value.outlet.localeCompare(n.value.outlet))}function TA(e){let t=e.value.routeConfig;return t&&t.path===""}function cw(e){let t=[],n=new Set;for(let r of e){if(!TA(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=cw(r.children);t.push(new ht(r.value,i))}return t.filter(r=>!n.has(r))}function R_(e){return e.data||{}}function x_(e){return e.resolve||{}}function AA(e,t,n,r,i,o,s){return qe(async a=>{let{state:c,tree:l}=await CA(e,t,n,r,a.extractedUrl,i,o,s);return q(b({},a),{targetSnapshot:c,urlAfterRedirects:l})})}function MA(e){return qe(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return B(t);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let c of lw(a))o.add(c);let s=0;return ce(o).pipe(Di(a=>i.has(a)?RA(a,n,e):(a.data=Ml(a,a.parent,e).resolve,B(void 0))),tn(()=>s++),Oa(1),qe(a=>s===o.size?B(t):He))})}function lw(e){let t=e.children.map(n=>lw(n)).flat();return[e,...t]}function RA(e,t,n){let r=e.routeConfig,i=e._resolve;return r?.title!==void 0&&!J_(r)&&(i[ws]=r.title),Io(()=>(e.data=Ml(e,e.parent,n).resolve,xA(i,e,t).pipe(le(o=>(e._resolvedData=o,e.data=b(b({},e.data),o),null)))))}function xA(e,t,n){let r=tp(e);if(r.length===0)return B({});let i={};return ce(r).pipe(qe(o=>NA(e[o],t,n).pipe(In(),tn(s=>{if(s instanceof Ji)throw Rl(new jn,s);i[o]=s}))),Oa(1),le(()=>i),Ei(o=>rw(o)?He:Xu(o)))}function NA(e,t,n){let r=t._environmentInjector,i=eo(e,r),o=i.resolve?i.resolve(t,n):ze(r,()=>i(t,n));return Yr(o)}function N_(e){return en(t=>{let n=e(t);return n?ce(n).pipe(le(()=>t)):B(t)})}var wp=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===V);return r}getResolvedTitleForRoute(n){return n.data[ws]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>_(uw),providedIn:"root"})}return e})(),uw=(()=>{class e extends wp{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(F(C_))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cr=new M("",{factory:()=>({})}),Xr=new M(""),kl=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=_(xh);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await P_(ze(n,()=>r.loadComponent())),s=await hw(fw(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await dw(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();async function dw(e,t,n,r){let i=await P_(ze(n,()=>e.loadChildren())),o=await hw(fw(i)),s;o instanceof zc||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),r&&r(e);let a,c,l=!1,u;return Array.isArray(s)?(c=s,l=!0):(a=s.create(n).injector,u=s,c=a.get(Xr,[],{optional:!0,self:!0}).flat()),{routes:c.map(_p),injector:a,factory:u}}function OA(e){return e&&typeof e=="object"&&"default"in e}function fw(e){return OA(e)?e.default:e}async function hw(e){return e}var Pl=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>_(kA),providedIn:"root"})}return e})(),kA=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ep=new M(""),Dp=new M("");function pw(e,t,n){let r=e.get(Dp),i=e.get(we);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),PA(e)));a.updateCallbackDone.catch(l=>{}),a.ready.catch(l=>{}),a.finished.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&ze(e,()=>c({transition:a,from:t,to:n})),s}function PA(e){return new Promise(t=>{Ui({read:()=>setTimeout(t)},{injector:e})})}var FA=()=>{},bp=new M(""),Fl=(()=>{class e{currentNavigation=bt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=bt(null);events=new Te;transitionAbortWithErrorSubject=new Te;configLoader=_(kl);environmentInjector=_(Se);destroyRef=_(Dt);urlSerializer=_(Zr);rootContexts=_(Qr);location=_(ir);inputBindingEnabled=_(Es,{optional:!0})!==null;titleStrategy=_(wp);options=_(cr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=_(Pl);createViewTransition=_(Ep,{optional:!0});navigationErrorHandler=_(bp,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>B(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new El(i)),r=i=>this.events.next(new Dl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;he(()=>{this.transitions?.next(q(b({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Ce(null),this.transitions.pipe(Ft(r=>r!==null),en(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return B(r).pipe(en(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Je.SupersededByNewNavigation),He;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?q(b({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=a.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload")return this.events.next(new mn(a.id,this.urlSerializer.serialize(a.rawUrl),"",Wi.IgnoredSameUrlNavigation)),a.resolve(!1),He;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return B(a).pipe(en(d=>(this.events.next(new ar(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?He:Promise.resolve(d))),AA(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),tn(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=d.urlAfterRedirects,f));let h=new Ki(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:p,extras:y}=a,D=new ar(d,this.urlSerializer.serialize(h),f,p);this.events.next(D);let E=Z_(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=q(b({},a),{targetSnapshot:E,urlAfterRedirects:h,extras:q(b({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(L=>(L.finalUrl=h,L)),B(r)}else return this.events.next(new mn(a.id,this.urlSerializer.serialize(a.extractedUrl),"",Wi.IgnoredByUrlHandlingStrategy)),a.resolve(!1),He}),le(a=>{let c=new vl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=q(b({},a),{guards:zT(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),rA(a=>this.events.next(a)),en(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Rl(this.urlSerializer,a.guardsResult);let c=new yl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return He;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Je.GuardRejected),He;if(a.guards.canActivateChecks.length===0)return B(a);let l=new _l(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(l),!s())return He;let u=!1;return B(a).pipe(MA(this.paramsInheritanceStrategy),tn({next:()=>{u=!0;let d=new wl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(d)},complete:()=>{u||this.cancelNavigationTransition(a,"",Je.NoDataFromResolver)}}))}),N_(a=>{let c=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let h=u._environmentInjector;d.push(this.configLoader.loadComponent(h,u.routeConfig).then(f=>{u.component=f}))}for(let h of u.children)d.push(...c(h));return d},l=c(a.targetSnapshot.root);return l.length===0?B(a):ce(Promise.all(l).then(()=>a))}),N_(()=>this.afterPreactivation()),en(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return l?ce(l).pipe(le(()=>r)):B(r)}),Sn(1),le(a=>{let c=$T(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=q(b({},a),{targetRouterState:c}),this.currentNavigation.update(l=>(l.targetRouterState=c,l)),this.events.next(new Zi),s()&&(new up(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(l=>(l.abort=FA,l)),this.lastSuccessfulNavigation.set(he(this.currentNavigation)),this.events.next(new mt(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),To(iw(o.signal).pipe(Ft(()=>!i&&!r.targetRouterState),tn(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Je.Aborted)}))),tn({complete:()=>{i=!0}}),To(this.transitionAbortWithErrorSubject.pipe(tn(a=>{throw a}))),td(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Je.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ei(a=>{if(i=!0,this.destroyed)return r.resolve(!1),He;if(nw(a))this.events.next(new At(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),GT(a)?this.events.next(new Qi(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Kr(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=ze(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof Ji){let{message:u,cancellationCode:d}=Rl(this.urlSerializer,l);this.events.next(new At(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new Qi(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return He}))}))}cancelNavigationTransition(n,r,i){let o=new At(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=he(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function LA(e){return e!==Gi}var gw=new M("");var mw=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>_(jA),providedIn:"root"})}return e})(),Nl=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}shouldDestroyInjector(t){return!0}},jA=(()=>{class e extends Nl{static \u0275fac=(()=>{let n;return function(i){return(n||(n=On(e)))(i||e)}})();static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Cp=(()=>{class e{urlSerializer=_(Zr);options=_(cr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=_(ir);urlHandlingStrategy=_(Pl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new pt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof pt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=Z_(null,_(Se));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:()=>_(VA),providedIn:"root"})}return e})(),VA=(()=>{class e extends Cp{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof ar?this.updateStateMemento():n instanceof mn?this.commitTransition(r):n instanceof Ki?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Zi?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof At&&!Y_(n)?this.restoreHistory(r):n instanceof Kr?this.restoreHistory(r,!0):n instanceof mt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=b(b({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=b(b({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=On(e)))(i||e)}})();static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ll(e,t){e.events.pipe(Ft(n=>n instanceof mt||n instanceof At||n instanceof Kr||n instanceof mn),le(n=>n instanceof mt||n instanceof mn?0:(n instanceof At?n.code===Je.Redirect||n.code===Je.SupersededByNewNavigation:!1)?2:1),Ft(n=>n!==2),Sn(1)).subscribe(()=>{t()})}var Sp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ip={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Oe=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=_(wh);stateManager=_(Cp);options=_(cr,{optional:!0})||{};pendingTasks=_(Jn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=_(Fl);urlSerializer=_(Zr);location=_(ir);urlHandlingStrategy=_(Pl);injector=_(Se);_events=new Te;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=_(mw);injectorCleanup=_(gw,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=_(Xr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!_(Es,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new $e;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=he(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof At&&r.code!==Je.Redirect&&r.code!==Je.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof mt)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Qi){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=b({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LA(i.source)},s);this.scheduleNavigation(a,Gi,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}UT(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=b({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(dt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return he(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(_p),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=b(b({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=G_(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return z_(d,n,u,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=sr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Gi,null,r)}navigate(n,r={skipLocationChange:!1}){return UA(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(zn(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=b({},Sp):r===!1?i=b({},Ip):i=r,sr(n))return np(this.currentUrlTree,n,i);let o=this.parseUrl(n);return np(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return Ll(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function UA(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new R(4008,!1)}var to=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=bt(null);get href(){return he(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Te;applicationErrorHandler=_(dt);options=_(cr,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(_(new el("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(n=>{n instanceof mt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(sr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:sr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(C(Oe),C(vn),Jo("tabindex"),C(Gt),C(it),C(Kt))};static \u0275dir=Ee({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ee("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&$i("href",i.reactiveHref(),nh)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",rr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",rr],replaceUrl:[2,"replaceUrl","replaceUrl",rr],routerLink:"routerLink"},features:[fn]})}return e})(),Ap=(()=>{class e{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ue;link=_(to,{optional:!0});constructor(n,r,i,o){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=n.events.subscribe(s=>{s instanceof mt&&this.update()})}ngAfterContentInit(){B(this.links.changes,B(null)).pipe(Hn()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ce(n).pipe(Hn()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=BA(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact??!1?b({},Sp):b({},Ip);return i=>{let o=i.urlTree;return o?he(gp(o,n,r)):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||e)(C(Oe),C(it),C(Gt),C(ct))};static \u0275dir=Ee({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Qc(o,to,5),r&2){let s;Ih(s=Th())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[fn]})}return e})();function BA(e){return!!e.paths}var bs=class{};var vw=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ft(n=>n instanceof mt),Di(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription?.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Bi(o.providers,n,""));let s=o._injector??n;o._loadedNgModuleFactory&&!o._loadedInjector&&(o._loadedInjector=o._loadedNgModuleFactory.create(s).injector);let a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ce(i).pipe(Hn())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{if(n.destroyed)return B(null);let i;r.loadChildren&&r.canLoad===void 0?i=ce(this.loader.loadChildren(n,r)):i=B(null);let o=i.pipe(qe(s=>s===null?B(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(n,r);return ce([o,s]).pipe(Hn())}else return o})}static \u0275fac=function(r){return new(r||e)(F(Oe),F(Se),F(bs),F(kl))};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),yw=new M(""),$A=(()=>{class e{options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Gi;restoredId=0;store={};urlSerializer=_(Zr);zone=_(rt);viewportScroller=_(Bh);transitions=_(Fl);constructor(n){this.options=n,this.options.scrollPositionRestoration||="disabled",this.options.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ar?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof mt?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof mn&&n.code===Wi.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{if(!(n instanceof Yi)||n.scrollBehavior==="manual")return;let r={behavior:"instant"};n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position,r):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(n,r){let i=he(this.transitions.currentNavigation)?.extras.scroll;this.zone.runOutsideAngular(async()=>{await new Promise(o=>{setTimeout(o),typeof requestAnimationFrame<"u"&&requestAnimationFrame(o)}),this.zone.run(()=>{this.transitions.events.next(new Yi(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r,i))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){vh()};static \u0275prov=A({token:e,factory:e.\u0275fac})}return e})();function Mp(e,...t){return Ir([{provide:Xr,multi:!0,useValue:e},[],{provide:vn,useFactory:_w},{provide:ts,multi:!0,useFactory:ww},t.map(n=>n.\u0275providers)])}function _w(){return _(Oe).routerState.root}function Cs(e,t){return{\u0275kind:e,\u0275providers:t}}function ww(){let e=_(st);return t=>{let n=e.get(er);if(t!==n.components[0])return;let r=e.get(Oe),i=e.get(Ew);e.get(Rp)===1&&r.initialNavigation(),e.get(Cw,null,{optional:!0})?.setUpPreloading(),e.get(yw,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Ew=new M("",{factory:()=>new Te}),Rp=new M("",{factory:()=>1});function Dw(){let e=[{provide:Xf,useValue:!0},{provide:Rp,useValue:0},Kc(()=>{let t=_(st);return t.get(kh,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(Oe),o=t.get(Ew);Ll(i,()=>{r(!0)}),t.get(Fl).afterPreactivation=()=>(r(!0),o.closed?B(void 0):o),i.initialNavigation()}))})];return Cs(2,e)}function bw(){let e=[Kc(()=>{_(Oe).setUpLocationChangeListener()}),{provide:Rp,useValue:2}];return Cs(3,e)}var Cw=new M("");function Sw(e){return Cs(0,[{provide:Cw,useExisting:vw},{provide:bs,useExisting:e}])}function Iw(){return Cs(8,[vp,{provide:Es,useExisting:vp}])}function Tw(e){hn("NgRouterViewTransitions");let t=[{provide:Ep,useValue:pw},{provide:Dp,useValue:b({skipNextTransition:!!e?.skipInitialTransition},e)}];return Cs(9,t)}var Aw=[ir,{provide:Zr,useClass:jn},Oe,Qr,{provide:vn,useFactory:_w},kl,[]],xp=(()=>{class e{constructor(){}static forRoot(n,r){return{ngModule:e,providers:[Aw,[],{provide:Xr,multi:!0,useValue:n},[],r?.errorHandler?{provide:bp,useValue:r.errorHandler}:[],{provide:cr,useValue:r||{}},r?.useHash?qA():GA(),HA(),r?.preloadingStrategy?Sw(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?zA(r):[],r?.bindToComponentInputs?Iw().\u0275providers:[],r?.enableViewTransitions?Tw().\u0275providers:[],WA()]}}static forChild(n){return{ngModule:e,providers:[{provide:Xr,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=pn({type:e});static \u0275inj=jt({})}return e})();function HA(){return{provide:yw,useFactory:()=>{let e=_(Bh),t=_(cr);return t.scrollOffset&&e.setOffset(t.scrollOffset),new $A(t)}}}function qA(){return{provide:Kt,useClass:Lh}}function GA(){return{provide:Kt,useClass:rl}}function zA(e){return[e.initialNavigation==="disabled"?bw().\u0275providers:[],e.initialNavigation==="enabledBlocking"?Dw().\u0275providers:[]]}var Tp=new M("");function WA(){return[{provide:Tp,useFactory:ww},{provide:ts,multi:!0,useExisting:Tp}]}var jw=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(C(Gt),C(it))};static \u0275dir=Ee({type:e})}return e})(),kp=(()=>{class e extends jw{static \u0275fac=(()=>{let n;return function(i){return(n||(n=On(e)))(i||e)}})();static \u0275dir=Ee({type:e,features:[St]})}return e})(),Wl=new M("");var KA={provide:Wl,useExisting:Lt(()=>yn),multi:!0};function YA(){let e=Tt()?Tt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var ZA=new M(""),yn=(()=>{class e extends jw{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!YA())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(C(Gt),C(it),C(ZA,8))};static \u0275dir=Ee({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ee("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[tr([KA]),St]})}return e})();function QA(e){return e==null||JA(e)===0}function JA(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Pp=new M(""),Vw=new M("");function XA(e){return QA(e.value)?{required:!0}:null}function Mw(e){return null}function Uw(e){return e!=null}function Bw(e){return Pn(e)?ce(e):e}function $w(e){let t={};return e.forEach(n=>{t=n!=null?b(b({},t),n):t}),Object.keys(t).length===0?null:t}function Hw(e,t){return t.map(n=>n(e))}function eM(e){return!e.validate}function qw(e){return e.map(t=>eM(t)?t:n=>t.validate(n))}function tM(e){if(!e)return null;let t=e.filter(Uw);return t.length==0?null:function(n){return $w(Hw(n,t))}}function Fp(e){return e!=null?tM(qw(e)):null}function nM(e){if(!e)return null;let t=e.filter(Uw);return t.length==0?null:function(n){let r=Hw(n,t).map(Bw);return ed(r).pipe(le($w))}}function Lp(e){return e!=null?nM(qw(e)):null}function Rw(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function rM(e){return e._rawValidators}function iM(e){return e._rawAsyncValidators}function Np(e){return e?Array.isArray(e)?e:[e]:[]}function Ul(e,t){return Array.isArray(e)?e.includes(t):e===t}function xw(e,t){let n=Np(t);return Np(e).forEach(i=>{Ul(n,i)||n.push(i)}),n}function Nw(e,t){return Np(t).filter(n=>!Ul(e,n))}var Bl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Fp(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Lp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},io=class extends Bl{name;get formDirective(){return null}get path(){return null}},Rs=class extends Bl{_parent=null;name=null;valueAccessor=null},$l=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var _n=(()=>{class e extends $l{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(C(Rs,2))};static \u0275dir=Ee({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Hr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[St]})}return e})(),Kl=(()=>{class e extends $l{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(C(io,10))};static \u0275dir=Ee({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Hr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[St]})}return e})();var Ss="VALID",Vl="INVALID",no="PENDING",Is="DISABLED",lr=class{},Hl=class extends lr{value;source;constructor(t,n){super(),this.value=t,this.source=n}},As=class extends lr{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Ms=class extends lr{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},ro=class extends lr{status;source;constructor(t,n){super(),this.status=t,this.source=n}},Op=class extends lr{source;constructor(t){super(),this.source=t}},ql=class extends lr{source;constructor(t){super(),this.source=t}};function Gw(e){return(Yl(e)?e.validators:e)||null}function oM(e){return Array.isArray(e)?Fp(e):e||null}function zw(e,t){return(Yl(t)?t.asyncValidators:e)||null}function sM(e){return Array.isArray(e)?Lp(e):e||null}function Yl(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function aM(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new R(1e3,"");if(!r[n])throw new R(1001,"")}function cM(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new R(1002,"")})}var Gl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return he(this.statusReactive)}set status(t){he(()=>this.statusReactive.set(t))}_status=nr(()=>this.statusReactive());statusReactive=bt(void 0);get valid(){return this.status===Ss}get invalid(){return this.status===Vl}get pending(){return this.status==no}get disabled(){return this.status===Is}get enabled(){return this.status!==Is}errors;get pristine(){return he(this.pristineReactive)}set pristine(t){he(()=>this.pristineReactive.set(t))}_pristine=nr(()=>this.pristineReactive());pristineReactive=bt(!0);get dirty(){return!this.pristine}get touched(){return he(this.touchedReactive)}set touched(t){he(()=>this.touchedReactive.set(t))}_touched=nr(()=>this.touchedReactive());touchedReactive=bt(!1);get untouched(){return!this.touched}_events=new Te;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(xw(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(xw(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Nw(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Nw(t,this._rawAsyncValidators))}hasValidator(t){return Ul(this._rawValidators,t)}hasAsyncValidator(t){return Ul(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(q(b({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Ms(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Ms(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(q(b({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new As(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new As(!0,r))}markAsPending(t={}){this.status=no;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ro(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(q(b({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Is,this.errors=null,this._forEachChild(i=>{i.disable(q(b({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hl(this.value,r)),this._events.next(new ro(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(q(b({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ss,this._forEachChild(r=>{r.enable(q(b({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(q(b({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ss||this.status===no)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Hl(this.value,n)),this._events.next(new ro(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(q(b({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Is:Ss}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=no,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Bw(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new ro(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?Is:this.errors?Vl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(no)?no:this._anyControlsHaveStatus(Vl)?Vl:Ss}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new As(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ms(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Yl(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=oM(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=sM(this._rawAsyncValidators)}},zl=class extends Gl{constructor(t,n,r){super(Gw(n),zw(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){cM(this,!0,t),Object.keys(t).forEach(r=>{aM(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,q(b({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new ql(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var jp=new M("",{factory:()=>Vp}),Vp="always";function lM(e,t){return[...t.path,e]}function Ww(e,t,n=Vp){Kw(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),dM(e,t),hM(e,t),fM(e,t),uM(e,t)}function Ow(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function uM(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Kw(e,t){let n=rM(e);t.validator!==null?e.setValidators(Rw(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=iM(e);t.asyncValidator!==null?e.setAsyncValidators(Rw(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();Ow(t._rawValidators,i),Ow(t._rawAsyncValidators,i)}function dM(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Yw(e,t)})}function fM(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Yw(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Yw(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function hM(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function pM(e,t){e==null,Kw(e,t)}function gM(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function mM(e){return Object.getPrototypeOf(e.constructor)===kp}function vM(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function yM(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===yn?n=o:mM(o)?r=o:i=o}),i||r||n||null}var _M={provide:io,useExisting:Lt(()=>xs)},Ts=Promise.resolve(),xs=(()=>{class e extends io{callSetDisabledState;get submitted(){return he(this.submittedReactive)}_submitted=nr(()=>this.submittedReactive());submittedReactive=bt(!1);_directives=new Set;form;ngSubmit=new ue;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new zl({},Fp(n),Lp(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Ts.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Ww(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Ts.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Ts.then(()=>{let r=this._findContainer(n.path),i=new zl({});pM(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Ts.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Ts.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),vM(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Op(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||e)(C(Pp,10),C(Vw,10),C(jp,8))};static \u0275dir=Ee({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ee("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[tr([_M]),St]})}return e})();function kw(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Pw(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var wM=class extends Gl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(Gw(n),zw(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Pw(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new ql(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){kw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){kw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Pw(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var EM={provide:Rs,useExisting:Lt(()=>Zt)},Fw=Promise.resolve(),Zt=(()=>{class e extends Rs{_changeDetectorRef;callSetDisabledState;control=new wM;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ue;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=yM(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),gM(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ww(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Fw.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&rr(r);Fw.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?lM(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(C(io,9),C(Pp,10),C(Vw,10),C(Wl,10),C(ct,8),C(jp,8))};static \u0275dir=Ee({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[tr([EM]),St,fn]})}return e})();var Zl=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ee({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var DM={provide:Wl,useExisting:Lt(()=>Mt),multi:!0};function Zw(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function bM(e){return e.split(":")[0]}var Mt=(()=>{class e extends kp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=_(er).injector;destroyRef=_(Dt);cdr=_(ct);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ui({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=Zw(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=bM(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=On(e)))(i||e)}})();static \u0275dir=Ee({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ee("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[tr([DM]),St]})}return e})(),wn=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Zw(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(C(it),C(Gt),C(Mt,9))};static \u0275dir=Ee({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),CM={provide:Wl,useExisting:Lt(()=>Qw),multi:!0};function Lw(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function SM(e){return e.split(":")[0]}var Qw=(()=>{class e extends kp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=SM(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=On(e)))(i||e)}})();static \u0275dir=Ee({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ee("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[tr([CM]),St]})}return e})(),En=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(Lw(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Lw(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(C(it),C(Gt),C(Qw,9))};static \u0275dir=Ee({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var IM=(()=>{class e{_validator=Mw;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Mw,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ee({type:e,features:[fn]})}return e})();var TM={provide:Pp,useExisting:Lt(()=>Ns),multi:!0};var Ns=(()=>{class e extends IM{required;inputName="required";normalizeInput=rr;createValidator=n=>XA;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=On(e)))(i||e)}})();static \u0275dir=Ee({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&$i("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[tr([TM]),St]})}return e})();var AM=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=pn({type:e});static \u0275inj=jt({})}return e})();var Dn=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:jp,useValue:n.callSetDisabledState??Vp}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=pn({type:e});static \u0275inj=jt({imports:[AM]})}return e})();var ks={jon:{userId:"jon",name:"Jon",email:"jon@triarqhealth.com",isIam:!0,isAdmin:!0,defaultDepartment:"IT"},pintal:{userId:"pintal",name:"Pintal",email:"pintal@triarqhealth.com",isIam:!0,isAdmin:!1,defaultDepartment:"IT"},ami:{userId:"ami",name:"Ami",email:"ami@triarqhealth.com",isIam:!0,isAdmin:!1,defaultDepartment:"IT"},alice:{userId:"alice",name:"Alice Johnson",email:"alice@triarqhealth.com",isIam:!1,isAdmin:!1,defaultDepartment:"Engineering"},bob:{userId:"bob",name:"Bob Smith",email:"bob@triarqhealth.com",isIam:!1,isAdmin:!1,defaultDepartment:"Finance"}};var Ql="triarq_iam_session",Jw=["Okta / SSO","Microsoft 365 / Exchange","Azure AD","VPN","EMR","Data Warehouse / BI","GitHub","Jira","Shared Drive / SharePoint","AWS Console","Other"],Xw=["Prod","Non-Prod","Both"],eE=["Add","Remove","Change Role","Other"],Jl=["Low","Normal","High"],oo=["New","In Review","Need Info","Declined","Completed"];var ke=class e{currentUserSubject=new Ce(null);currentUser$=this.currentUserSubject.asObservable();constructor(){this.loadSession()}get currentUser(){return this.currentUserSubject.value}get isLoggedIn(){return this.currentUserSubject.value!==null}get isIam(){return this.currentUser?.isIam||!1}get isAdmin(){return this.currentUser?.isAdmin||!1}canViewAllRequests(){return this.isIam||this.isAdmin}canManageUsers(){return this.isAdmin}login(t){let n=ks[t];return n?(this.currentUserSubject.next(n),this.saveSession(n),!0):!1}logout(){this.currentUserSubject.next(null),this.clearSession()}saveSession(t){localStorage.setItem(Ql,JSON.stringify(t))}loadSession(){try{let t=localStorage.getItem(Ql);if(t){let n=JSON.parse(t);n&&ks[n.userId]&&this.currentUserSubject.next(ks[n.userId])}}catch{}}clearSession(){localStorage.removeItem(Ql)}getDemoUsers(){return Object.entries(ks).map(([t,n])=>({key:t,user:n}))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};var Xe=class e{toasts=[];toastsSubject=new Ce([]);toasts$=this.toastsSubject.asObservable();nextId=0;show(t,n="info"){let r={id:this.nextId++,message:t,type:n};this.toasts.push(r),this.toastsSubject.next([...this.toasts]),setTimeout(()=>{this.remove(r.id)},3e3)}success(t){this.show(t,"success")}error(t){this.show(t,"error")}info(t){this.show(t,"info")}warning(t){this.show(t,"warning")}remove(t){this.toasts=this.toasts.filter(n=>n.id!==t),this.toastsSubject.next([...this.toasts])}static \u0275fac=function(n){return new(n||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};var MM=(e,t)=>t.key;function RM(e,t){if(e&1&&(g(0,"option",20),v(1),m()),e&2){let n=t.$implicit,r=K();De("value",n.key),w(),x(r.getUserDisplayName(n.key,n.user.name))}}function xM(e,t){if(e&1&&(g(0,"div",21),v(1),m()),e&2){let n=K();w(),x(n.errorMessage)}}var Xl=class e{constructor(t,n,r){this.authService=t;this.toastService=n;this.router=r;this.demoUsers=this.authService.getDemoUsers(),this.authService.isLoggedIn&&this.navigateAfterLogin()}selectedUserId="";errorMessage="";demoUsers;getUserDisplayName(t,n){return`${n} ${{jon:"(IAM + Admin)",pintal:"(IAM)",ami:"(IAM)",alice:"(Employee)",bob:"(Employee)"}[t]||""}`}onSubmit(){if(!this.selectedUserId){this.errorMessage="Please select a user";return}if(!this.authService.login(this.selectedUserId)){this.errorMessage="Invalid user";return}this.errorMessage="",this.navigateAfterLogin()}navigateAfterLogin(){this.authService.canViewAllRequests()?this.router.navigate(["/app/dashboard"]):this.router.navigate(["/app/new-request"])}static \u0275fac=function(n){return new(n||e)(C(ke),C(Xe),C(Oe))};static \u0275cmp=oe({type:e,selectors:[["app-login"]],decls:33,vars:2,consts:[["id","login-screen",1,"screen"],[1,"login-container"],[1,"logo"],["src","assets/TRIARQHealth_Logo_rgb_White version.webp","alt","TRIARQ Health",1,"logo-image"],[1,"subtitle"],[1,"demo-banner"],[1,"demo-title"],[1,"demo-description"],[1,"angular-badge"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 250 250",1,"angular-logo"],["fill","#dd0031","d","M125 30L31.9 63.2l14.2 123.1L125 230l78.9-43.7 14.2-123.1z"],["fill","#c3002f","d","M125 30v22.2-.1V230l78.9-43.7 14.2-123.1L125 30z"],["fill","#fff","d","M125 52.1L66.8 182.6h21.7l11.7-29.2h49.4l11.7 29.2H183L125 52.1zm17 83.3h-34l17-40.9 17 40.9z"],[1,"angular-text"],[1,"login-form-card"],[3,"ngSubmit"],[1,"form-group"],["for","login-user"],["id","login-user","name","userId","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"form-error"],["type","submit",1,"btn","btn-primary","btn-block"]],template:function(n,r){n&1&&(g(0,"div",0)(1,"div",1)(2,"div",2),Ze(3,"img",3),g(4,"p",4),v(5,"IAM Access Request Portal"),m()(),g(6,"div",5)(7,"p",6),v(8,"Shared Multi-User Demo"),m(),g(9,"p",7),v(10,"Select a demo user to make an internal access request. All users share the same data in real-time via Supabase."),m()(),g(11,"div",8),rc(),g(12,"svg",9),Ze(13,"path",10)(14,"path",11)(15,"path",12),m(),ic(),g(16,"span",13),v(17,"Now in Angular"),m()(),g(18,"div",14)(19,"h2"),v(20,"Sign In"),m(),g(21,"form",15),ee("ngSubmit",function(){return r.onSubmit()}),g(22,"div",16)(23,"label",17),v(24,"Select User"),m(),g(25,"select",18),fe("ngModelChange",function(o){return me(r.selectedUserId,o)||(r.selectedUserId=o),o}),g(26,"option",19),v(27,"-- Select User --"),m(),Re(28,RM,2,2,"option",20,MM),m()(),pe(30,xM,2,1,"div",21),g(31,"button",22),v(32,"Sign In"),m()()()()()),n&2&&(w(25),de("ngModel",r.selectedUserId),w(3),xe(r.demoUsers),w(2),ge(r.errorMessage?30:-1))},dependencies:[Ne,Dn,Zl,wn,En,Mt,_n,Kl,Ns,Zt,xs],encapsulation:2})};var tE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);var so=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},Ps=class extends so{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},ao=class extends so{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},co=class extends so{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},eu=(function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e})(eu||{});var Fs=class{constructor(t,{headers:n={},customFetch:r,region:i=eu.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=tE(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ga(this,arguments,void 0,function*(n,r={}){var i;let o,s;try{let{headers:a,method:c,body:l,signal:u,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(h["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(h["Content-Type"]="application/json",y=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?y=JSON.stringify(l):y=l;let D=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(D=s.signal,u.addEventListener("abort",()=>s.abort())):D=s.signal);let E=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:y,signal:D}).catch(W=>{throw new Ps(W)}),L=E.headers.get("x-relay-error");if(L&&L==="true")throw new ao(E);if(!E.ok)throw new co(E);let I=((i=E.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return I==="application/json"?S=yield E.json():I==="application/octet-stream"||I==="application/pdf"?S=yield E.blob():I==="text/event-stream"?S=E:I==="multipart/form-data"?S=yield E.formData():S=yield E.text(),{data:S,error:null,response:E}}catch(a){return{data:null,error:a,response:a instanceof co||a instanceof ao?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var rE=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},NM=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let s=null,a=null,c=null,l=o.status,u=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var f;let E=await o.text();E===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=E:a=JSON.parse(E))}let y=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),D=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&D&&D.length>1&&(c=parseInt(D[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,l=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;let y=await o.text();try{s=JSON.parse(y),Array.isArray(s)&&o.status===404&&(a=[],s=null,l=200,u="OK")}catch{o.status===404&&y===""?(l=204,u="No Content"):s={message:y}}if(s&&n.isMaybeSingle&&(!(s==null||(p=s.details)===null||p===void 0)&&p.includes("0 rows"))&&(s=null,l=200,u="OK"),s&&n.shouldThrowOnError)throw new rE(s)}return{error:s,data:a,count:c,status:l,statusText:u}});return this.shouldThrowOnError||(i=i.catch(o=>{var s;let a="",c=o?.cause;if(c){var l,u,d,h;let p=(l=c?.message)!==null&&l!==void 0?l:"",y=(u=c?.code)!==null&&u!==void 0?u:"";a=`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,a+=`

Caused by: ${(h=c?.name)!==null&&h!==void 0?h:"Error"}: ${p}`,y&&(a+=` (${y})`),c?.stack&&(a+=`
${c.stack}`)}else{var f;a=(f=o?.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},OM=class extends NM{select(e){let t=!1,n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var s;let a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},nE=new RegExp("[,()]"),lo=class extends OM{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&nE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&nE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},kM=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET",o=!1,s=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new lo({method:i,url:a,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;let i="POST",{url:o,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),n||s.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(a.length>0){let c=[...new Set(a)].map(l=>`"${l}"`);o.searchParams.set("columns",c.join(","))}}return new lo({method:i,url:o,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;let s="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(e)){let l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){let u=[...new Set(l)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new lo({method:s,url:a,headers:c,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;let r="PATCH",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new lo({method:r,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;let n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new lo({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},iE=class oE{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new kM(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new oE(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),l,u=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(u)),d=r&&Object.values(n).some(u);d?(a="POST",l=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(a="POST",l=n);let h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new lo({method:a,url:c,headers:h,schema:this.schemaName,body:l,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};var Up=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){let r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},Bp=Up;var sE="2.93.3";var aE=`realtime-js/${sE}`,cE="1.0.0",$p="2.0.0",Hp=$p;var Ls=1e4,lE=1e3,uE=100,ur=(function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e})(ur||{}),je=(function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e})(je||{}),Rt=(function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e})(Rt||{}),qp=(function(e){return e.websocket="websocket",e})(qp||{}),ni=(function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e})(ni||{});var tu=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,n,r){var i,o;let s=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",l=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),y=0;p.setUint8(y++,this.KINDS.userBroadcastPush),p.setUint8(y++,c.length),p.setUint8(y++,a.length),p.setUint8(y++,s.length),p.setUint8(y++,l.length),p.setUint8(y++,d.length),p.setUint8(y++,n),Array.from(c,E=>p.setUint8(y++,E.charCodeAt(0))),Array.from(a,E=>p.setUint8(y++,E.charCodeAt(0))),Array.from(s,E=>p.setUint8(y++,E.charCodeAt(0))),Array.from(l,E=>p.setUint8(y++,E.charCodeAt(0))),Array.from(d,E=>p.setUint8(y++,E.charCodeAt(0)));var D=new Uint8Array(f.byteLength+r.byteLength);return D.set(new Uint8Array(f),0),D.set(new Uint8Array(r),f.byteLength),D.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){let r=JSON.parse(t),[i,o,s,a,c]=r;return n({join_ref:i,ref:o,topic:s,event:a,payload:c})}return n({})}_binaryDecode(t){let n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,n,i)}_decodeUserBroadcast(t,n,r){let i=n.getUint8(1),o=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4),c=this.HEADER_LENGTH+4,l=r.decode(t.slice(c,c+i));c=c+i;let u=r.decode(t.slice(c,c+o));c=c+o;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:u,payload:f};return s>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}};var uo=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var se=(function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e})(se||{}),zp=(e,t,n={})=>{var r;let i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=PM(s,e,t,i),o),{}):{}},PM=(e,t,n,r)=>{let i=t.find(a=>a.name===e),o=i?.type,s=n[e];return o&&!r.includes(o)?dE(o,s):Gp(s)},dE=(e,t)=>{if(e.charAt(0)==="_"){let n=e.slice(1,e.length);return VM(t,n)}switch(e){case se.bool:return FM(t);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return LM(t);case se.json:case se.jsonb:return jM(t);case se.timestamp:return UM(t);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return Gp(t);default:return Gp(t)}},Gp=e=>e,FM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},LM=e=>{if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},jM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},VM=(e,t)=>{if(typeof e!="string")return e;let n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o,s=e.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>dE(t,a))}return e},UM=e=>typeof e=="string"?e.replace(" ","T"):e,nu=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var fo=class{constructor(t,n,r={},i=Ls){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var js=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=e.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=e.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){let o=this.cloneDeep(t),s=this.transformState(n),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{let d=o[l];if(d){let h=u.map(D=>D.presence_ref),f=d.map(D=>D.presence_ref),p=u.filter(D=>f.indexOf(D.presence_ref)<0),y=d.filter(D=>h.indexOf(D.presence_ref)<0);p.length>0&&(a[l]=p),y.length>0&&(c[l]=y)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(t,n,r,i){let{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,c)}),this.map(s,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=l,i(a,l,c),l.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{let i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Vs=(function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e})(Vs||{}),Vn=(function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e})(Vn||{});var Us=class e{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new fo(this,Rt.join,this.params,this.timeout),this.rejoinTimer=new uo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=je.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new js(this),this.broadcastEndpointURL=nu(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==je.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Vs.PRESENCE]&&this.bindings[Vs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(Vn.CHANNEL_ERROR,f)),this._onClose(()=>t?.(Vn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t?.(Vn.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,D=(p=y?.length)!==null&&p!==void 0?p:0,E=[];for(let L=0;L<D;L++){let I=y[L],{filter:{event:S,schema:W,table:Xt,filter:te}}=I,ae=f&&f[L];if(ae&&ae.event===S&&e.isFilterValueEqual(ae.schema,W)&&e.isFilterValueEqual(ae.table,Xt)&&e.isFilterValueEqual(ae.filter,te))E.push(Object.assign(Object.assign({},I),{id:ae.id}));else{this.unsubscribe(),this.state=je.errored,t?.(Vn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(Vn.SUBSCRIBED);return}}).receive("error",f=>{this.state=je.errored,t?.(Vn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(Vn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===je.joined&&t===Vs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");let o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);let s={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let l=await a.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;let l=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=je.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new fo(this,Rt.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=je.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new fo(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>uE){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Rt;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,y,D;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((D=(y=f.filter)===null||y===void 0?void 0:y.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var p,y,D,E,L,I;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let S=f.id,W=(p=f.filter)===null||p===void 0?void 0:p.event;return S&&((y=n.ids)===null||y===void 0?void 0:y.includes(S))&&(W==="*"||W?.toLocaleLowerCase()===((D=n.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{let S=(L=(E=f?.filter)===null||E===void 0?void 0:E.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return S==="*"||S===((I=n?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:y,table:D,commit_timestamp:E,type:L,errors:I}=p;h=Object.assign(Object.assign({},{schema:y,table:D,commit_timestamp:E,eventType:L,new:{},old:{},errors:I}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===je.closed}_isJoined(){return this.state===je.joined}_isJoining(){return this.state===je.joining}_isLeaving(){return this.state===je.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){let i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&e.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(let r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Rt.close,{},t)}_onError(t){this._on(Rt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=je.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=zp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=zp(t.columns,t.old_record)),n}};var Wp=()=>{},ru={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$M=[1e3,2e3,5e3,1e4],HM=1e4,qM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Bs=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ls,this.transport=null,this.heartbeatIntervalMs=ru.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Wp,this.ref=0,this.reconnectTimer=null,this.vsn=Hp,this.logger=Wp,this.conn=null,this.sendBuffer=[],this.serializer=new tu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${qp.websocket}`,this.httpEndpoint=nu(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bp.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){let t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ur.connecting:return ni.Connecting;case ur.open:return ni.Open;case ur.closing:return ni.Closing;default:return ni.Closed}}isConnected(){return this.connectionState()===ni.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Us(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){let{topic:n,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(lE,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ru.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",l)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:o,ref:s}=n,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ur.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ur.open||this.conn.readyState===ur.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Rt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{let r=new Blob([qM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{let o={access_token:n,version:aE};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Rt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new uo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ru.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,s,a,c,l,u,d,h,f;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Ls,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:ru.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:Wp,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:Hp,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:p=>$M[p-1]||HM,this.vsn){case cE:this.encode=(u=t?.encode)!==null&&u!==void 0?u:(p,y)=>y(JSON.stringify(p)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(p,y)=>y(JSON.parse(p));break;case $p:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var $s=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function GM(e,t,n){let r=new URL(t,e);if(n)for(let[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function zM(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function WM(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:s}){let a=GM(e.baseUrl,r,i),c=await zM(e.auth),l=await t(a,{method:n,headers:b(b(b({},o?{"Content-Type":"application/json"}:{}),c),s),body:o?JSON.stringify(o):void 0}),u=await l.text(),d=(l.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!l.ok){let f=d?h:void 0,p=f?.error;throw new $s(p?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:l.status,headers:l.headers,data:h}}}}function iu(e){return e.join("")}var KM=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:iu(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){let n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${iu(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${iu(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${iu(e.namespace)}`}),!0}catch(t){if(t instanceof $s&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof $s&&n.status===409)return;throw n}}};function ho(e){return e.join("")}var YM=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ho(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ho(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){let n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ho(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ho(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ho(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ho(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof $s&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof $s&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},fE=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);let n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=WM({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new KM(this.client,t),this.tableOps=new YM(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var su=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function au(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ou=class extends su{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mE=class extends su{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};var ZM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),QM=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Kp=e=>{if(Array.isArray(e))return e.map(n=>Kp(n));if(typeof e=="function"||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([n,r])=>{let i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Kp(r)}),t},JM=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function qs(e){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(e)}function XM(e,t){if(qs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eR(e){var t=XM(e,"string");return qs(t)=="symbol"?t:t+""}function tR(e,t,n){return(t=eR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(n),!0).forEach(function(r){tR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pE=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},nR=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){let i=e,o=i.status||500;if(typeof i.json=="function")i.json().then(s=>{let a=s?.statusCode||s?.code||o+"";t(new ou(pE(s),o,a,r))}).catch(()=>{if(r==="vectors"){let s=o+"";t(new ou(i.statusText||`HTTP ${o} error`,o,s,r))}else{let s=o+"";t(new ou(i.statusText||`HTTP ${o} error`,o,s,r))}});else{let s=o+"";t(new ou(i.statusText||`HTTP ${o} error`,o,s,r))}}else t(new mE(pE(e),e,r))},rR=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!r?P(P({},i),n):(QM(r)?(i.headers=P({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),P(P({},i),n))};async function Hs(e,t,n,r,i,o,s){return new Promise((a,c)=>{e(n,rR(t,r,i,o)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;if(s==="vectors"){let u=l.headers.get("content-type");if(l.headers.get("content-length")==="0"||l.status===204)return{};if(!u||!u.includes("application/json"))return{}}return l.json()}).then(l=>a(l)).catch(l=>nR(l,c,r,s))})}function vE(e="storage"){return{get:async(t,n,r,i)=>Hs(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,o)=>Hs(t,"POST",n,i,o,r,e),put:async(t,n,r,i,o)=>Hs(t,"PUT",n,i,o,r,e),head:async(t,n,r,i)=>Hs(t,"HEAD",n,P(P({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,o)=>Hs(t,"DELETE",n,i,o,r,e)}}var iR=vE("storage"),{get:Gs,post:Qt,put:Yp,head:oR,remove:Zp}=iR,vt=vE("vectors"),po=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=ZM(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(au(n))return{data:null,error:n};throw n}}},sR=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(au(t))return{data:null,error:t};throw t}}},yE;yE=Symbol.toStringTag;var aR=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[yE]="BlobDownloadBuilder",this.promise=null}asStream(){return new sR(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(au(t))return{data:null,error:t};throw t}}},cR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},lR=class extends po{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let o,s=P(P({},gE),r),a=P(P({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",i.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(c))):(o=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=P(P({},a),r.headers));let l=i._removeEmptyFolders(t),u=i._getFinalPath(l),d=await(e=="PUT"?Yp:Qt)(i.fetch,`${i.url}/object/${u}`,o,P({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{path:l,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;let o=i._removeEmptyFolders(e),s=i._getFinalPath(o),a=new URL(i.url+`/object/upload/sign/${s}`);return a.searchParams.set("token",t),i.handleOperation(async()=>{let c,l=P({upsert:gE.upsert},r),u=P(P({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType),{path:o,fullPath:(await Yp(i.fetch,a.toString(),c,{headers:u})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e),i=P({},n.headers);t?.upsert&&(i["x-upsert"]="true");let o=await Qt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+o.url),a=s.searchParams.get("token");if(!a)throw new su("No token returned by API");return{signedUrl:s.toString(),path:e,token:a}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Qt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Qt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),o=await Qt(r.fetch,`${r.url}/object/sign/${i}`,P({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${s}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{let i=await Qt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(s=>P(P({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${o}`):null}))})}download(e,t){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(e),s=()=>Gs(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new aR(s,this.shouldThrowOnError)}async info(e){var t=this;let n=t._getFinalPath(e);return t.handleOperation(async()=>Kp(await Gs(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;let n=t._getFinalPath(e);try{return await oR(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(au(r)&&r instanceof mE){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);let o=typeof t?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(t?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Zp(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{let i=P(P(P({},cR),t),{},{prefix:e||""});return await Qt(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{let r=P({},e);return await Qt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}},uR="2.93.3",zs={"X-Client-Info":`storage-js/${uR}`},dR=class extends po{constructor(e,t={},n,r){let i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));let o=i.href.replace(/\/$/,""),s=P(P({},zs),t);super(o,s,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=t.listBucketOptionsToQueryString(e);return await Gs(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Gs(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Qt(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Yp(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Qt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Zp(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},fR=class extends po{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=P(P({},zs),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Qt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);let r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await Gs(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Zp(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!JM(e))throw new su("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new fE({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){let s=i[o];return typeof s!="function"?s:async(...a)=>{try{return{data:await s.apply(i,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},hR=class extends po{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=P(P({},zs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await vt.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await vt.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},pR=class extends po{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=P(P({},zs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},gR=class extends po{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=P(P({},zs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await vt.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},mR=class extends gR{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new vR(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},vR=class extends hR{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new yR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},yR=class extends pR{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},_E=class extends dR{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new lR(this.url,this.headers,e,this.fetch)}get vectors(){return new mR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fR(this.url+"/iceberg",this.headers,this.fetch)}};var cu="2.93.3";var ri=30*1e3,lu=3,uu=lu*ri,wE="http://localhost:9999",EE="supabase.auth.token";var DE={"X-Client-Info":`gotrue-js/${cu}`};var Ws="X-Supabase-Api-Version",Qp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CE=600*1e3;var dr=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function T(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}var du=class extends dr{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function SE(e){return T(e)&&e.name==="AuthApiError"}var xt=class extends dr{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Jt=class extends dr{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},Ke=class extends Jt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function hu(e){return T(e)&&e.name==="AuthSessionMissingError"}var Un=class extends Jt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ii=class extends Jt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},oi=class extends Jt{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function IE(e){return T(e)&&e.name==="AuthImplicitGrantRedirectError"}var Ks=class extends Jt{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},fu=class extends Jt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var go=class extends Jt{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function pu(e){return T(e)&&e.name==="AuthRetryableFetchError"}var Ys=class extends Jt{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var si=class extends Jt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var gu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),TE=` 	
\r=`.split(""),_R=(()=>{let e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<TE.length;t+=1)e[TE[t].charCodeAt(0)]=-2;for(let t=0;t<gu.length;t+=1)e[gu[t].charCodeAt(0)]=t;return e})();function AE(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(gu[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(gu[r]),t.queuedBits-=6}}function ME(e,t,n){let r=_R[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Jp(e){let t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{DR(s,r,n)};for(let s=0;s<e.length;s+=1)ME(e.charCodeAt(s),i,o);return t.join("")}function wR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ER(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}wR(r,t)}}function DR(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function fr(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)ME(e.charCodeAt(i),n,r);return new Uint8Array(t)}function RE(e){let t=[];return ER(e,n=>t.push(n)),new Uint8Array(t)}function Bn(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>AE(i,n,r)),AE(null,n,r),t.join("")}function xE(e){return Math.round(Date.now()/1e3)+e}function NE(){return Symbol("auth-callback")}var Ve=()=>typeof window<"u"&&typeof document<"u",ai={tested:!1,writable:!1},mu=()=>{if(!Ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ai.tested)return ai.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ai.tested=!0,ai.writable=!0}catch{ai.tested=!0,ai.writable=!1}return ai.writable};function OE(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}var vu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ci=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},hr=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Be=async(e,t)=>{await e.removeItem(t)},Zs=class e{constructor(){this.promise=new e.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}};Zs.promiseConstructor=Promise;function Qs(e){let t=e.split(".");if(t.length!==3)throw new si("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!bE.test(t[r]))throw new si("JWT not in base64url format");return{header:JSON.parse(Jp(t[0])),payload:JSON.parse(Jp(t[1])),signature:fr(t[2]),raw:{header:t[0],payload:t[1]}}}async function PE(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function FE(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await e(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function bR(e){return("0"+e.toString(16)).substr(-2)}function CR(){let t=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,bR).join("")}async function SR(e){let n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function IR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;let n=await SR(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function li(e,t,n=!1){let r=CR(),i=r;n&&(i+="/PASSWORD_RECOVERY"),await ci(e,`${t}-code-verifier`,i);let o=await IR(r);return[o,r===o?"plain":"s256"]}var TR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function LE(e){let t=e.headers.get(Ws);if(!t||!t.match(TR))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function jE(e){if(!e)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function VE(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var AR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ui(e){if(!AR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yu(){let e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function UE(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function Xp(e){return JSON.parse(JSON.stringify(e))}var di=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),MR=[502,503,504];async function BE(e){var t;if(!kE(e))throw new go(di(e),0);if(MR.includes(e.status))throw new go(di(e),e.status);let n;try{n=await e.json()}catch(o){throw new xt(di(o),o)}let r,i=LE(e);if(i&&i.getTime()>=Qp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ys(di(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ke}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new Ys(di(n),e.status,n.weak_password.reasons);throw new du(di(n),e.status||500,r)}var RR=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function N(e,t,n,r){var i;let o=Object.assign({},r?.headers);o[Ws]||(o[Ws]=Qp["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await xR(e,t,n+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function xR(e,t,n,r,i,o){let s=RR(t,r,i,o),a;try{a=await e(n,Object.assign({},s))}catch(c){throw console.error(c),new go(di(c),0)}if(a.ok||await BE(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await BE(c)}}function Nt(e){var t;let n=null;NR(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=xE(e.expires_in)));let r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function eg(e){let t=Nt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function bn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function $E(e){return{data:e,error:null}}function HE(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,s=vr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function tg(e){return e}function NR(e){return e.access_token&&e.refresh_token&&e.expires_in}var _u=["global","local","others"];var mo=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=vu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=_u[0]){if(_u.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_u.join(", ")}`);try{return await N(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await N(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:bn})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:n}=t,r=vr(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await N(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:HE,redirectTo:n?.redirectTo})}catch(n){if(T(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await N(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:bn})}catch(n){if(T(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await N(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:tg});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(p.split(";")[1].split("=")[1]);l[`${D}Page`]=y}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(T(l))return{data:{users:[]},error:l};throw l}}async getUserById(t){ui(t);try{return await N(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:bn})}catch(n){if(T(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ui(t);try{return await N(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:bn})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ui(t);try{return await N(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:bn})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ui(t.userId);try{let{data:n,error:r}=await N(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(T(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ui(t.userId),ui(t.id);try{return{data:await N(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(T(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await N(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:tg});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(p.split(";")[1].split("=")[1]);l[`${D}Page`]=y}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(T(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(t){try{return await N(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(T(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await N(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(T(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await N(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(T(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await N(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(T(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await N(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(T(n))return{data:null,error:n};throw n}}};function ng(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}var fi={debug:!!(globalThis&&mu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Js=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},wu=class extends Js{};async function rg(e,t,n){fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),fi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new wu(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(fi.debug)try{let o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function qE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ig(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function GE(e){return parseInt(e,16)}function zE(e){let t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function WE(e){var t;let{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}let f=ig(e.address),p=u?`${u}://${r}`:r,y=e.statement?`${e.statement}
`:"",D=`${p} wants you to sign in with your Ethereum account:
${f}

${y}`,E=`URI: ${d}
Version: ${h}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),a&&(E+=`
Not Before: ${a.toISOString()}`),c&&(E+=`
Request ID: ${c}`),l){let L=`
Resources:`;for(let I of l){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);L+=`
- ${I}`}E+=L}return`${D}
${E}`}var ye=class extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}},hi=class extends ye{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}};function KE({error:e,options:t}){var n,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ye({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){let s=window.location.hostname;if(og(s)){if(o.rp.id!==s)return new ye({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function YE({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ye({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){let r=window.location.hostname;if(og(r)){if(n.rpId!==r)return new ye({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var sg=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},OR=new sg;function QE(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,i=vr(e,["challenge","user","excludeCredentials"]),o=fr(t).buffer,s=Object.assign(Object.assign({},n),{id:fr(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:fr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function JE(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=vr(e,["challenge","allowCredentials"]),i=fr(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){let a=n[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:fr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function XE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Bn(new Uint8Array(e.response.attestationObject)),clientDataJSON:Bn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function eD(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Bn(new Uint8Array(i.authenticatorData)),clientDataJSON:Bn(new Uint8Array(i.clientDataJSON)),signature:Bn(new Uint8Array(i.signature)),userHandle:i.userHandle?Bn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function og(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ZE(){var e,t;return!!(Ve()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function kR(e){try{let t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hi("Browser returned unexpected credential type",t)}:{data:null,error:new hi("Empty credential response",t)}}catch(t){return{data:null,error:KE({error:t,options:e})}}}async function PR(e){try{let t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hi("Browser returned unexpected credential type",t)}:{data:null,error:new hi("Empty credential response",t)}}catch(t){return{data:null,error:YE({error:t,options:e})}}}var FR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},LR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Eu(...e){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of e)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(n(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=Eu(a,s):r[o]=Eu(s)}else r[o]=s}return r}function jR(e,t){return Eu(FR,e,t||{})}function VR(e,t){return Eu(LR,e,t||{})}var Du=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){var s;try{let{data:a,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:c};let l=i??OR.createNewAbortSignal();if(a.webauthn.type==="create"){let{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){let d=r;if(d)u.name=`${u.id}:${d}`;else{let f=(await this.client.getUser()).data.user,p=((s=f?.user_metadata)===null||s===void 0?void 0:s.name)||f?.email||f?.id||"User";u.name=`${u.id}:${p}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{let u=jR(a.webauthn.credential_options.publicKey,o?.create),{data:d,error:h}=await kR({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{let u=VR(a.webauthn.credential_options.publicKey,o?.request),{data:d,error:h}=await PR(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return T(a)?{data:null,error:a}:{data:null,error:new xt("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new dr("rpId is required for WebAuthn authentication")};try{if(!ZE())return{data:null,error:new xt("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return T(s)?{data:null,error:s}:{data:null,error:new xt("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new dr("rpId is required for WebAuthn registration")};try{if(!ZE())return{data:null,error:new xt("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};let{data:c,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(s){return T(s)?{data:null,error:s}:{data:null,error:new xt("Unexpected error in register",s)}}}};qE();var UR={url:wE,storageKey:EE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function tD(e,t,n){return await n()}var vo={},BR=(()=>{class e{get jwks(){var n,r;return(r=(n=vo[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){vo[this.storageKey]=Object.assign(Object.assign({},vo[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=vo[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){vo[this.storageKey]=Object.assign(Object.assign({},vo[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},UR),n);if(this.storageKey=s.storageKey,this.instanceID=(r=e.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ve()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new mo({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vu(s.fetch),this.lock=s.lock||tD,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Ve()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=rg:this.lock=tD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Du(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:mu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ng(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ng(this.memoryStorage)),Ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cu}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(Ve()&&(r=OE(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Ve()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),IE(s)){let l=(n=s.details)===null||n===void 0?void 0:n.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return T(r)?this._returnResult({error:r}):this._returnResult({error:new xt("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,o;try{let s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Nt}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(T(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(n){var r,i,o;try{let s;if("email"in n){let{email:d,password:h,options:f}=n,p=null,y=null;this.flowType==="pkce"&&([p,y]=await li(this.storage,this.storageKey)),s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:y},xform:Nt})}else if("phone"in n){let{phone:d,password:h,options:f}=n;s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Nt})}else throw new ii("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return await Be(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(await Be(this.storage,`${this.storageKey}-code-verifier`),T(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(n){try{let r;if("email"in n){let{email:s,password:a,options:c}=n;r=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:eg})}else if("phone"in n){let{phone:s,password:a,options:c}=n;r=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:eg})}else throw new ii("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new Un;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,o,s;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=n.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){let{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,o,s,a,c,l,u,d,h,f;let p,y;if("message"in n)p=n.message,y=n.signature;else{let{chain:D,wallet:E,statement:L,options:I}=n,S;if(Ve())if(typeof E=="object")S=E;else{let Cn=window;if("ethereum"in Cn&&typeof Cn.ethereum=="object"&&"request"in Cn.ethereum&&typeof Cn.ethereum.request=="function")S=Cn.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=E}let W=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href),Xt=await S.request({method:"eth_requestAccounts"}).then(Cn=>Cn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Xt||Xt.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let te=ig(Xt[0]),ae=(i=I?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ae){let Cn=await S.request({method:"eth_chainId"});ae=GE(Cn)}let cD={domain:W.host,address:te,statement:L,uri:W.href,version:"1",chainId:ae,nonce:(o=I?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=I?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=I?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=I?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=I?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=I?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=WE(cD),y=await S.request({method:"personal_sign",params:[zE(p),te]})}try{let{data:D,error:E}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((h=n.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Nt});if(E)throw E;if(!D||!D.session||!D.user){let L=new Un;return this._returnResult({data:{user:null,session:null},error:L})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:E})}catch(D){if(T(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async signInWithSolana(n){var r,i,o,s,a,c,l,u,d,h,f,p;let y,D;if("message"in n)y=n.message,D=n.signature;else{let{chain:E,wallet:L,statement:I,options:S}=n,W;if(Ve())if(typeof L=="object")W=L;else{let te=window;if("solana"in te&&typeof te.solana=="object"&&("signIn"in te.solana&&typeof te.solana.signIn=="function"||"signMessage"in te.solana&&typeof te.solana.signMessage=="function"))W=te.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=L}let Xt=new URL((r=S?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in W&&W.signIn){let te=await W.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S?.signInWithSolana),{version:"1",domain:Xt.host,uri:Xt.href}),I?{statement:I}:null)),ae;if(Array.isArray(te)&&te[0]&&typeof te[0]=="object")ae=te[0];else if(te&&typeof te=="object"&&"signedMessage"in te&&"signature"in te)ae=te;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ae&&"signature"in ae&&(typeof ae.signedMessage=="string"||ae.signedMessage instanceof Uint8Array)&&ae.signature instanceof Uint8Array)y=typeof ae.signedMessage=="string"?ae.signedMessage:new TextDecoder().decode(ae.signedMessage),D=ae.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in W)||typeof W.signMessage!="function"||!("publicKey"in W)||typeof W!="object"||!W.publicKey||!("toBase58"in W.publicKey)||typeof W.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${Xt.host} wants you to sign in with your Solana account:`,W.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${Xt.href}`,`Issued At: ${(o=(i=S?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=S?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((a=S?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((c=S?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((h=(d=S?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...S.signInWithSolana.resources.map(ae=>`- ${ae}`)]:[]].join(`
`);let te=await W.signMessage(new TextEncoder().encode(y),"utf8");if(!te||!(te instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=te}}try{let{data:E,error:L}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Bn(D)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=n.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Nt});if(L)throw L;if(!E||!E.session||!E.user){let I=new Un;return this._returnResult({data:{user:null,session:null},error:I})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:L})}catch(E){if(T(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(n){let r=await hr(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new fu;let{data:s,error:a}=await N(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:Nt});if(await Be(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new Un;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(await Be(this.storage,`${this.storageKey}-code-verifier`),T(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(n){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=n,c=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Nt}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){let d=new Un;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,o,s,a;try{if("email"in n){let{email:c,options:l}=n,u=null,d=null;this.flowType==="pkce"&&([u,d]=await li(this.storage,this.storageKey));let{error:h}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in n){let{phone:c,options:l}=n,{data:u,error:d}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new ii("You must provide either an email or phone number.")}catch(c){if(await Be(this.storage,`${this.storageKey}-code-verifier`),T(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(n){var r,i;try{let o,s;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,s=(i=n.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=await N(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:Nt});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(T(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var r,i,o,s,a;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=await li(this.storage,this.storageKey));let u=await N(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:$E});return!((s=u.data)===null||s===void 0)&&s.url&&Ve()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(await Be(this.storage,`${this.storageKey}-code-verifier`),T(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Ke;let{error:o}=await N(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(T(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{let r=`${this.url}/resend`;if("email"in n){let{email:i,type:o,options:s}=n,{error:a}=await N(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:i,type:o,options:s}=n,{data:a,error:c}=await N(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new ii("You must provide either an email or phone number and a type")}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let i=n.expires_at?n.expires_at*1e3-Date.now()<uu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){let a=await hr(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=yu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=UE(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;let r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:bn}):await this._useSession(async r=>{var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ke}:await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:bn})})}catch(r){if(T(r))return hu(r)&&(await this._removeSession(),await Be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new Ke;let a=o.session,c=null,l=null;this.flowType==="pkce"&&n.email!=null&&([c,l]=await li(this.storage,this.storageKey));let{data:u,error:d}=await N(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:l}),jwt:a.access_token,xform:bn});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await Be(this.storage,`${this.storageKey}-code-verifier`),T(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ke;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=Qs(n.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:l}=await this._callRefreshToken(n.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:l}=await this._getUser(n.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});s={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(T(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(i=a.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Ke;let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Ve())throw new oi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new oi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ks("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Ks("No code detected.");let{data:I,error:S}=await this._exchangeCodeForSession(n.code);if(S)throw S;let W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:I.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=n;if(!s||!c||!a||!u)throw new oi("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;l&&(f=parseInt(l));let p=f-d;p*1e3<=ri&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);let{data:D,error:E}=await this._getUser(s);if(E)throw E;let L={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:n.type},error:null})}catch(i){if(T(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){let r=await hr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s&&!hu(s))return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=await this.admin.signOut(a,n);if(c&&!(SE(c)&&(c.status===404||c.status===401||c.status===403)||hu(c)))return this._returnResult({error:c})}return n!=="others"&&(await this._removeSession(),await Be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){let r=NE(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",n,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",s),console.error(s)}})}async resetPasswordForEmail(n,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await li(this.storage,this.storageKey,!0));try{return await N(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await Be(this.storage,`${this.storageKey}-code-verifier`),T(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var n;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,c,l,u,d;let{data:h,error:f}=s;if(f)throw f;let p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await N(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Ve()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(T(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:l,access_token:u,nonce:d}=n,h=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Nt}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Un}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(o){if(await Be(this.storage,`${this.storageKey}-code-verifier`),T(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await N(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await FE(async o=>(o>0&&await PE(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await N(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Nt})),(o,s)=>{let a=200*Math.pow(2,o);return s&&pu(s)&&Date.now()+a-i<ri})}catch(i){if(this._debug(r,"error",i),T(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),Ve()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=await hr(this.storage,this.storageKey);if(o&&this.userStorage){let a=await hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await ci(this.userStorage,this.storageKey+"-user",a)),o.user=(n=a?.user)!==null&&n!==void 0?n:yu()}else if(o&&!o.user&&!o.user){let a=await hr(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,await Be(this.storage,this.storageKey+"-user"),await ci(this.storage,this.storageKey,o)):o.user=yu()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<uu;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${uu}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),pu(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Ke;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Zs;let{data:s,error:a}=await this._refreshAccessToken(n);if(a)throw a;if(!s.session)throw new Ke;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),T(s)){let a={data:null,error:s};return pu(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,i=!0){let o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(n,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Be(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await ci(this.userStorage,this.storageKey+"-user",{user:r.user});let o=Object.assign({},r);delete o.user;let s=Xp(o);await ci(this.storage,this.storageKey,s)}else{let o=Xp(r);await ci(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Be(this.storage,this.storageKey),await Be(this.storage,this.storageKey+"-code-verifier"),await Be(this.storage,this.storageKey+"-user"),this.userStorage&&await Be(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Ve()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),ri);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-n)/ri);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ri}ms, refresh threshold is ${lu} ticks`),o<=lu&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Js)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ve()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=await li(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await N(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:l,error:u}=await N(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(n.factorType==="totp"&&l.type==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?XE(n.webauthn.credential_response):eD(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:l}=await N(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await N(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:QE(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:JE(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){let{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,i,o,s;if(n)try{let{payload:p}=Qs(n),y=null;p.aal&&(y=p.aal);let D=y,{data:{user:E},error:L}=await this.getUser(n);if(L)return this._returnResult({data:null,error:L});((i=(r=E?.factors)===null||r===void 0?void 0:r.filter(W=>W.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(D="aal2");let S=p.amr||[];return{data:{currentLevel:y,nextLevel:D,currentAuthenticationMethods:S},error:null}}catch(p){if(T(p))return this._returnResult({data:null,error:p});throw p}let{data:{session:a},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:l}=Qs(a.access_token),u=null;l.aal&&(u=l.aal);let d=u;((s=(o=a.user.factors)===null||o===void 0?void 0:o.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");let f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await N(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ke})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ke});let a=await N(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Ve()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(T(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ke});let a=await N(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Ve()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(T(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await N(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ke})})}catch(n){if(T(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await N(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ke})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(c=>c.kid===n);if(i)return i;let o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===n),i&&this.jwks_cached_at+CE>o)return i;let{data:s,error:a}=await N(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){let{data:p,error:y}=await this.getSession();if(y||!p.session)return this._returnResult({data:null,error:y});i=p.session.access_token}let{header:o,payload:s,signature:a,raw:{header:c,payload:l}}=Qs(i);r?.allowExpired||jE(s.exp);let u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){let{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:s,header:o,signature:a},error:null}}let d=VE(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,RE(`${c}.${l}`)))throw new si("Invalid JWT signature");return{data:{claims:s,header:o,signature:a},error:null}}catch(i){if(T(i))return this._returnResult({data:null,error:i});throw i}}}return e.nextInstanceID={},e})(),ag=BR;var $R=ag,cg=$R;var HR="2.93.3",Xs="";typeof Deno<"u"?Xs="deno":typeof document<"u"?Xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xs="react-native":Xs="node";var qR={"X-Client-Info":`supabase-js-${Xs}/${HR}`},GR={headers:qR},zR={schema:"public"},WR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KR={};function ea(e){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ea(e)}function YR(e,t){if(ea(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ea(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZR(e){var t=YR(e,"string");return ea(t)=="symbol"?t:t+""}function QR(e,t,n){return(t=ZR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nD(Object(n),!0).forEach(function(r){QR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var JR=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),XR=()=>Headers,ex=(e,t,n)=>{let r=JR(n),i=XR();return async(o,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:e,l=new i(s?.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,be(be({},s),{},{headers:l}))}};function tx(e){return e.endsWith("/")?e:e+"/"}function nx(e,t){var n,r;let{db:i,auth:o,realtime:s,global:a}=e,{db:c,auth:l,realtime:u,global:d}=t,h={db:be(be({},c),i),auth:be(be({},l),o),realtime:be(be({},u),s),storage:{},global:be(be(be({},d),a),{},{headers:be(be({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function rx(e){let t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tx(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ix=class extends cg{constructor(e){super(e)}},ox=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;let o=rx(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);let s=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:zR,realtime:KR,auth:be(be({},WR),{},{storageKey:s}),global:GR},c=nx(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=c.auth)!==null&&l!==void 0?l:{},this.headers,c.global.fetch)}this.fetch=ex(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(be({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new iE(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new _E(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Fs(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();let{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:s,lock:a,debug:c,throwOnError:l},u,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ix({url:this.authUrl.href,headers:be(be({},h),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:a,debug:c,throwOnError:l,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Bs(this.realtimeUrl.href,be(be({},e),{},{params:be(be({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},rD=(e,t,n)=>new ox(e,t,n);function sx(){if(typeof window<"u")return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(t==null)return!1;let n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}sx()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var lg={production:!1,supabaseUrl:"https://dretyqgfjapyrzduclfq.supabase.co",supabaseAnonKey:"sb_publishable_0IvYrT_acOxKiEe3IT0Uog_x8cx-4wW"};var Ot=class e{supabase;requestsSubscription=null;constructor(){this.supabase=rD(lg.supabaseUrl,lg.supabaseAnonKey)}mapRequestFromDb(t){return{id:t.request_number,dbId:t.id,createdAt:t.created_at,updatedAt:t.updated_at,requesterUserId:t.requester_id,requesterName:t.requester_name,requesterEmail:t.requester_email,department:t.department,applicationOrSystem:t.application_or_system,applicationOtherText:t.application_other_text||"",environment:t.environment,requestType:t.request_type,requestedRoleOrPermission:t.requested_role_or_permission,justification:t.justification,urgency:t.urgency,status:t.status,iamAssigneeUserId:t.iam_assignee_id,iamAssigneeName:t.iam_assignee_name}}mapEventFromDb(t){return{status:t.new_value||t.event_type,changedByUserId:t.actor_id,changedByName:t.actor_name,changedAt:t.created_at,note:t.comment||this.formatEventNote(t),eventType:t.event_type,oldValue:t.old_value,newValue:t.new_value}}formatEventNote(t){switch(t.event_type){case"created":return"Request submitted";case"status_changed":return`Status changed from ${t.old_value} to ${t.new_value}`;case"assigned":return`Assigned to ${t.new_value||"Unassigned"}`;case"comment_added":return t.comment||"";case"comment_employee":return t.comment||"";default:return t.event_type}}async getRequests(){let{data:t,error:n}=await this.supabase.from("requests").select("*").order("created_at",{ascending:!1});if(n)throw console.error("Error getting requests:",n),n;return(t||[]).map(r=>this.mapRequestFromDb(r))}async getRequestById(t){let{data:n,error:r}=await this.supabase.from("requests").select("*").eq("id",t).single();if(r)throw console.error("Error getting request:",r),r;return this.mapRequestFromDb(n)}async createRequest(t){let{data:n,error:r}=await this.supabase.from("requests").insert(t).select().single();if(r)throw console.error("Error creating request:",r),r;return n}async updateRequest(t,n){let{data:r,error:i}=await this.supabase.from("requests").update(n).eq("id",t).select().single();if(i)throw console.error("Error updating request:",i),i;return r}async getRequestEvents(t){let{data:n,error:r}=await this.supabase.from("request_events").select("*").eq("request_id",t).order("created_at",{ascending:!0});if(r)throw console.error("Error getting events:",r),r;return(n||[]).map(i=>this.mapEventFromDb(i))}async addRequestEvent(t){let{data:n,error:r}=await this.supabase.from("request_events").insert(t).select().single();if(r)throw console.error("Error adding event:",r),r;return n}subscribeToRequests(t){return this.requestsSubscription&&this.requestsSubscription.unsubscribe(),this.requestsSubscription=this.supabase.channel("requests-changes").on("postgres_changes",{event:"*",schema:"public",table:"requests"},n=>{console.log("Request change:",n),t(n)}).subscribe(),this.requestsSubscription}unsubscribeFromRequests(){this.requestsSubscription&&(this.requestsSubscription.unsubscribe(),this.requestsSubscription=null)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};function ax(e,t){e&1&&(We(0,"span",7),v(1,"Admin"),Qe())}function cx(e,t){e&1&&(We(0,"span",8),v(1,"IAM"),Qe())}function lx(e,t){e&1&&(We(0,"span",9),v(1,"Employee"),Qe())}var bu=class e{constructor(t,n,r,i){this.authService=t;this.toastService=n;this.supabaseService=r;this.router=i}logout(){this.supabaseService.unsubscribeFromRequests(),this.authService.logout(),this.toastService.success("Signed out successfully"),this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||e)(C(ke),C(Xe),C(Ot),C(Oe))};static \u0275cmp=oe({type:e,selectors:[["app-header"]],decls:15,vars:4,consts:[[1,"app-header"],[1,"header-left"],["src","assets/TRIARQHealth_Logo_rgb_White version.webp","alt","TRIARQ Health",1,"header-logo"],[1,"app-name"],[1,"header-right"],[1,"user-info"],["id","role-badges"],[1,"role-badge","badge-admin"],[1,"role-badge","badge-iam"],[1,"role-badge","badge-employee"],["id","user-identity"],[1,"btn","btn-sm","btn-secondary",3,"click"]],template:function(n,r){n&1&&(We(0,"header",0)(1,"div",1),Yc(2,"img",2),We(3,"span",3),v(4,"IAM Portal"),Qe()(),We(5,"div",4)(6,"div",5)(7,"span",6),pe(8,ax,2,0,"span",7),pe(9,cx,2,0,"span",8),pe(10,lx,2,0,"span",9),Qe(),We(11,"span",10),v(12),Qe()(),We(13,"button",11),Zc("click",function(){return r.logout()}),v(14,"Logout"),Qe()()()),n&2&&(w(8),ge(r.authService.currentUser!=null&&r.authService.currentUser.isAdmin?8:-1),w(),ge(r.authService.currentUser!=null&&r.authService.currentUser.isIam?9:-1),w(),ge(!(r.authService.currentUser!=null&&r.authService.currentUser.isIam)&&!(r.authService.currentUser!=null&&r.authService.currentUser.isAdmin)?10:-1),w(2),x(r.authService.currentUser==null?null:r.authService.currentUser.name))},dependencies:[Ne],encapsulation:2})};function ux(e,t){e&1&&(g(0,"a",3),v(1,"Dashboard"),m())}var Cu=class e{constructor(t){this.authService=t}static \u0275fac=function(n){return new(n||e)(C(ke))};static \u0275cmp=oe({type:e,selectors:[["app-nav"]],decls:6,vars:1,consts:[[1,"app-nav"],["routerLink","/app/new-request","routerLinkActive","active",1,"nav-item"],["routerLink","/app/my-requests","routerLinkActive","active",1,"nav-item"],["routerLink","/app/dashboard","routerLinkActive","active",1,"nav-item"]],template:function(n,r){n&1&&(g(0,"nav",0)(1,"a",1),v(2,"New Request"),m(),g(3,"a",2),v(4,"My Requests"),m(),pe(5,ux,2,0,"a",3),m()),n&2&&(w(5),ge(r.authService.canViewAllRequests()?5:-1))},dependencies:[Ne,xp,to,Ap],encapsulation:2})};var Su=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=oe({type:e,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"app-footer"],[1,"footer-info"]],template:function(n,r){n&1&&(We(0,"footer",0)(1,"div",1)(2,"span"),v(3,"TRIARQ IAM Portal v3.0 - Powered by Supabase"),Qe()()())},encapsulation:2})};var Iu=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=oe({type:e,selectors:[["app-layout"]],decls:6,vars:0,consts:[["id","main-app",1,"screen"],[1,"app-main"]],template:function(n,r){n&1&&(g(0,"div",0),Ze(1,"app-header")(2,"app-nav"),g(3,"main",1),Ze(4,"router-outlet"),m(),Ze(5,"app-footer"),m())},dependencies:[Ne,Jr,bu,Cu,Su],encapsulation:2})};function dx(e,t){if(e&1&&(g(0,"option",12),v(1),m()),e&2){let n=t.$implicit;De("value",n),w(),x(n)}}function fx(e,t){if(e&1&&(g(0,"option",12),v(1),m()),e&2){let n=t.$implicit;De("value",n),w(),x(n)}}function hx(e,t){if(e&1){let n=at();g(0,"div",6)(1,"label"),v(2,"Specify Other System "),g(3,"span",8),v(4,"*"),m()(),g(5,"input",21),fe("ngModelChange",function(i){ne(n);let o=K();return me(o.applicationOtherText,i)||(o.applicationOtherText=i),re(i)}),m()()}if(e&2){let n=K();w(5),de("ngModel",n.applicationOtherText)}}function px(e,t){if(e&1&&(g(0,"option",12),v(1),m()),e&2){let n=t.$implicit;De("value",n),w(),x(n)}}function gx(e,t){if(e&1&&(g(0,"option",12),v(1),m()),e&2){let n=t.$implicit;De("value",n),w(),x(n)}}var Tu=class e{constructor(t,n,r,i){this.authService=t;this.supabaseService=n;this.toastService=r;this.router=i}systems=Jw;environments=Xw;requestTypes=eE;urgencies=Jl;department="";applicationOrSystem="";applicationOtherText="";environment="";requestType="";urgency="";requestedRoleOrPermission="";justification="";submitting=!1;ngOnInit(){this.department=this.authService.currentUser?.defaultDepartment||""}clearForm(){this.department=this.authService.currentUser?.defaultDepartment||"",this.applicationOrSystem="",this.applicationOtherText="",this.environment="",this.requestType="",this.urgency="",this.requestedRoleOrPermission="",this.justification=""}async submitRequest(){if(!this.department||!this.applicationOrSystem||!this.environment||!this.requestType||!this.urgency||!this.requestedRoleOrPermission||!this.justification){this.toastService.error("Please fill in all required fields");return}if(this.applicationOrSystem==="Other"&&!this.applicationOtherText.trim()){this.toastService.error("Please specify the system name");return}this.submitting=!0;let t=this.authService.currentUser;try{let n=await this.supabaseService.createRequest({requester_id:t.userId,requester_name:t.name,requester_email:t.email,department:this.department.trim(),application_or_system:this.applicationOrSystem,application_other_text:this.applicationOrSystem==="Other"?this.applicationOtherText.trim():null,environment:this.environment,request_type:this.requestType,requested_role_or_permission:this.requestedRoleOrPermission.trim(),justification:this.justification.trim(),urgency:this.urgency,status:"New",iam_assignee_id:null,iam_assignee_name:null});await this.supabaseService.addRequestEvent({request_id:n.id,actor_id:t.userId,actor_name:t.name,actor_email:t.email,event_type:"created",new_value:"New",comment:"Request submitted"}),this.toastService.success("Request submitted successfully!"),this.router.navigate(["/app/my-requests"])}catch(n){console.error("Failed to submit request:",n),this.toastService.error("Failed to submit request")}finally{this.submitting=!1}}static \u0275fac=function(n){return new(n||e)(C(ke),C(Ot),C(Xe),C(Oe))};static \u0275cmp=oe({type:e,selectors:[["app-new-request"]],decls:83,vars:12,consts:[["requestForm","ngForm"],[1,"request-form-container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-row"],[1,"form-group"],["type","text","readonly","",1,"form-control",3,"value"],[1,"required"],["type","text","name","department","placeholder","e.g., Engineering, Finance, HR","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","applicationOrSystem","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["name","environment","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","requestType","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","urgency","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","requestedRoleOrPermission","placeholder","e.g., Read-only access, Admin role, Viewer","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","justification","placeholder","Explain why you need this access...","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"card-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["type","text","name","applicationOtherText","placeholder","Enter the system name","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(n,r){if(n&1){let i=at();g(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2"),v(4,"New Access Request"),m()(),g(5,"div",4)(6,"form",null,0)(8,"div",5)(9,"div",6)(10,"label"),v(11,"Your Name"),m(),Ze(12,"input",7),m(),g(13,"div",6)(14,"label"),v(15,"Your Email"),m(),Ze(16,"input",7),m()(),g(17,"div",6)(18,"label"),v(19,"Department / Team "),g(20,"span",8),v(21,"*"),m()(),g(22,"input",9),fe("ngModelChange",function(s){return ne(i),me(r.department,s)||(r.department=s),re(s)}),m()(),g(23,"div",5)(24,"div",6)(25,"label"),v(26,"Application / System "),g(27,"span",8),v(28,"*"),m()(),g(29,"select",10),fe("ngModelChange",function(s){return ne(i),me(r.applicationOrSystem,s)||(r.applicationOrSystem=s),re(s)}),g(30,"option",11),v(31,"-- Select --"),m(),Re(32,dx,2,2,"option",12,ft),m()(),g(34,"div",6)(35,"label"),v(36,"Environment "),g(37,"span",8),v(38,"*"),m()(),g(39,"select",13),fe("ngModelChange",function(s){return ne(i),me(r.environment,s)||(r.environment=s),re(s)}),g(40,"option",11),v(41,"-- Select --"),m(),Re(42,fx,2,2,"option",12,ft),m()()(),pe(44,hx,6,1,"div",6),g(45,"div",5)(46,"div",6)(47,"label"),v(48,"Request Type "),g(49,"span",8),v(50,"*"),m()(),g(51,"select",14),fe("ngModelChange",function(s){return ne(i),me(r.requestType,s)||(r.requestType=s),re(s)}),g(52,"option",11),v(53,"-- Select --"),m(),Re(54,px,2,2,"option",12,ft),m()(),g(56,"div",6)(57,"label"),v(58,"Urgency "),g(59,"span",8),v(60,"*"),m()(),g(61,"select",15),fe("ngModelChange",function(s){return ne(i),me(r.urgency,s)||(r.urgency=s),re(s)}),g(62,"option",11),v(63,"-- Select --"),m(),Re(64,gx,2,2,"option",12,ft),m()()(),g(66,"div",6)(67,"label"),v(68,"Requested Role / Permission "),g(69,"span",8),v(70,"*"),m()(),g(71,"input",16),fe("ngModelChange",function(s){return ne(i),me(r.requestedRoleOrPermission,s)||(r.requestedRoleOrPermission=s),re(s)}),m()(),g(72,"div",6)(73,"label"),v(74,"Business Justification "),g(75,"span",8),v(76,"*"),m()(),g(77,"textarea",17),fe("ngModelChange",function(s){return ne(i),me(r.justification,s)||(r.justification=s),re(s)}),m()()()(),g(78,"div",18)(79,"button",19),ee("click",function(){return ne(i),re(r.clearForm())}),v(80,"Clear"),m(),g(81,"button",20),ee("click",function(){return ne(i),re(r.submitRequest())}),v(82),m()()()()}n&2&&(w(12),De("value",r.authService.currentUser==null?null:r.authService.currentUser.name),w(4),De("value",r.authService.currentUser==null?null:r.authService.currentUser.email),w(6),de("ngModel",r.department),w(7),de("ngModel",r.applicationOrSystem),w(3),xe(r.systems),w(7),de("ngModel",r.environment),w(3),xe(r.environments),w(2),ge(r.applicationOrSystem==="Other"?44:-1),w(7),de("ngModel",r.requestType),w(3),xe(r.requestTypes),w(7),de("ngModel",r.urgency),w(3),xe(r.urgencies),w(7),de("ngModel",r.requestedRoleOrPermission),w(6),de("ngModel",r.justification),w(4),De("disabled",r.submitting),w(),Fn(" ",r.submitting?"Submitting...":"Submit Request"," "))},dependencies:[Ne,Dn,Zl,wn,En,yn,Mt,_n,Kl,Ns,Zt,xs],encapsulation:2})};var mx=(e,t)=>t.changedAt;function vx(e,t){if(e&1&&(g(0,"option",19),v(1),m()),e&2){let n=t.$implicit;De("value",n),w(),x(n)}}function yx(e,t){if(e&1){let n=at();g(0,"div",17)(1,"label"),v(2,"Status"),m(),g(3,"select",18),fe("ngModelChange",function(i){ne(n);let o=K();return me(o.selectedStatus,i)||(o.selectedStatus=i),re(i)}),Re(4,vx,2,2,"option",19,ft),m()(),g(6,"div",17)(7,"label"),v(8,"Assignee"),m(),g(9,"input",20),fe("ngModelChange",function(i){ne(n);let o=K();return me(o.selectedAssignee,i)||(o.selectedAssignee=i),re(i)}),m()()}if(e&2){let n=K();w(3),de("ngModel",n.selectedStatus),w(),xe(n.statuses),w(5),de("ngModel",n.selectedAssignee)}}function _x(e,t){if(e&1&&(g(0,"div",7)(1,"span",8),v(2,"Status"),m(),g(3,"span",9)(4,"span",21),v(5),m()()(),g(6,"div",7)(7,"span",8),v(8,"Assignee"),m(),g(9,"span",9),v(10),m()()),e&2){let n=K();w(4),It(n.getStatusClass(n.request.status)),w(),x(n.request.status),w(5),x(n.request.iamAssigneeName||"Unassigned")}}function wx(e,t){e&1&&(g(0,"p",13),v(1,"No activity yet"),m())}function Ex(e,t){if(e&1&&(g(0,"div",22)(1,"div",23)(2,"strong"),v(3),m(),g(4,"span",24),v(5),m()(),g(6,"div",25),v(7),m()()),e&2){let n=t.$implicit,r=K(2);w(3),x(n.changedByName),w(2),x(r.formatDate(n.changedAt)),w(2),x(n.note)}}function Dx(e,t){if(e&1&&Re(0,Ex,8,3,"div",22,mx),e&2){let n=K();xe(n.events)}}function bx(e,t){if(e&1){let n=at();g(0,"h3",11),v(1,"Add Comment"),m(),g(2,"div",17)(3,"textarea",26),fe("ngModelChange",function(i){ne(n);let o=K();return me(o.newComment,i)||(o.newComment=i),re(i)}),m()()}if(e&2){let n=K();w(3),de("ngModel",n.newComment)}}function Cx(e,t){if(e&1){let n=at();g(0,"button",27),ee("click",function(){ne(n);let i=K();return re(i.saveChanges())}),v(1),m()}if(e&2){let n=K();De("disabled",n.saving),w(),Fn(" ",n.saving?"Saving...":"Save Changes"," ")}}var yo=class e{constructor(t,n,r){this.authService=t;this.supabaseService=n;this.toastService=r}request;close=new ue;saved=new ue;statuses=oo;events=[];selectedStatus="";selectedAssignee="";newComment="";saving=!1;get canEdit(){return this.authService.canViewAllRequests()}get canComment(){let t=this.request.requesterUserId===this.authService.currentUser?.userId;return this.canEdit||t&&this.request.status==="Need Info"}async ngOnInit(){this.selectedStatus=this.request.status,this.selectedAssignee=this.request.iamAssigneeName||"",await this.loadEvents()}async loadEvents(){try{this.events=await this.supabaseService.getRequestEvents(this.request.dbId)}catch(t){console.error("Failed to load events:",t)}}getSystemDisplay(){return this.request.applicationOrSystem==="Other"?this.request.applicationOtherText:this.request.applicationOrSystem}getStatusClass(t){return{New:"status-new","In Review":"status-review","Need Info":"status-need-info",Declined:"status-declined",Completed:"status-completed"}[t]||""}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}onOverlayClick(t){t.target.classList.contains("modal-overlay")&&this.close.emit()}async saveChanges(){let t={},n=[],r=this.authService.currentUser;this.canEdit&&(this.selectedStatus!==this.request.status&&(t.status=this.selectedStatus,n.push({request_id:this.request.dbId,actor_id:r.userId,actor_name:r.name,actor_email:r.email,event_type:"status_changed",old_value:this.request.status,new_value:this.selectedStatus})),this.selectedAssignee!==(this.request.iamAssigneeName||"")&&(t.iam_assignee_name=this.selectedAssignee||null,t.iam_assignee_id=this.selectedAssignee?r.userId:null,n.push({request_id:this.request.dbId,actor_id:r.userId,actor_name:r.name,actor_email:r.email,event_type:"assigned",old_value:this.request.iamAssigneeName,new_value:this.selectedAssignee||null})));let i=this.newComment.trim();if(i&&n.push({request_id:this.request.dbId,actor_id:r.userId,actor_name:r.name,actor_email:r.email,event_type:this.canEdit?"comment_added":"comment_employee",comment:i}),Object.keys(t).length===0&&n.length===0){this.toastService.info("No changes to save");return}this.saving=!0;try{Object.keys(t).length>0&&await this.supabaseService.updateRequest(this.request.dbId,t);for(let o of n)await this.supabaseService.addRequestEvent(o);this.toastService.success("Changes saved!"),this.saved.emit()}catch(o){console.error("Failed to save changes:",o),this.toastService.error("Failed to save changes")}finally{this.saving=!1}}static \u0275fac=function(n){return new(n||e)(C(ke),C(Ot),C(Xe))};static \u0275cmp=oe({type:e,selectors:[["app-request-detail"]],inputs:{request:"request"},outputs:{close:"close",saved:"saved"},decls:78,vars:17,consts:[[1,"modal-overlay",3,"click"],[1,"modal-container"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"urgency-badge"],[2,"margin-top","24px"],[1,"activity-list"],[1,"text-muted"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"disabled"],[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],["type","text","placeholder","Enter assignee name",1,"form-control",3,"ngModelChange","ngModel"],[1,"status-badge"],[1,"activity-item"],[1,"activity-header"],[1,"activity-time"],[1,"activity-content"],["placeholder","Enter your comment...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(n,r){n&1&&(g(0,"div",0),ee("click",function(o){return r.onOverlayClick(o)}),g(1,"div",1)(2,"div",2)(3,"h2"),v(4),m(),g(5,"button",3),ee("click",function(){return r.close.emit()}),v(6,"\xD7"),m()(),g(7,"div",4)(8,"div",5)(9,"div",6)(10,"h3"),v(11,"Request Details"),m(),g(12,"div",7)(13,"span",8),v(14,"Requester"),m(),g(15,"span",9),v(16),m()(),g(17,"div",7)(18,"span",8),v(19,"Email"),m(),g(20,"span",9),v(21),m()(),g(22,"div",7)(23,"span",8),v(24,"Department"),m(),g(25,"span",9),v(26),m()(),g(27,"div",7)(28,"span",8),v(29,"System"),m(),g(30,"span",9),v(31),m()(),g(32,"div",7)(33,"span",8),v(34,"Environment"),m(),g(35,"span",9),v(36),m()(),g(37,"div",7)(38,"span",8),v(39,"Request Type"),m(),g(40,"span",9),v(41),m()(),g(42,"div",7)(43,"span",8),v(44,"Requested Role/Permission"),m(),g(45,"span",9),v(46),m()(),g(47,"div",7)(48,"span",8),v(49,"Justification"),m(),g(50,"span",9),v(51),m()(),g(52,"div",7)(53,"span",8),v(54,"Urgency"),m(),g(55,"span",9)(56,"span",10),v(57),m()()(),g(58,"div",7)(59,"span",8),v(60,"Created"),m(),g(61,"span",9),v(62),m()()(),g(63,"div",6)(64,"h3"),v(65,"Status & Assignment"),m(),pe(66,yx,10,2)(67,_x,11,4),g(68,"h3",11),v(69,"Activity History"),m(),g(70,"div",12),pe(71,wx,2,0,"p",13)(72,Dx,2,0),m(),pe(73,bx,4,1),m()()(),g(74,"div",14)(75,"button",15),ee("click",function(){return r.close.emit()}),v(76,"Close"),m(),pe(77,Cx,2,2,"button",16),m()()()),n&2&&(w(4),x(r.request.id),w(12),x(r.request.requesterName),w(5),x(r.request.requesterEmail),w(5),x(r.request.department),w(5),x(r.getSystemDisplay()),w(5),x(r.request.environment),w(5),x(r.request.requestType),w(5),x(r.request.requestedRoleOrPermission),w(5),x(r.request.justification),w(5),It(r.request.urgency.toLowerCase()),w(),x(r.request.urgency),w(5),x(r.formatDate(r.request.createdAt)),w(4),ge(r.canEdit?66:67),w(5),ge(r.events.length===0?71:72),w(2),ge(r.canComment?73:-1),w(4),ge(r.canEdit||r.canComment?77:-1))},dependencies:[Ne,Dn,wn,En,yn,Mt,_n,Zt],encapsulation:2})};var Sx=(e,t)=>t.id;function Ix(e,t){if(e&1&&(g(0,"option",6),v(1),m()),e&2){let n=t.$implicit;De("value",n),w(),x(n)}}function Tx(e,t){e&1&&(g(0,"div",9)(1,"div",12),v(2,"\u{1F4C4}"),m(),g(3,"h3"),v(4,"No requests found"),m(),g(5,"p"),v(6,"Submit a new request to get started"),m()())}function Ax(e,t){if(e&1){let n=at();g(0,"tr",13),ee("click",function(){let i=ne(n).$implicit,o=K(2);return re(o.openDetail(i))}),g(1,"td")(2,"span",14),v(3),m()(),g(4,"td"),v(5),m(),g(6,"td"),v(7),m(),g(8,"td")(9,"span",15),v(10),m()(),g(11,"td")(12,"span",16),v(13),m()(),g(14,"td"),v(15),m()()}if(e&2){let n=t.$implicit,r=K(2);w(3),x(n.id),w(2),x(r.getSystemDisplay(n)),w(2),x(n.requestType),w(2),It(r.getStatusClass(n.status)),w(),x(n.status),w(2),It(n.urgency.toLowerCase()),w(),x(n.urgency),w(2),x(r.formatDateShort(n.updatedAt))}}function Mx(e,t){if(e&1&&(g(0,"table",10)(1,"thead")(2,"tr")(3,"th"),v(4,"Request ID"),m(),g(5,"th"),v(6,"System"),m(),g(7,"th"),v(8,"Type"),m(),g(9,"th"),v(10,"Status"),m(),g(11,"th"),v(12,"Urgency"),m(),g(13,"th"),v(14,"Updated"),m()()(),g(15,"tbody"),Re(16,Ax,16,10,"tr",null,Sx),m()()),e&2){let n=K();w(16),xe(n.filteredRequests)}}function Rx(e,t){if(e&1){let n=at();g(0,"app-request-detail",17),ee("close",function(){ne(n);let i=K();return re(i.closeDetail())})("saved",function(){ne(n);let i=K();return re(i.onDetailSaved())}),m()}if(e&2){let n=K();De("request",n.selectedRequest)}}var Au=class e{constructor(t,n,r,i){this.authService=t;this.supabaseService=n;this.toastService=r;this.cdr=i}statuses=oo;allRequests=[];filteredRequests=[];searchTerm="";statusFilter="";selectedRequest=null;async ngOnInit(){await this.loadRequests(),this.setupRealtimeSubscription()}ngOnDestroy(){this.supabaseService.unsubscribeFromRequests()}async loadRequests(){try{let t=await this.supabaseService.getRequests();console.log("Loaded requests:",t);let n=this.authService.currentUser?.userId;this.allRequests=t.filter(r=>r.requesterUserId===n).sort((r,i)=>new Date(i.updatedAt).getTime()-new Date(r.updatedAt).getTime()),this.applyFilters(),this.cdr.detectChanges()}catch(t){console.error("Failed to load requests:",t),this.toastService.error("Failed to load requests")}}setupRealtimeSubscription(){this.supabaseService.subscribeToRequests(async()=>{await this.loadRequests(),this.toastService.info("Data updated")})}applyFilters(){this.filteredRequests=this.allRequests.filter(t=>{if(this.statusFilter&&t.status!==this.statusFilter)return!1;if(this.searchTerm){let n=this.searchTerm.toLowerCase();if(!`${t.id} ${t.applicationOrSystem} ${t.requestType} ${t.status}`.toLowerCase().includes(n))return!1}return!0})}getSystemDisplay(t){return t.applicationOrSystem==="Other"?t.applicationOtherText:t.applicationOrSystem}getStatusClass(t){return{New:"status-new","In Review":"status-review","Need Info":"status-need-info",Declined:"status-declined",Completed:"status-completed"}[t]||""}formatDateShort(t){return t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}openDetail(t){this.selectedRequest=t}closeDetail(){this.selectedRequest=null}async onDetailSaved(){await this.loadRequests(),this.closeDetail()}static \u0275fac=function(n){return new(n||e)(C(ke),C(Ot),C(Xe),C(ct))};static \u0275cmp=oe({type:e,selectors:[["app-my-requests"]],decls:15,vars:4,consts:[[1,"list-header"],[1,"list-title"],[1,"list-filters"],["type","text","placeholder","Search requests...",1,"form-control","search-input",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"card"],[1,"card-body",2,"padding","0"],[1,"empty-state"],[1,"request-table"],[3,"request"],[1,"empty-state-icon"],[3,"click"],[1,"request-id"],[1,"status-badge"],[1,"urgency-badge"],[3,"close","saved","request"]],template:function(n,r){n&1&&(g(0,"div",0)(1,"h2",1),v(2,"My Requests"),m(),g(3,"div",2)(4,"input",3),fe("ngModelChange",function(o){return me(r.searchTerm,o)||(r.searchTerm=o),o}),ee("ngModelChange",function(){return r.applyFilters()}),m(),g(5,"select",4),fe("ngModelChange",function(o){return me(r.statusFilter,o)||(r.statusFilter=o),o}),ee("ngModelChange",function(){return r.applyFilters()}),g(6,"option",5),v(7,"All Statuses"),m(),Re(8,Ix,2,2,"option",6,ft),m()()(),g(10,"div",7)(11,"div",8),pe(12,Tx,7,0,"div",9)(13,Mx,18,0,"table",10),m()(),pe(14,Rx,1,1,"app-request-detail",11)),n&2&&(w(4),de("ngModel",r.searchTerm),w(),de("ngModel",r.statusFilter),w(3),xe(r.statuses),w(4),ge(r.filteredRequests.length===0?12:13),w(2),ge(r.selectedRequest?14:-1))},dependencies:[Ne,Dn,wn,En,yn,Mt,_n,Zt,yo],encapsulation:2})};var Nx=(e,t)=>t.id;function Ox(e,t){if(e&1&&(g(0,"option",11),v(1),m()),e&2){let n=t.$implicit;De("value",n),w(),x(n)}}function kx(e,t){if(e&1&&(g(0,"option",11),v(1),m()),e&2){let n=t.$implicit;De("value",n),w(),x(n)}}function Px(e,t){e&1&&(g(0,"div",14)(1,"div",17),v(2,"\u{1F50D}"),m(),g(3,"h3"),v(4,"No requests found"),m(),g(5,"p"),v(6,"Try adjusting your filters"),m()())}function Fx(e,t){e&1&&(g(0,"span",22),v(1,"\u26A0"),m())}function Lx(e,t){e&1&&v(0," - ")}function jx(e,t){if(e&1){let n=at();g(0,"tr",18),ee("click",function(){let i=ne(n).$implicit,o=K(2);return re(o.openDetail(i))}),g(1,"td")(2,"span",19),v(3),m()(),g(4,"td"),v(5),m(),g(6,"td"),v(7),m(),g(8,"td"),v(9),m(),g(10,"td")(11,"span",20),v(12),m()(),g(13,"td")(14,"span",21),v(15),m()(),g(16,"td"),pe(17,Fx,2,0,"span",22)(18,Lx,1,0),m(),g(19,"td"),v(20),m()()}if(e&2){let n=t.$implicit,r=K(2);w(3),x(n.id),w(2),x(n.requesterName),w(2),x(r.getSystemDisplay(n)),w(2),x(n.requestType),w(2),It(r.getStatusClass(n.status)),w(),x(n.status),w(2),It(n.urgency.toLowerCase()),w(),x(n.urgency),w(2),ge(r.isOverSLA(n)?17:18),w(3),x(r.formatDateShort(n.updatedAt))}}function Vx(e,t){if(e&1&&(g(0,"table",15)(1,"thead")(2,"tr")(3,"th"),v(4,"Request ID"),m(),g(5,"th"),v(6,"Requester"),m(),g(7,"th"),v(8,"System"),m(),g(9,"th"),v(10,"Type"),m(),g(11,"th"),v(12,"Status"),m(),g(13,"th"),v(14,"Urgency"),m(),g(15,"th"),v(16,"SLA"),m(),g(17,"th"),v(18,"Updated"),m()()(),g(19,"tbody"),Re(20,jx,21,12,"tr",null,Nx),m()()),e&2){let n=K();w(20),xe(n.filteredRequests)}}function Ux(e,t){if(e&1){let n=at();g(0,"app-request-detail",23),ee("close",function(){ne(n);let i=K();return re(i.closeDetail())})("saved",function(){ne(n);let i=K();return re(i.onDetailSaved())}),m()}if(e&2){let n=K();De("request",n.selectedRequest)}}var Mu=class e{constructor(t,n,r,i){this.authService=t;this.supabaseService=n;this.toastService=r;this.cdr=i}statuses=oo;urgencies=Jl;allRequests=[];filteredRequests=[];searchTerm="";statusFilter="";urgencyFilter="";selectedRequest=null;stats={total:0,new:0,inReview:0,needInfo:0,overdue:0};async ngOnInit(){await this.loadRequests(),this.setupRealtimeSubscription()}ngOnDestroy(){this.supabaseService.unsubscribeFromRequests()}async loadRequests(){try{this.allRequests=await this.supabaseService.getRequests(),console.log("Loaded requests:",this.allRequests),this.allRequests.sort((t,n)=>new Date(n.updatedAt).getTime()-new Date(t.updatedAt).getTime()),this.calculateStats(),this.applyFilters(),this.cdr.detectChanges()}catch(t){console.error("Failed to load requests:",t),this.toastService.error("Failed to load requests")}}setupRealtimeSubscription(){this.supabaseService.subscribeToRequests(async()=>{await this.loadRequests(),this.toastService.info("Data updated")})}calculateStats(){this.stats={total:this.allRequests.length,new:this.allRequests.filter(t=>t.status==="New").length,inReview:this.allRequests.filter(t=>t.status==="In Review").length,needInfo:this.allRequests.filter(t=>t.status==="Need Info").length,overdue:this.allRequests.filter(t=>this.isOverSLA(t)).length}}applyFilters(){this.filteredRequests=this.allRequests.filter(t=>{if(this.statusFilter&&t.status!==this.statusFilter||this.urgencyFilter&&t.urgency!==this.urgencyFilter)return!1;if(this.searchTerm){let n=this.searchTerm.toLowerCase();if(!`${t.id} ${t.requesterName} ${t.requesterEmail} ${t.applicationOrSystem} ${t.department}`.toLowerCase().includes(n))return!1}return!0})}isOverSLA(t){if(["Completed","Declined"].includes(t.status))return!1;let n=new Date(t.createdAt);return Math.floor((new Date().getTime()-n.getTime())/(1e3*60*60*24))>7}getSystemDisplay(t){return t.applicationOrSystem==="Other"?t.applicationOtherText:t.applicationOrSystem}getStatusClass(t){return{New:"status-new","In Review":"status-review","Need Info":"status-need-info",Declined:"status-declined",Completed:"status-completed"}[t]||""}formatDateShort(t){return t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}openDetail(t){this.selectedRequest=t}closeDetail(){this.selectedRequest=null}async onDetailSaved(){await this.loadRequests(),this.closeDetail()}static \u0275fac=function(n){return new(n||e)(C(ke),C(Ot),C(Xe),C(ct))};static \u0275cmp=oe({type:e,selectors:[["app-dashboard"]],decls:41,vars:13,consts:[[1,"stats-grid"],[1,"stat-card","highlight"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card"],[1,"list-header"],[1,"list-title"],[1,"list-filters"],["type","text","placeholder","Search...",1,"form-control","search-input",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value"],[1,"card"],[1,"card-body",2,"padding","0"],[1,"empty-state"],[1,"request-table"],[3,"request"],[1,"empty-state-icon"],[3,"click"],[1,"request-id"],[1,"status-badge"],[1,"urgency-badge"],[1,"sla-warning"],[3,"close","saved","request"]],template:function(n,r){n&1&&(g(0,"div",0)(1,"div",1)(2,"div",2),v(3),m(),g(4,"div",3),v(5,"New Requests"),m()(),g(6,"div",4)(7,"div",2),v(8),m(),g(9,"div",3),v(10,"In Review"),m()(),g(11,"div",4)(12,"div",2),v(13),m(),g(14,"div",3),v(15,"Need Info"),m()(),g(16,"div",4)(17,"div",2),v(18),m(),g(19,"div",3),v(20,"Over SLA (>7 days)"),m()()(),g(21,"div",5)(22,"h2",6),v(23,"All Requests"),m(),g(24,"div",7)(25,"input",8),fe("ngModelChange",function(o){return me(r.searchTerm,o)||(r.searchTerm=o),o}),ee("ngModelChange",function(){return r.applyFilters()}),m(),g(26,"select",9),fe("ngModelChange",function(o){return me(r.statusFilter,o)||(r.statusFilter=o),o}),ee("ngModelChange",function(){return r.applyFilters()}),g(27,"option",10),v(28,"All Statuses"),m(),Re(29,Ox,2,2,"option",11,ft),m(),g(31,"select",9),fe("ngModelChange",function(o){return me(r.urgencyFilter,o)||(r.urgencyFilter=o),o}),ee("ngModelChange",function(){return r.applyFilters()}),g(32,"option",10),v(33,"All Urgencies"),m(),Re(34,kx,2,2,"option",11,ft),m()()(),g(36,"div",12)(37,"div",13),pe(38,Px,7,0,"div",14)(39,Vx,22,0,"table",15),m()(),pe(40,Ux,1,1,"app-request-detail",16)),n&2&&(w(3),x(r.stats.new),w(5),x(r.stats.inReview),w(5),x(r.stats.needInfo),w(3),rs("border-color",r.stats.overdue>0?"var(--danger-color)":""),w(),rs("color",r.stats.overdue>0?"var(--danger-color)":""),w(),x(r.stats.overdue),w(7),de("ngModel",r.searchTerm),w(),de("ngModel",r.statusFilter),w(3),xe(r.statuses),w(2),de("ngModel",r.urgencyFilter),w(3),xe(r.urgencies),w(4),ge(r.filteredRequests.length===0?38:39),w(2),ge(r.selectedRequest?40:-1))},dependencies:[Ne,Dn,wn,En,yn,Mt,_n,Zt,yo],encapsulation:2})};var iD=()=>{let e=_(ke),t=_(Oe);return e.isLoggedIn?!0:(t.navigate(["/login"]),!1)};var oD=()=>{let e=_(ke),t=_(Oe);return e.canViewAllRequests()?!0:(t.navigate(["/app/new-request"]),!1)};var sD=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Xl},{path:"app",component:Iu,canActivate:[iD],children:[{path:"",redirectTo:"new-request",pathMatch:"full"},{path:"new-request",component:Tu},{path:"my-requests",component:Au},{path:"dashboard",component:Mu,canActivate:[oD]}]},{path:"**",redirectTo:"login"}];var aD={providers:[lf(),Mp(sD)]};var Bx=(e,t)=>t.id;function $x(e,t){if(e&1&&(We(0,"div"),v(1),Qe()),e&2){let n=t.$implicit;It(Ah("toast toast-",n.type)),Hr("show",!0),w(),Fn(" ",n.message," ")}}var Ru=class e{constructor(t){this.toastService=t}static \u0275fac=function(n){return new(n||e)(C(Xe))};static \u0275cmp=oe({type:e,selectors:[["app-toast-container"]],decls:4,vars:2,consts:[[1,"toast-container"],[3,"class","show"]],template:function(n,r){n&1&&(We(0,"div",0),Re(1,$x,2,6,"div",1,Bx),Mh(3,"async"),Qe()),n&2&&(w(),xe(Rh(3,0,r.toastService.toasts$)))},dependencies:[Ne,jh],encapsulation:2})};var xu=class e{title="TRIARQ IAM Portal";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=oe({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[["id","app"]],template:function(n,r){n&1&&(g(0,"div",0),Ze(1,"router-outlet")(2,"app-toast-container"),m())},dependencies:[Jr,Ru],encapsulation:2})};Yh(xu,aD).catch(e=>console.error(e));
